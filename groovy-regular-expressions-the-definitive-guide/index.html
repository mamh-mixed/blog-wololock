<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="author" content="Szymon Stepniak"><meta name="robots" content="all"><title>Groovy Regular Expressions - The Definitive Guide</title><meta name="description" content="Welcome to &quot;Groovy Regular Expressions - The Definitive Guide&quot;! In the next 15 minutes, you are going to learn everything you need to start working productively with regular expressions in Groovy programming language. Let&amp;#8217;s get started!Table of C..."><meta name="keywords" content="groovy,java,jmh,benchmark,regexp,regular-expressions"><link rel="shortcut icon" type="image/png" href="/favicon_new.png"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com"><link rel="dns-prefetch" href="//disqus.com"><link rel="dns-prefetch" href="//c.disquscdn.com"><link rel="canonical" href="https://e.printstacktrace.blog/groovy-regular-expressions-the-definitive-guide/"><link rel="alternate" type="application/rss+xml" title="e.printStackTrace(); // Blog" href="/atom.xml"><link rel="preload" as="style" onload='this.onload=null,this.rel="stylesheet"' href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"><noscript><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"></noscript><link rel="preload" as="style" onload='this.onload=null,this.rel="stylesheet"' href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/androidstudio.min.css"><link rel="stylesheet" href="/css/main.css?v=48"><link rel="preload" as="style" onload='this.onload=null,this.rel="stylesheet"' href="/css/conum.css?v=48"><noscript><link rel="stylesheet" href="/css/conum.css?v=48"></noscript><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic&amp;display=swap"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&amp;display=swap"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro&amp;display=swap"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Droid+Sans+Mono:400,700&amp;display=swap"><meta name="description" content="Welcome to &quot;Groovy Regular Expressions - The Definitive Guide&quot;! In the next 15 minutes, you are going to learn everything you need to start working productively with regular expressions in Groovy prog"><meta property="og:type" content="article"><meta property="og:title" content="Groovy Regular Expressions - The Definitive Guide"><meta property="og:url" content="https://e.printstacktrace.blog/groovy-regular-expressions-the-definitive-guide/"><meta property="og:site_name" content="e.printStackTrace(); &#x2F;&#x2F; Blog"><meta property="og:description" content="Welcome to &quot;Groovy Regular Expressions - The Definitive Guide&quot;! In the next 15 minutes, you are going to learn everything you need to start working productively with regular expressions in Groovy prog"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://e.printstacktrace.blog/images/og/groovy-regexp-jmh.jpg"><meta property="article:published_time" content="2019-03-18T11:46:39.000Z"><meta property="article:modified_time" content="2020-05-08T19:17:26.000Z"><meta property="article:author" content="Szymon Stepniak"><meta property="article:tag" content="groovy"><meta property="article:tag" content="java"><meta property="article:tag" content="jmh"><meta property="article:tag" content="benchmark"><meta property="article:tag" content="regexp"><meta property="article:tag" content="regular-expressions"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://e.printstacktrace.blog/images/og/groovy-regexp-jmh.jpg"><meta name="twitter:creator" content="@wololock"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://e.printstacktrace.blog/groovy-regular-expressions-the-definitive-guide/"},"headline":"Groovy Regular Expressions - The Definitive Guide","image":{"@type":"ImageObject","url":"https://e.printstacktrace.blog/images/og/groovy-regexp-jmh.jpg"},"datePublished":"2019-03-18T11:46:39.000Z","dateModified":"2020-05-08T19:17:26.000Z","author":{"@type":"Person","name":"Szymon Stepniak"},"publisher":{"@type":"Organization","name":"e.printStackTrace(); // Blog","logo":{"@type":"ImageObject","url":"https://e.printstacktrace.blog/images/site-logo.jpg","height":60,"width":600}},"description":"Welcome to \"Groovy Regular Expressions - The Definitive Guide\"! In the next 15 minutes, you are going to learn everything you need to start working productively with regular expressions in Groovy programming language. Let&#8217;s get started!","keywords":"groovy,java,jmh,benchmark,regexp,regular-expressions"}</script><meta name="generator" content="Hexo 4.2.1"><style>.img-lazyload-container{overflow:hidden;max-width:100%}.img-lazyload-container img{max-width:100%;display:block;height:auto;transition:opacity .5s ease-in-out}.img-lazyload-container img:not([src]){height:0;opacity:0}</style></head><body class="layout-post"><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#main-navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="/"><span>e.printStackTrace(); // Blog</span></a></div><div class="collapse navbar-collapse" id="main-navbar"><ul class="nav navbar-nav navbar-right"><li><a href="/archives">Archive</a></li><li><a href="https://github.com/wololock/wololock.github.io" target="_blank" rel="noopener">GitHub</a></li><li><a href="/youtube">YouTube</a></li><li><a class="stack-overflow" href="https://stackoverflow.com/users/2194470/szymon-stepniak?tab=profile" target="_blank" rel="noopener"><img class="so-icon" src="/img/so.png"><b class="rep">27,343</b><span class="badges"><span class="gold"><span class="b">●</span><span class="c">9</span></span><span class="silver"><span class="b">●</span><span class="c">61</span></span><span class="bronze"><span class="b">●</span><span class="c">94</span></span></span></a></li></ul></div></div></nav><header class="header-section"><div class="intro-header" style="background-image:url(/images/groovy-regexp-jmh-bg.jpg)"><div class="container"><div class="row"><div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1"><div class="post-heading"><a class="category" href="/groovy-cookbook/">Groovy Cookbook</a><h1>Groovy Regular Expressions - The Definitive Guide</h1><div class="post-meta"><ul><li><time datetime="2019-03-18T11:46:39.000Z" itemprop="datePublished">Mar 18, 2019</time></li><li>21 minutes read</li><li><a href="https://e.printstacktrace.blog/groovy-regular-expressions-the-definitive-guide/#disqus_thread">0 Comments</a></li></ul><section class="post-tags"><ul class="tags"><li><a class="tag post-meta" href="/t/groovy/">groovy</a></li><li><a class="tag post-meta" href="/t/java/">java</a></li><li><a class="tag post-meta" href="/t/jmh/">jmh</a></li><li><a class="tag post-meta" href="/t/benchmark/">benchmark</a></li><li><a class="tag post-meta" href="/t/regexp/">regexp</a></li><li><a class="tag post-meta" href="/t/regular-expressions/">regular-expressions</a></li></ul></section></div></div></div></div></div></div></header><div class="container"><div class="row"><div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1"><article class="blog-post" role="main"><div class="paragraph"><p>Welcome to <em>"Groovy Regular Expressions - The Definitive Guide"</em>! In the next 15 minutes, you are going to learn everything you need to start working productively with regular expressions in Groovy programming language. Let&#8217;s get started!</p></div><a id="more"></a><div id="toc" class="toc"><div id="toctitle" class="title">Table of Contents</div><ul class="sectlevel1"><li><a href="#introduction">Introduction</a></li><li><a href="#operators">Operators</a><ul class="sectlevel2"><li><a href="#string-pattern-operator"><code>~string</code> (pattern operator)</a></li><li><a href="#find-operator"><code>=~</code> (find operator)</a></li><li><a href="#exact-match-operator"><code>==~</code> (exact match operator)</a></li></ul></li><li><a href="#usage-examples">Usage examples</a><ul class="sectlevel2"><li><a href="#extracting-all-matching-elements">Extracting all matching elements</a></li><li><a href="#extracting-words-that-begin-and-end-with-the-same-letter">Extracting words that begin and end with the same letter</a></li><li><a href="#extracting-matching-elements-using-named-group">Extracting matching element(s) using named group</a></li><li><a href="#using-multi-assignment-to-extract-matching-elements">Using multi assignment to extract matching elements</a></li><li><a href="#replacing-matching-elements-using-replacefirst">Replacing matching elements using <code>replaceFirst()</code></a></li><li><a href="#using-pattern-matcher-in-the-switch-case">Using pattern matcher in the <code>switch</code> case</a></li></ul></li><li><a href="#benchmark-optional">Benchmark (optional)</a><ul class="sectlevel2"><li><a href="#benchmark-1-multiple-assignments-from-the-regular-expression">Benchmark 1: multiple assignments from the regular expression</a></li><li><a href="#benchmark-2-exact-match-operator">Benchmark 2: exact match operator</a></li><li><a href="#benchmark-3-replacefirst-with-regular-expression">Benchmark 3: <code>replaceFirst</code> with regular expression</a></li><li><a href="#conclusion">Conclusion</a></li></ul></li></ul></div><div class="sect1"><h2 id="introduction">Introduction</h2><div class="sectionbody"><div class="paragraph"><p>I always found working with regular expressions in Java kind error-prone. It happened to me many times that I didn&#8217;t escape backslash character enough times, or I forgot to call <code>matcher.matches()</code> or <code>matcher.find()</code> explicitly. Luckily, the Groovy programming language makes working with regex much simpler. Let&#8217;s start by learning a few new operators that drastically improve our experience.</p></div></div></div><div class="sect1"><h2 id="operators">Operators</h2><div class="sectionbody"><div class="sect2"><h3 id="string-pattern-operator"><code>~string</code> (pattern operator)</h3><div class="paragraph"><p>Groovy makes initializing <code>java.util.regex.Pattern</code> class simple thanks to the <em>pattern operator</em>. All you have to do is to put <code>~</code> right in front of the string literal (e.g. <code>~"([Gg]roovy)"</code>), and it creates <code>java.util.regex.Pattern</code> object instead of the <code>java.lang.String</code> one.</p></div><div class="listingblock"><div class="title">Listing 1. Creating pattern object example</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">import java.util.regex.Pattern

def pattern = ~"([Gg])roovy"

assert pattern.class == Pattern</code></pre></div></div><div class="paragraph"><p>The above example is an equivalent of the following (more explicit) code:</p></div><div class="listingblock"><div class="title">Listing 2. More explicit pattern object creation example</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">import java.util.regex.Pattern

def pattern = Pattern.compile("([Gg])roovy")

assert pattern.class == Pattern</code></pre></div></div><div class="sect3"><h4 id="the-difference-between-pattern-and-pattern">The difference between <code>~"pattern"</code> and <code>~/pattern/</code></h4><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content"><div class="paragraph"><p>Groovy offers one significant improvement when it comes to working with regular expressions - so-called <em>slashy</em> strings. This syntax produces either regular <code>java.lang.String</code> (if it has no variables to interpolate) or <code>groovy.lang.GString</code> (if it contains variables to interpolate.)</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

def number = 2

def str1 = /The number is 2/
def str2 = /The number is $number/

assert str1 instanceof String
assert str2 instanceof GString</code></pre></div></div><div class="paragraph"><p>The most useful feature of <em>slashy</em> string is that it eliminates the need for escaping backslashes in the regular expression.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

assert (/Version \d+\.\d+\.\d+/) == 'Version \\d+\\.\\d+\\.\\d+'</code></pre></div></div><div class="paragraph"><p>Of course, you have to remember to escape <code>$</code> if you use one in the regular expression.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

assert 'The price is $99' ==~ /The price is \$\d+/</code></pre></div></div></td></tr></table></div><div class="paragraph"><p>Now when you know how to construct pattern objects in Groovy, let&#8217;s look at what we can do with it.</p></div></div></div><div class="sect2"><h3 id="find-operator"><code>=~</code> (find operator)</h3><div class="paragraph"><p>To create <code>java.util.regex.Matcher</code> object, you can use Groovy&#8217;s <em>find</em> operator. On the left side, you put a string you want to test matching on. On the right side, you put a pattern, that can be either <code>java.util.regex.Pattern</code> or <code>java.lang.String</code>. Consider the following example.</p></div><div class="listingblock"><div class="title">Listing 3. Creating matcher using find operator example.</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

def pattern = ~/\S+er\b/
def matcher = "My code is groovier and better when I use Groovy there" =~ pattern

assert pattern instanceof java.util.regex.Pattern
assert matcher instanceof java.util.regex.Matcher

assert matcher.find()
assert matcher.size() == 2
assert matcher[0..-1] == ["groovier", "better"]</code></pre></div></div><div class="paragraph"><p>Creating <code>java.util.regex.Pattern</code> object in the above example is optional. Instead, we could define a pattern using <em>slashy</em> string directly in the matcher line.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

def matcher = "My code is groovier and better when I use Groovy there" =~ /\S+er\b/

assert matcher instanceof java.util.regex.Matcher

assert matcher.find()
assert matcher.size() == 2
assert matcher[0..-1] == ["groovier", "better"]</code></pre></div></div><div class="paragraph"><p>When you get the <code>java.util.regex.Matcher</code> object, you can essentially use any of <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Matcher.html" target="_blank" rel="noopener">its standard methods</a>, or you can continue reading to learn more <em>Groovy</em> way to do it.</p></div><div class="sect3"><h4 id="using-operator-in-context-of-boolean">Using <code>=~</code> operator in context of boolean</h4><div class="paragraph"><p>You can also use <code>java.util.regex.Matcher</code> object in the context of the <em>boolean expression</em> (e.g., inside the <em>if-statement</em>.) In this case, Groovy implicitly invokes the <code>matcher.find()</code> method, which means that the expression evaluates to <code>true</code> if any part of the string matches the pattern.</p></div><div class="listingblock"><div class="title">Listing 4. Using matcher in the context of boolean expression example.</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

if ("My code is groovier and better when I use Groovy there" =~ /\S+er\b/) {
    println "At least one element matches the pattern..."
}

if ("Lorem ipsum dolor sit amet" =~ /\d+/) {
    println "This line is not executed..."
}</code></pre></div></div></div></div><div class="sect2"><h3 id="exact-match-operator"><code>==~</code> (exact match operator)</h3><div class="paragraph"><p>Groovy also adds a very useful <code>==~</code> <em>exact match</em> operator. It can be used in a similar way to the <em>find</em> operator, but it behaves a bit differently. It does not create <code>java.util.regex.Matcher</code> object, and instead, it returns <code>boolean</code> value. You can think of it as an equivalent of <code>matcher.matches()</code> method call - it tests if the entire string matches given pattern.</p></div><div class="listingblock"><div class="title">Listing 5. Using exact match operator examples.</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

assert "v3.12.4" ==~ /v\d{1,3}\.\d{1,3}\.\d{1,3}/

assert !("GROOVY-123: some change" ==~ /[A-Z]{3,6}-\d{1,4}/)

assert "GROOVY-123: some change" ==~ /[A-Z]{3,6}-\d{1,4}.{1,100}/</code></pre></div></div></div></div></div><div class="sect1"><h2 id="usage-examples">Usage examples</h2><div class="sectionbody"><div class="paragraph"><p>Checking if specific string matches given pattern is not the only thing you can do with regular expressions. In many cases, you want to extract the data that matches the specific pattern or even replace all occurrences with a new value. You will learn how you can do such things using Groovy.</p></div><div class="exampleblock text-box-2"><div class="content"><div class="paragraph"><p><span class="larger"><strong>Do you need help in learning <span class="mark">Groovy</span>?</strong></span></p></div><div class="paragraph"><p>Exploring and mastering a programming language like Groovy might be challenging. That is why I would like to offer you my help.</p></div><div class="ulist nobullets"><ul><li><p><span class="icon color-green"><i class="fa fa-question-circle"></i></span> Are you looking for a mentor that can <strong>guide you</strong> and <strong>explain</strong> things that are difficult for you to understand? Contact me on <a href="https://www.codementor.io/@szymonstpniak" target="_blank" rel="noopener" class="ga-track">Codementor.io</a> and let&#8217;s see how I can help you.</p></li><li><p><span class="icon color-green"><i class="fa fa-question-circle"></i></span> Are you looking for the <strong>curated list of recommended learning materials</strong> (books, online courses)? I <a href="https://kit.co/wololock/groovy-programmer-learning-kit" target="_blank" rel="noopener" class="ga-track">created one</a> for you.</p></li><li><p><span class="icon color-green"><i class="fa fa-question-circle"></i></span> Are you looking for some <strong>inspiring and entertaining Groovy-related videos</strong>? You might want to check my <a href="https://www.youtube.com/playlist?list=PLKaiHc24qCTQqGfb8CheoqBygptzSrTPo" target="_blank" rel="noopener" class="ga-track"><em>&quot;Groovy Cookbook&quot;</em> video playlist</a> on YouTube.</p></li></ul></div></div></div><div class="sect2"><h3 id="extracting-all-matching-elements">Extracting all matching elements</h3><div class="paragraph"><p>Let&#8217;s begin with extracting all matching elements. Groovy adds <code>findAll()</code> method to <code>java.util.regex.Matcher</code> class, and when invoked, it returns all matching elements. The below example uses this technique to extract all numbers from the given text.</p></div><div class="listingblock"><div class="title">Listing 6. Extracting all matching elements example.</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

def text = """ <i class="conum" data-value="1"></i><b>(1)</b>
This text contains some numbers like 1024
or 256. Some of them are odd (like 3) or
even (like 2).
"""

def result = (text =~ /\d+/).findAll()

assert result == ["1024", "256", "3", "2"] <i class="conum" data-value="2"></i><b>(2)</b></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b></td><td>Groovy&#8217;s multiline string example.</td></tr><tr><td><i class="conum" data-value="2"></i><b>2</b></td><td>Extracted values are of <code>java.lang.String</code> type. You may need to map them to integers if needed.</td></tr></table></div></div><div class="sect2"><h3 id="extracting-words-that-begin-and-end-with-the-same-letter">Extracting words that begin and end with the same letter</h3><div class="paragraph"><p>Let&#8217;s take a look at some practical more examples. In some cases, you need to extract words that start and end with the same (case-insensitive) letter. We could use a pattern <code>/(?i)\b([a-z])[a-z]*\1\b/</code>, where:</p></div><div class="ulist"><ul><li><p><code>(?i)</code> makes matching case-insensitive,</p></li><li><p><code>\b([a-z])</code> defines a group that matches the first letter in the word,</p></li><li><p><code>\1</code> refers to the first group (first letter in the word), and <code>\b</code> matches the end of the word.</p></li></ul></div><div class="paragraph"><p>This pattern extracts both the matching word and the letter. In Groovy, we can use <em>spread</em> operator to call <code>first()</code> method on each element to extract matching words.</p></div><div class="listingblock"><div class="title">Listing 7. Extracting words that begin and end with the same letter.</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

def result = ("This is test. Test is good, lol." =~ /(?i)\b([a-z])[a-z]*\1\b/).findAll()*.first()

assert result == ["test", "Test", "lol"]</code></pre></div></div></div><div class="sect2"><h3 id="extracting-matching-elements-using-named-group">Extracting matching element(s) using named group</h3><div class="paragraph"><p>Java (and thus Groovy) supports named groups in the regular expressions. When you group a pattern using parentheses, add <code>?&lt;name&gt;</code> right after the opening parenthesis to name a group. Naming groups allows you to extract values from matching pattern using those names, instead of the numeric index value. You can also use this named group to refer to the matching value when you call <code>replaceAll()</code> method on a matcher object.</p></div><div class="paragraph"><p>In the below example, we use a pattern that defines <code>?&lt;jira&gt;</code> named group.</p></div><div class="listingblock"><div class="title">Listing 8. Extracting matching element(s) using named group example.</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

def matcher = "JIRA-231 lorem ipsum dolor sit amet" =~ /^(?&lt;jira&gt;[A-Z]{2,4}-\d{1,3}).*$/

assert matcher.matches() <i class="conum" data-value="1"></i><b>(1)</b>
assert matcher.group("jira") == "JIRA-231" <i class="conum" data-value="2"></i><b>(2)</b>
assert matcher.replaceAll('Found ${jira} ID') == 'Found JIRA-231 ID' <i class="conum" data-value="3"></i><b>(3)</b></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b></td><td>You need to test if pattern matches before you can extract group by name.</td></tr><tr><td><i class="conum" data-value="2"></i><b>2</b></td><td>When the string matches the pattern, you can use <code>group(name)</code> method to extract matching group.</td></tr><tr><td><i class="conum" data-value="3"></i><b>3</b></td><td>We can also use <code>replaceAll()</code> method to create a new string. <strong>Make sure you use a single quote String</strong>. Otherwise Groovy will try to interpolate <code>${jira}</code> and fail.</td></tr></table></div></div><div class="sect2"><h3 id="using-multi-assignment-to-extract-matching-elements">Using multi assignment to extract matching elements</h3><div class="paragraph"><p>Another useful feature is <a href="https://groovy-lang.org/semantics.html#_multiple_assignment" target="_blank" rel="noopener">multiple variable assignment</a>. We can use it to extract matching values and assign them directly to specific variables. Let&#8217;s say you are parsing some data containing items with their prices and (optional) discount. Here is how you can extract price and discount and assign it to a variable in one line.</p></div><div class="listingblock"><div class="title">Listing 9. Using multiple assignments with a matcher object example.</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

def (_,price,discount) = ('Some item name: $99.99 (-15%)' =~ /\$(\d{1,4}\.\d{2})\s?\(?(-\d+%)?\)?/)[0]

assert _ == '$99.99 (-15%)'
assert price == "99.99"
assert discount == "-15%"</code></pre></div></div><div class="paragraph"><p>I used <code>_</code> as a name for the first variable that stores matching region, not useful in our case. Now, what happens if the row we process does not contain any discount information? The <code>discount</code> variable is set to <code>null</code>.</p></div><div class="listingblock"><div class="title">Listing 10. No discount information example.</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

def (_,price,discount) = ('Some item name: $49.99' =~ /\$(\d{1,4}\.\d{2})\s?\(?(-\d+%)?\)?/)[0]

assert _ == '$49.99'
assert price == "49.99"
assert discount == null</code></pre></div></div><div class="paragraph"><p>Another popular example is extracting minor, major, and patch parts from the semantic version name. We can use multiple assignments to extract all three parts in a single line of code.</p></div><div class="listingblock"><div class="title">Listing 11. Using multiple assignments to extract major, minor, and patch from the semantic version.</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

def (_,major,minor,patch) = ("v3.21.0" =~ /^v(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/)[0]

assert _ == "v3.21.0"
assert major == "3"
assert minor == "21"
assert patch == "0"</code></pre></div></div></div><div class="sect2"><h3 id="replacing-matching-elements-using-replacefirst">Replacing matching elements using <code>replaceFirst()</code></h3><div class="paragraph"><p>Extracting parts of the semantic version name to specific variables looks good, but what if I want to generate a new version by incrementing the patch part? Well, there is a simple solution to that problem as well. Groovy overloads <code>String.replaceFirst(String rgxp, String replacement)</code> method with <code>replaceFirst(Pattern p, Closure c)</code> and this variant is very powerful. We can extract matching parts in the closure and modify them as we wish. Take a look at the following example to see how you can increment the patch part in the semantic version.</p></div><div class="listingblock"><div class="title">Listing 12. Using <code>replaceFirst()</code> to increment patch part of the semantic version.</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

def version = "v3.21.0"
def expected = "v3.21.1"
def pattern = ~/^v(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/

def newVersion = version.replaceFirst(pattern) { _, major, minor, patch -&gt;
    "v${major}.${minor}.${(patch as int) + 1}"
}

assert newVersion == expected</code></pre></div></div></div><div class="sect2"><h3 id="using-pattern-matcher-in-the-switch-case">Using pattern matcher in the <code>switch</code> case</h3><div class="paragraph"><p>Groovy extends supported types in the <code>switch</code> statement and allows you to use patterns. In this case, Groovy executes <code>matcher.find()</code> method to test if any region of the input string matches the pattern. Consider the following example.</p></div><div class="listingblock"><div class="title">Listing 13. Pattern in the switch case example.</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">// Running on Groovy 3.0.3

def input = "test"

switch (input) {
    case ~/\d{3}/:
        println "The number has 3 digits."
        break

    case ~/\w{4}/:
        println "The word has 4 letters."
        break

    default:
        println "Unrecognized..."
}</code></pre></div></div><div class="paragraph"><p>Running the above example produces the following output.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">The word has 4 letters.</code></pre></div></div></div></div></div><div class="sect1"><h2 id="benchmark-optional">Benchmark (optional)</h2><div class="sectionbody"><div class="paragraph"><p>In the last segment of this detailed blog post, I want to show you some benchmarks. And let me make one thing clear - the following results you are going to see are not scientific proof. I present those results only to give you a hint about the overall performance of some cool features you have seen before. You will see that, in general, all presented approaches, and their equivalents perform quite similar, so there is no need to refactor your code after reading this section. If you never saw JMH benchmark tests, you are going to learn something new in a few minutes. Let&#8217;s go!</p></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content"><div class="paragraph"><p>Here you can find the <a href="https://github.com/wololock/groovy-regexp-examples" target="_blank" rel="noopener">Gradle project</a> containing all benchmark tests. Below are steps to execute those tests on your machine.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ git clone https://github.com/wololock/groovy-regexp-examples
Cloning into 'groovy-regexp-examples'...
remote: Enumerating objects: 29, done.
remote: Total 29 (delta 0), reused 0 (delta 0), pack-reused 29
Unpacking objects: 100% (29/29), 10.64 KiB | 1.33 MiB/s, done.

$ cd groovy-regexp-examples

$ ./gradlew --no-daemon jmh</code></pre></div></div></td></tr></table></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">Here are the specs of the laptop I run benchmark tests on Lenovo ThinkPad T440p laptop with <strong>Intel&#174; Core&#8482; i7-4900MQ CPU @ 2.80GHz</strong> and <strong>16 GBs RAM</strong>.</td></tr></table></div><div class="paragraph"><p>I run those benchmarks with four different Groovy and JDK variants:</p></div><div class="ulist"><ul><li><p>Groovy 2.5.11-indy and OpenJDK 1.8.0_242 (64-Bit Server VM, 25.242-b08)</p></li><li><p>Groovy 2.5.11-indy and OpenJDK 11.0.6 (64-Bit Server VM, 11.0.6+10)</p></li><li><p>Groovy 3.0.3-indy and OpenJDK 1.8.0_242 (64-Bit Server VM, 25.242-b08)</p></li><li><p>Groovy 3.0.3-indy and OpenJDK 11.0.6 (64-Bit Server VM, 11.0.6+10)</p></li></ul></div><div class="paragraph"><p>Every benchmark test was executed using both dynamic and static compilation.</p></div><div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content">All measurements are expressed in μs/op. Remember, that <strong>1 μs</strong> is equal to <strong>0.001 ms</strong> (millisecond) and <strong>0.000001 s</strong> (second).</td></tr></table></div><div class="sect2"><h3 id="benchmark-1-multiple-assignments-from-the-regular-expression">Benchmark 1: multiple assignments from the regular expression</h3><div class="paragraph"><p>In this benchmark, I wanted to check if using multiple variable assignments comes with a significant cost compared to a traditional group extraction. Here is what the test class looks like.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">package bench

import groovy.transform.CompileStatic
import org.openjdk.jmh.annotations.Benchmark
import org.openjdk.jmh.annotations.Scope
import org.openjdk.jmh.annotations.State

import java.util.regex.Matcher
import java.util.regex.Pattern

@State(Scope.Benchmark)
class A1_Multiple_Assignment_Bench {

    private static final Random random = new Random()

    private static final List&lt;String&gt; data = [
            'Some item name 1: $99.99 (-15%)',
            'Some item name 2: $49.99 (-5%)',
            'Some item name 3: $19.99',
            'Some item name 4: $29.99 (-13%)',
            'Some item name 5: $9.99',
            'Some item name 6: $51.21 (-2%)',
            'Some item name 7: $4.32 (-1%)',
            'Some item name 8: $3.14 (-23%)',
            'Some item name 9: $9.00'
    ]

    private static final Pattern pattern = ~/\$(\d{1,4}\.\d{2})\s?\(?(-\d+%)?\)?/

    private static final String getInput() {
        return data.get(random.nextInt(data.size()))
    }

    @Benchmark
    String multiple_assignment_dynamic() {
        def (_,price,discount) = (input =~ pattern)[0]

        return "price: $price, discount: $discount"
    }

    @Benchmark
    @CompileStatic
    String multiple_assignment_static() {
        final List list = (input =~ pattern)[0] as ArrayList

        def (_, price, discount) = [list[0], list[1], list[2]]

        return "price: $price, discount: $discount"
    }

    @Benchmark
    String standard_matcher_dynamic() {
        final Matcher matcher = pattern.matcher(input)
        if (!matcher.find()) {
            throw new IllegalStateException("Pattern didn't match!")
        }

        def price = matcher.group(1)
        def discount = matcher.group(2)

        return "price: $price, discount: $discount"
    }

    @Benchmark
    @CompileStatic
    String standard_matcher_static() {
        final Matcher matcher = pattern.matcher(input)
        if (!matcher.find()) {
            throw new IllegalStateException("Pattern didn't match!")
        }

        def price = matcher.group(1)
        def discount = matcher.group(2)

        return "price: $price, discount: $discount"
    }
}</code></pre></div></div><div class="paragraph"><p>Here are the results for specific Groovy and JDK versions.</p></div><div class="sect3"><h4 id="groovy-2-5-11-indy-and-openjdk-1-8-0_242">Groovy 2.5.11-indy and OpenJDK 1.8.0_242</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A1_Multiple_Assignment_Bench.multiple_assignment_dynamic  avgt   60  0,808 ± 0,013  us/op
A1_Multiple_Assignment_Bench.multiple_assignment_static   avgt   60  0,688 ± 0,009  us/op
A1_Multiple_Assignment_Bench.standard_matcher_dynamic     avgt   60  0,409 ± 0,007  us/op
A1_Multiple_Assignment_Bench.standard_matcher_static      avgt   60  0,387 ± 0,006  us/op</code></pre></div></div></div><div class="sect3"><h4 id="groovy-2-5-11-indy-and-openjdk-11-0-6">Groovy 2.5.11-indy and OpenJDK 11.0.6</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A1_Multiple_Assignment_Bench.multiple_assignment_dynamic  avgt   60  1,087 ± 0,022  us/op
A1_Multiple_Assignment_Bench.multiple_assignment_static   avgt   60  0,967 ± 0,023  us/op
A1_Multiple_Assignment_Bench.standard_matcher_dynamic     avgt   60  0,545 ± 0,012  us/op
A1_Multiple_Assignment_Bench.standard_matcher_static      avgt   60  0,538 ± 0,013  us/op</code></pre></div></div></div><div class="sect3"><h4 id="groovy-3-0-3-indy-and-openjdk-1-8-0_242">Groovy 3.0.3-indy and OpenJDK 1.8.0_242</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A1_Multiple_Assignment_Bench.multiple_assignment_dynamic  avgt   60  0,720 ± 0,012  us/op
A1_Multiple_Assignment_Bench.multiple_assignment_static   avgt   60  0,750 ± 0,018  us/op
A1_Multiple_Assignment_Bench.standard_matcher_dynamic     avgt   60  0,427 ± 0,010  us/op
A1_Multiple_Assignment_Bench.standard_matcher_static      avgt   60  0,371 ± 0,006  us/op</code></pre></div></div></div><div class="sect3"><h4 id="groovy-3-0-3-indy-and-openjdk-11-0-6">Groovy 3.0.3-indy and OpenJDK 11.0.6</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A1_Multiple_Assignment_Bench.multiple_assignment_dynamic  avgt   60  0,958 ± 0,018  us/op
A1_Multiple_Assignment_Bench.multiple_assignment_static   avgt   60  0,989 ± 0,018  us/op
A1_Multiple_Assignment_Bench.standard_matcher_dynamic     avgt   60  0,522 ± 0,013  us/op
A1_Multiple_Assignment_Bench.standard_matcher_static      avgt   60  0,514 ± 0,008  us/op</code></pre></div></div><div class="paragraph"><p>And here what those results look like on a single chart.</p></div><div class="openblock text-center"><div class="content"><div class="imageblock img-responsive img-thumbnail"><div class="content"><a class="image" href="/images/groovy-regexp-chart-01.png"><div class="img-lazyload-container" style="width:1012px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/groovy-regexp-chart-01.png" height="371" width="1012" style="padding-top:36.6600790513834%"></div></a></div></div></div></div><div class="paragraph"><p>Thoughts?</p></div><div class="ulist"><ul><li><p>We can see that OpenJDK 11.0.6 is just a bit "slower" compared to OpenJDK 1.8.0_242.</p></li><li><p>In most cases, Groovy 3.0.3 performed a bit better compared to other variants.</p></li><li><p>It still does not prove anything. If we compare the fastest multiple assignments in a dynamic compilation variant (<code>0.720 μs</code>) with the slowest one (<code>1.087 μs</code>), we will find that it was around <code>0.367 μs</code> slower. Or <code>0.000367 ms</code> to show it to you on a scale that is much easier to imagine. Can it be a bottleneck in your application? Absolutely not.</p></li></ul></div></div></div><div class="sect2"><h3 id="benchmark-2-exact-match-operator">Benchmark 2: exact match operator</h3><div class="paragraph"><p>In this benchmark, we compare the performance of the exact match operator with the traditional <code>matcher.matches()</code>. Here is the test class.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">package bench

import groovy.transform.CompileStatic
import groovy.transform.TypeChecked
import org.openjdk.jmh.annotations.Benchmark
import org.openjdk.jmh.annotations.Scope
import org.openjdk.jmh.annotations.State

import java.util.regex.Matcher
import java.util.regex.Pattern

@State(Scope.Benchmark)
class A2_Exact_Match_Operator_Bench {

    private static final Random random = new Random()

    private static final List&lt;String&gt; data = [
            "1605-FACD-0000-EXIT",
            "1606-FACD-0000-EXIT",
            "1607-FACD-0000-EXIT",
            "1608-FACD-0000-EXIT",
            "1609-FACD-0000-EXIT",
            "1610-FACD-0000-EXIT",
            "1611-FACD-0000-EXIT",
            "1611-FACD-0001-EXIT",
            "1611-FACD-0002-EXIT",
            "1611-FACD-0003-EXIT",
            "1612-FACD-0000-EXIT"
    ]

    private static final Pattern pattern = ~/^\d{4}-[A-Z]{4}-0000-EXIT$/

    private static final String getInput() {
        return data.get(random.nextInt(data.size()))
    }

    @Benchmark
    boolean match_operator_dynamic() {
        return input ==~ pattern
    }

    @Benchmark
    @CompileStatic
    boolean match_operator_static() {
        return input ==~ pattern
    }

    @Benchmark
    boolean matcher_matches_dynamic() {
        final Matcher matcher = pattern.matcher(input)

        return matcher.matches()
    }

    @Benchmark
    @CompileStatic
    boolean matcher_matches_static() {
        final Matcher matcher = pattern.matcher(input)

        return matcher.matches()
    }
}</code></pre></div></div><div class="paragraph"><p>And here are the results.</p></div><div class="sect3"><h4 id="groovy-2-5-11-indy-and-openjdk-1-8-0_242-2">Groovy 2.5.11-indy and OpenJDK 1.8.0_242</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A2_Exact_Match_Operator_Bench.match_operator_dynamic      avgt   60  0,243 ± 0,003  us/op
A2_Exact_Match_Operator_Bench.match_operator_static       avgt   60  0,220 ± 0,005  us/op
A2_Exact_Match_Operator_Bench.matcher_matches_dynamic     avgt   60  0,162 ± 0,003  us/op
A2_Exact_Match_Operator_Bench.matcher_matches_static      avgt   60  0,147 ± 0,003  us/op</code></pre></div></div></div><div class="sect3"><h4 id="groovy-2-5-11-indy-and-openjdk-11-0-6-2">Groovy 2.5.11-indy and OpenJDK 11.0.6</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A2_Exact_Match_Operator_Bench.match_operator_dynamic      avgt   60  0,262 ± 0,004  us/op
A2_Exact_Match_Operator_Bench.match_operator_static       avgt   60  0,285 ± 0,004  us/op
A2_Exact_Match_Operator_Bench.matcher_matches_dynamic     avgt   60  0,243 ± 0,004  us/op
A2_Exact_Match_Operator_Bench.matcher_matches_static      avgt   60  0,162 ± 0,004  us/op</code></pre></div></div></div><div class="sect3"><h4 id="groovy-3-0-3-indy-and-openjdk-1-8-0_242-2">Groovy 3.0.3-indy and OpenJDK 1.8.0_242</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A2_Exact_Match_Operator_Bench.match_operator_dynamic      avgt   60  0,237 ± 0,004  us/op
A2_Exact_Match_Operator_Bench.match_operator_static       avgt   60  0,227 ± 0,003  us/op
A2_Exact_Match_Operator_Bench.matcher_matches_dynamic     avgt   60  0,176 ± 0,004  us/op
A2_Exact_Match_Operator_Bench.matcher_matches_static      avgt   60  0,145 ± 0,003  us/op</code></pre></div></div></div><div class="sect3"><h4 id="groovy-3-0-3-indy-and-openjdk-11-0-6-2">Groovy 3.0.3-indy and OpenJDK 11.0.6</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A2_Exact_Match_Operator_Bench.match_operator_dynamic      avgt   60  0,310 ± 0,008  us/op
A2_Exact_Match_Operator_Bench.match_operator_static       avgt   60  0,280 ± 0,001  us/op
A2_Exact_Match_Operator_Bench.matcher_matches_dynamic     avgt   60  0,229 ± 0,005  us/op
A2_Exact_Match_Operator_Bench.matcher_matches_static      avgt   60  0,212 ± 0,004  us/op</code></pre></div></div><div class="paragraph"><p>And here is the chart.</p></div><div class="openblock text-center"><div class="content"><div class="imageblock img-responsive img-thumbnail"><div class="content"><a class="image" href="/images/groovy-regexp-chart-02.png"><div class="img-lazyload-container" style="width:1012px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/groovy-regexp-chart-02.png" height="371" width="1012" style="padding-top:36.6600790513834%"></div></a></div></div></div></div><div class="paragraph"><p>Thoughts?</p></div><div class="ulist"><ul><li><p>No significant differences. It looks like OpenJDK 11.0.6 generally did a bit slower, but the difference is not significant.</p></li></ul></div></div></div><div class="sect2"><h3 id="benchmark-3-replacefirst-with-regular-expression">Benchmark 3: <code>replaceFirst</code> with regular expression</h3><div class="paragraph"><p>And here is the final benchmark. This time we will check how <code>String.replaceFirst()</code> with pattern and closure performs compared to a conventional approach. We can expect to see some differences between both alternatives. The <code>replaceFirst()</code> variant has to generate a closure in memory, so it comes with some tiny overhead. Let&#8217;s see if it is significant or not.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">package bench

import groovy.transform.CompileStatic
import org.openjdk.jmh.annotations.Benchmark
import org.openjdk.jmh.annotations.Scope
import org.openjdk.jmh.annotations.State

import java.util.regex.Matcher
import java.util.regex.Pattern

@State(Scope.Benchmark)
class A3_Regexp_Replace_Bench {

    private static final Random random = new Random()

    private static final List&lt;String&gt; data = [
            "v3.4.23",
            "v3.4.24",
            "v3.4.25",
            "v3.4.26",
            "v3.5.0",
            "v3.5.1",
            "v3.5.2",
            "v3.5.3",
            "v3.5.4",
            "v3.5.5",
            "v4.0.0",
            "v4.0.1",
            "v4.0.2",
            "v4.0.3",
            "v4.0.4",
            "v4.1.0",
            "v4.1.1",
            "v4.1.2",
            "v4.1.3"
    ]

    private static final Pattern pattern = ~/^v(\d{1,3})\.(\d{1,3})\.\d{1,4}$/

    private static String getVersion() {
        return data.get(random.nextInt(data.size()))
    }

    @Benchmark
    String string_replace_first_dynamic() {
        return version.replaceFirst(pattern) { _,major,minor -&gt; "v${major}.${(minor as int) + 1}.0"}
    }

    @Benchmark
    @CompileStatic
    String string_replace_first_static() {
        return version.replaceFirst(pattern) { _,major,minor -&gt; "v${major}.${(minor as int) + 1}.0"}
    }

    @Benchmark
    String matcher_matches_use_case_dynamic() {
        final Matcher matcher = pattern.matcher(version)
        if (!matcher.matches()) {
            throw new IllegalStateException("Pattern didn't match!")
        }

        def major = matcher.group(1)
        def minor = matcher.group(2)

        return "v${major}.${(minor as int) + 1}.0".toString()
    }

    @Benchmark
    @CompileStatic
    String matcher_matches_use_case_static() {
        final Matcher matcher = pattern.matcher(version)
        if (!matcher.matches()) {
            throw new IllegalStateException("Pattern didn't match!")
        }

        def major = matcher.group(1)
        def minor = matcher.group(2)

        return "v${major}.${(minor as int) + 1}.0".toString()
    }
}</code></pre></div></div><div class="paragraph"><p>Here are the results.</p></div><div class="sect3"><h4 id="groovy-2-5-11-indy-and-openjdk-1-8-0_242-3">Groovy 2.5.11-indy and OpenJDK 1.8.0_242</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A3_Regexp_Replace_Bench.matcher_matches_use_case_dynamic  avgt   60  0,570 ± 0,009  us/op
A3_Regexp_Replace_Bench.matcher_matches_use_case_static   avgt   60  0,488 ± 0,008  us/op
A3_Regexp_Replace_Bench.string_replace_first_dynamic      avgt   60  0,873 ± 0,014  us/op
A3_Regexp_Replace_Bench.string_replace_first_static       avgt   60  0,832 ± 0,013  us/op</code></pre></div></div></div><div class="sect3"><h4 id="groovy-2-5-11-indy-and-openjdk-11-0-6-3">Groovy 2.5.11-indy and OpenJDK 11.0.6</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A3_Regexp_Replace_Bench.matcher_matches_use_case_dynamic  avgt   60  0,579 ± 0,015  us/op
A3_Regexp_Replace_Bench.matcher_matches_use_case_static   avgt   60  0,543 ± 0,002  us/op
A3_Regexp_Replace_Bench.string_replace_first_dynamic      avgt   60  1,034 ± 0,034  us/op
A3_Regexp_Replace_Bench.string_replace_first_static       avgt   60  0,970 ± 0,023  us/op</code></pre></div></div></div><div class="sect3"><h4 id="groovy-3-0-3-indy-and-openjdk-1-8-0_242-3">Groovy 3.0.3-indy and OpenJDK 1.8.0_242</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A3_Regexp_Replace_Bench.matcher_matches_use_case_dynamic  avgt   60  0,574 ± 0,011  us/op
A3_Regexp_Replace_Bench.matcher_matches_use_case_static   avgt   60  0,516 ± 0,008  us/op
A3_Regexp_Replace_Bench.string_replace_first_dynamic      avgt   60  0,925 ± 0,016  us/op
A3_Regexp_Replace_Bench.string_replace_first_static       avgt   60  0,878 ± 0,015  us/op</code></pre></div></div></div><div class="sect3"><h4 id="groovy-3-0-3-indy-and-openjdk-11-0-6-3">Groovy 3.0.3-indy and OpenJDK 11.0.6</h4><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">Benchmark                                                 Mode  Cnt  Score   Error  Units
A3_Regexp_Replace_Bench.matcher_matches_use_case_dynamic  avgt   60  0,609 ± 0,013  us/op
A3_Regexp_Replace_Bench.matcher_matches_use_case_static   avgt   60  0,552 ± 0,013  us/op
A3_Regexp_Replace_Bench.string_replace_first_dynamic      avgt   60  1,014 ± 0,028  us/op
A3_Regexp_Replace_Bench.string_replace_first_static       avgt   60  0,945 ± 0,026  us/op</code></pre></div></div><div class="paragraph"><p>And here is the last chart.</p></div><div class="openblock text-center"><div class="content"><div class="imageblock img-responsive img-thumbnail"><div class="content"><a class="image" href="/images/groovy-regexp-chart-03.png"><div class="img-lazyload-container" style="width:1012px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/groovy-regexp-chart-03.png" height="371" width="1012" style="padding-top:36.6600790513834%"></div></a></div></div></div></div><div class="paragraph"><p>Thoughts?</p></div><div class="ulist"><ul><li><p>The variant with <code>String.replaceFirst()</code> performs "slower" as expected.</p></li><li><p>Does it make a huge difference? I wouldn&#8217;t say so. In the worst-case scenario, using <code>String.replaceFirst()</code> with a closure like the one shown in the test will need <code>0.001 ms</code> instead of <code>0.0005 ms</code> to finish execution.</p></li></ul></div></div></div><div class="sect2"><h3 id="conclusion">Conclusion</h3><div class="paragraph"><p>I hope those benchmarks have shown you that there are some small differences between the different variants. Still, they are not something you should be worried about. Measuring application performance is not trivial, and in most cases, real bottlenecks exist in entirely different areas. I can tell you from my experience that one of the first places worth checking when tweaking application&#8217;s performance is its I/O layer. I&#8217;ve seen countless times inefficient queries to the database, or threads blocked for nothing, and those are the real issues.</p></div><div class="row"><div class="col-12"><div id="newsletter-01"></div><script>function load_newsletter(e){var t=document.getElementById("newsletter-01");if(document.contains(t)){var n=t.parentElement;t.remove();var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://tremendous-motivator-1432.ck.page/"+e+"/index.js",o.setAttribute("data-uid",e),n.appendChild(o)}}window.addEventListener("scroll",function(e){var t=document.scrollingElement.scrollTop,n=document.getElementById("newsletter-01");document.contains(n)&&t>n.offsetTop-500&&load_newsletter("5e86560171")})</script></div></div><h2 id="thank-you" class="discrete">Thank you!</h2><div class="paragraph"><p>If you read up to this point - leave me a comment below, so I can <strong>thank you</strong> in person for such an engagement. You can also share this blog post on <span class="icon color-twitter"><i class="fa fa-twitter"></i></span> <a href="https://twitter.com/intent/tweet?text=%22Groovy%20Regular%20Expressions%20-%20The%20Definitive%20Guide%22%20https://e.printstacktrace.blog/groovy-regular-expressions-the-definitive-guide/%20via%20@wololock" target="_blank" rel="noopener">Twitter</a>, <span class="icon color-facebook"><i class="fa fa-facebook-square"></i></span> <a href="https://www.facebook.com/sharer/sharer.php?u=https://e.printstacktrace.blog/groovy-regular-expressions-the-definitive-guide/&t=Groovy%20Regular%20Expressions%20-%20The%20Definitive%20Guide" target="_blank" rel="noopener">Facebook</a>, or <span class="icon color-linkedin"><i class="fa fa-linkedin-square"></i></span> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://e.printstacktrace.blog/groovy-regular-expressions-the-definitive-guide/&title=Groovy%20Regular%20Expressions%20-%20The%20Definitive%20Guide" target="_blank" rel="noopener">LinkedIn</a> if you think other people can benefit from reading it. Thanks in advance!</p></div><div class="paragraph"><p>PS: Creating high-quality content takes a lot of time and effort. I want to deliver the best possible value to my readers and keep the blog always <strong>ad-free</strong>. If you have two more minutes, please take a look at this dedicated page where I listed a few different options to <a href="https://e.printstacktrace.blog/support-me" class="ga-track">support my efforts</a>. If my vision for the <em>e.printstacktrace.blog</em> development resonates with you, I will be grateful if you consider supporting me in this journey. <strong>Thank you! <span class="icon color-red"><i class="fa fa-heart"></i></span></strong></p></div></div></div></div><footer class="post-footer"><img class="img-responsive img-circle" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200"><div class="row author"><div class="col-lg-8 col-lg-offset-2 col-xs-10 col-xs-offset-1"><h4>Szymon Stepniak</h4><p><a class="stack-overflow" href="https://stackoverflow.com/users/2194470/szymon-stepniak?tab=profile" target="_blank" rel="noopener"><img class="so-icon" src="/img/so.png"><b class="rep">27,343</b><span class="badges"><span class="gold"><span class="b">●</span><span class="c">9</span></span><span class="silver"><span class="b">●</span><span class="c">61</span></span><span class="bronze"><span class="b">●</span><span class="c">94</span></span></span></a></p><p>Groovista, Upwork's Top Rated freelancer, Toruń Java User Group founder, open&nbsp;source contributor, Stack Overflow addict, bedroom guitar player. I walk through e.printStackTrace() so you don't have to.</p><ul class="social-links"><li><a href="https://feeds.feedburner.com/Eprintstacktracenet" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-rss"></span></a></li><li><a href="https://twitter.com/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-twitter"></span></a></li><li><a href="https://github.com/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-github"></span></a></li><li><a href="https://stackoverflow.com/users/2194470/szymon-stepniak?tab=profile" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-stack-overflow"></span></a></li><li><a href="https://www.youtube.com/c/eprintstacktrace" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-youtube"></span></a></li><li><a href="mailto:szymon.stepniak@gmail.com" onclick="return window.open(this.href),!1"><span class="fa fa-envelope"></span></a></li><li><a href="https://www.linkedin.com/in/szymon-stępniak-9a0b1630" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-linkedin"></span></a></li><li><a href="https://keybase.io/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-user-secret"></span></a></li></ul></div></div></footer><section class="related-posts"><h2>You may also like</h2><div class="row"><div class="col-lg-4"><a href="/what-is-the-most-efficient-way-to-iterate-collection-in-groovy-jmh/"><img class="img-responsive" src="/images/og/groovy-jmh-benchmark.jpg"><h3>What is the most efficient way to iterate collection in Groovy? Let's play with JMH!</h3></a><p>I guess you may heard about Groovy&#8217;s Collection.each(Closure cl) method - it was introduced 15 years ago [1] and it was a great alternative for a good old for-loop, for-each or even using an ...</p></div><div class="col-lg-4"><a href="/quicksort-in-groovy-can-it-be-as-fast-as-implemented-in-java/"><img class="img-responsive" src="/images/og/groovy-quicksort.jpg"><h3>Quicksort in Groovy - can it be as fast as implemented in Java?</h3></a><p>I started reading &quot;Cracking the Coding Interview, 6th Edition&quot; book recently and it inspired me to experiment a bit. It&#8217;s been a while since I implemented the quicksort algorithm th...</p></div><div class="col-lg-4"><a href="/groovy-trampoline-closure-a-step-into-recursive-closures/"><img class="img-responsive" src="/images/og/groovy-trampoline-closure.jpg"><h3>Groovy Trampoline Closure - a step into recursive closures</h3></a><p>A few weeks ago an interesting question was asked on the StackOverflow. Someone experimented with a recursion in Groovy and stepped into Closure.trampoline() [1]. It quickly turned out that using T...</p></div></div></section></article><nav class="pagination" role="pagination"><a class="pull-left btn" href="/installing-graalvm-ee-1-0-0-rc14-with-sdkman/">← Next post</a><a class="pull-right btn" href="/intellij-idea-git-gpg-failed-to-sign-the-data/">Previous post →</a></nav><div class="disqus-comments"><div class="comments"><div id="disqus_thread"><div id="disqus_empty" style="display:none">Empty</div></div></div></div><script>function load_disqus(e){var t=document.getElementById("disqus_empty");if(document.contains(t)){var d=document.getElementById("disqus_thread"),n=document.createElement("script"),s=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];d&&t&&(t.remove(),n.type="text/javascript",n.async=!0,n.src="//"+e+".disqus.com/embed.js",s.appendChild(n))}}window.addEventListener("scroll",function(e){document.scrollingElement.scrollTop>document.getElementById("disqus_thread").offsetTop-500&&load_disqus("eprintstacktrace")},!1)</script></div></div></div><script async id="dsq-count-scr" src="//eprintstacktrace.disqus.com/count.js"></script><footer class="site-footer"><div class="container-fluid"><div class="row"><div class="col-lg-10 col-lg-offset-1 col-xs-10 col-xs-offset-1"><div class="row"><div class="col-lg-4"><h4 class="marked">Recent video on YouTube</h4><section class="recent-posts"><a href="https://www.youtube.com/watch?v=vJgcsyLJf0g" target="_blank" rel="noopener"><img class="img-thumbnail img-noborder" src="https://i3.ytimg.com/vi/vJgcsyLJf0g/mqdefault.jpg" alt="Brainf**k interpreter in Groovy (tail recursive implementation) | #groovylang"></a></section><h4>e.printstacktrace.blog © 2020</h4><p><em>"I walk through e.printStackTrace() so you don't have to"</em></p></div><div class="col-lg-4"><h4 class="marked">Recent articles</h4><section class="recent-posts"><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/parsing-json-from-curl-with-jq-basic-filters-and-functions-part-1/">Parsing JSON from curl with jq: basic filters and functions (part 1)</a></li><li class="post-list-item"><a class="post-list-link" href="/how-to-time-out-jenkins-pipeline-stage-and-keep-the-pipeline-running/">How to time out Jenkins Pipeline stage and keep the pipeline running?</a></li><li class="post-list-item"><a class="post-list-link" href="/my-first-200-youtube-subscribers-thank-you/">My first 200 YouTube subscribers - Thank You!</a></li><li class="post-list-item"><a class="post-list-link" href="/groovy-dynamic-maps-generic-type-erasure-and-raw-types/">Groovy dynamic Maps, generic type erasure, and raw types - an interesting use case to learn from</a></li><li class="post-list-item"><a class="post-list-link" href="/groovy-3-nullcheck-annotation-less-code-and-less-npe/">Groovy 3 @NullCheck annotation - less code and less NPE</a></li><li class="post-list-item"><a class="post-list-link" href="/groovy-3-string-gdk-improvements-takeright-takebetween-and-a-few-others/">Groovy 3 String GDK improvements - takeRight, takeBetween, and a few others</a></li></ul></section></div><div class="col-lg-4"><h4 class="marked">Stay connected</h4><div class="social-links"><ul><li><a href="https://feeds.feedburner.com/Eprintstacktracenet" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-rss"></span></a></li><li><a href="https://twitter.com/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-twitter"></span></a></li><li><a href="https://github.com/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-github"></span></a></li><li><a href="https://stackoverflow.com/users/2194470/szymon-stepniak?tab=profile" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-stack-overflow"></span></a></li><li><a href="https://www.youtube.com/c/eprintstacktrace" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-youtube"></span></a></li><li><a href="mailto:szymon.stepniak@gmail.com" onclick="return window.open(this.href),!1"><span class="fa fa-envelope"></span></a></li><li><a href="https://www.linkedin.com/in/szymon-stępniak-9a0b1630" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-linkedin"></span></a></li><li><a href="https://keybase.io/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-user-secret"></span></a></li></ul></div><h4 class="marked">Most popular tags</h4><section class="tagcloud"><a href="/t/affiliate/" style="font-size:12pt;color:#777">affiliate</a> <a href="/t/async/" style="font-size:8pt;color:#6a6a6a">async</a> <a href="/t/benchmark/" style="font-size:12pt;color:#777">benchmark</a> <a href="/t/book/" style="font-size:16pt;color:#858585">book</a> <a href="/t/cicd/" style="font-size:24pt;color:#9f9f9f">cicd</a> <a href="/t/devops/" style="font-size:16pt;color:#858585">devops</a> <a href="/t/docker/" style="font-size:12pt;color:#777">docker</a> <a href="/t/github/" style="font-size:8pt;color:#6a6a6a">github</a> <a href="/t/graalvm/" style="font-size:24pt;color:#9f9f9f">graalvm</a> <a href="/t/groovy/" style="font-size:32pt;color:#bababa">groovy</a> <a href="/t/java/" style="font-size:28pt;color:#adadad">java</a> <a href="/t/jenkins/" style="font-size:20pt;color:#929292">jenkins</a> <a href="/t/jenkins-pipeline/" style="font-size:20pt;color:#929292">jenkins-pipeline</a> <a href="/t/jmh/" style="font-size:16pt;color:#858585">jmh</a> <a href="/t/junit/" style="font-size:8pt;color:#6a6a6a">junit</a> <a href="/t/micronaut/" style="font-size:12pt;color:#777">micronaut</a> <a href="/t/native-image/" style="font-size:12pt;color:#777">native-image</a> <a href="/t/non-blocking/" style="font-size:12pt;color:#777">non-blocking</a> <a href="/t/ratpack/" style="font-size:24pt;color:#9f9f9f">ratpack</a> <a href="/t/review/" style="font-size:16pt;color:#858585">review</a> <a href="/t/rxjava/" style="font-size:8pt;color:#6a6a6a">rxjava</a> <a href="/t/sdkman/" style="font-size:12pt;color:#777">sdkman</a> <a href="/t/spock/" style="font-size:12pt;color:#777">spock</a> <a href="/t/string/" style="font-size:8pt;color:#6a6a6a">string</a> <a href="/t/unit-test/" style="font-size:12pt;color:#777">unit-test</a></section></div></div></div></div><div class="row"><div class="col-lg-10 col-lg-offset-1 col-xs-10 col-xs-offset-1 text-center"><ul class="footer-links"><li><a href="/privacy-policy/">Privacy policy</a></li><li><a href="/support-me/">Support me</a></li><li><a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener"><img src="https://badgen.net/badge/license/CC%20BY-NC-SA%204.0/gray"></a></li><li><a href="https://github.com/wololock/wololock.github.io/commits/develop" target="_blank" rel="noopener"><img src="https://badgen.net/github/last-commit/wololock/wololock.github.io?color=blue"></a></li></ul></div></div></div><section class="poweredby"><ul class="text-center"><li><span>Published with </span><a href="https://hexo.io" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><img src="/img/logo-hexo.png"></a></li><li><span>Hosted on </span><a href="https://github.com/wololock/wololock.github.io" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><img src="/img/logo-github.png"></a></li><li><span>Deployed with </span><a href="https://circleci.com/gh/wololock/wololock.github.io" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><img src="/img/logo-circleci.png"></a></li></ul></section></footer><script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script><script async id="cookiebanner" src="//cdnjs.cloudflare.com/ajax/libs/cookie-banner/1.2.2/cookiebanner.min.js" data-moreinfo="/privacy-policy/" data-message="This blog uses cookies to enhance your experience. By continuing to visit it you agree to its use of cookies." data-link="#ffad33" data-font-family="Lora,serif" data-font-size="1.6rem" data-bg="#444"></script><script src="/js/main.js?v=5"></script><script src="/js/highlight.pack.js?v=9.18.1"></script><script>hljs.initHighlightingOnLoad()</script><script>"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname&&(!function(a,e,t,n,o,c,i){a.GoogleAnalyticsObject=o,a.ga=a.ga||function(){(a.ga.q=a.ga.q||[]).push(arguments)},a.ga.l=1*new Date,c=e.createElement(t),i=e.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-42400890-5","auto"),ga("send","pageview"),jQuery("a.ga-track").click(function(a){var e=jQuery(a.target).text();return ga("send","event","affiliate","click",e),!0}))</script><div id="amzn-assoc-ad-43b3fa6d-ffc7-44a2-84ce-6364ef258da9"><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=43b3fa6d-ffc7-44a2-84ce-6364ef258da9"></script></div><script>!function(){"use strict";function r(e){var t=e.getAttribute("data-original"),n=new Image;n.onload=function(){e.setAttribute("src",t),e.style.paddingTop=""},n.src=t}document.addEventListener("DOMContentLoaded",function(){var t,e,n,i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));i.length&&("undefined"!=typeof IntersectionObserver?(t=new IntersectionObserver(function(e,t){e.filter(function(e){return e.isIntersecting}).forEach(function(e){r(e.target),t.unobserve(e.target)})}),i.forEach(function(e){t.observe(e)})):(n=function(){clearTimeout(e),e=setTimeout(function(){if(!(i=i.filter(function(e){return!e.src})).length)return window.removeEventListener("scroll",n),void window.removeEventListener("resize",n);i.filter(function(e){e.getBoundingClientRect().top<window.innerHeight&&r(e)})},100)},window.addEventListener("scroll",n),window.addEventListener("resize",n),n()))},!1)}();</script></body></html>