<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="robots" content="all"><title>Non-blocking and async Micronaut - quick start (part 3)</title><meta name="keywords" content="java,micronaut,non-blocking,async,reactive-programming,rxjava"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//stackpath.bootstrapcdn.com"><link rel="shortcut icon" type="image/png" href="/favicon_new.png"><link rel="canonical" href="https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:wght@400;500;700|Poppins:300,400,400i,700|Montserrat:400,600,700|Roboto:300,400,400i,700|Lora:400,400i,700,700i&amp;display=swap"><link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/highlight.css"><meta name="description" content="Welcome to the part 3 of &quot;Non-blocking and async Micronaut&quot; article. In the previous post we have created connection between two services using HTTP protocol and we have run some experiments with han"><meta property="og:type" content="article"><meta property="og:title" content="Non-blocking and async Micronaut - quick start (part 3)"><meta property="og:url" content="https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/"><meta property="og:site_name" content="e.printstacktrace.blog - I help you become a better software developer."><meta property="og:description" content="Welcome to the part 3 of &quot;Non-blocking and async Micronaut&quot; article. In the previous post we have created connection between two services using HTTP protocol and we have run some experiments with han"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://e.printstacktrace.blog/images/cards/18.png"><meta property="article:published_time" content="2018-10-30T09:53:18.000Z"><meta property="article:modified_time" content="2018-10-30T09:53:18.000Z"><meta property="article:author" content="Szymon Stepniak"><meta property="article:tag" content="java"><meta property="article:tag" content="micronaut"><meta property="article:tag" content="non-blocking"><meta property="article:tag" content="async"><meta property="article:tag" content="reactive-programming"><meta property="article:tag" content="rxjava"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://e.printstacktrace.blog/images/cards/18.png"><meta name="twitter:creator" content="@wololock"><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":["Person","Organization"],"@id":"https://e.printstacktrace.blog/#/schema/person/wololock","name":"Szymon Stepniak","description":"I help you become a better software developer.","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/#avatar","inLanguage":"en-US","url":"https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200","caption":"Szymon Stepniak"},"logo":{"@id":"https://e.printstacktrace.blog/#avatar"},"sameAs":["https://twitter.com/wololock","https://github.com/wololock","https://stackoverflow.com/users/2194470/szymon-stepniak","https://www.youtube.com/c/eprintstacktrace"]},{"@type":"WebSite","@id":"https://e.printstacktrace.blog/#website","url":"https://e.printstacktrace.blog","name":"e.printstacktrace.blog - I help you become a better software developer.","description":"Blog about programming, created by Upwork's Top Rated freelancer, 10+ years experienced Java/Groovy developer. Contact me if you are looking for an experienced and high quality consultant."},{"@type":"WebPage","@id":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/#webpage","url":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/","name":"Non-blocking and async Micronaut - quick start (part 3)","isPartOf":{"@id":"https://e.printstacktrace.blog/#website"},"datePublished":"2018-10-30T09:53:18.000Z","dateModified":"2018-10-30T09:53:18.000Z","description":"\nWelcome to the part 3 of \"Non-blocking and async Micronaut\" article. In the previous post\nwe have created connection between two services using HTTP protocol and we have run some experiments with handling\n10,000 requests. Today we are going to extend this example by setting some timeouts to see what happens.\n","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/"]}]},{"@type":"Article","@id":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/#article","isPartOf":{"@id":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/#webpage"},"author":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"headline":"Non-blocking and async Micronaut - quick start (part 3)","datePublished":"2018-10-30T09:53:18.000Z","dateModified":"2018-10-30T09:53:18.000Z","mainEntityOfPage":{"@id":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/#webpage"},"publisher":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"keywords":"java,micronaut,non-blocking,async,reactive-programming,rxjava","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/#primaryimage","url":"https://e.printstacktrace.blog/images/cards/18.png","inLanguage":"en-US","caption":"Non-blocking and async Micronaut - quick start (part 3)"},"inLanguage":"en-US"},{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://e.printstacktrace.blog"},{"@type":"ListItem","position":2,"name":"Micronaut Cookbook","item":"https://e.printstacktrace.blog/micronaut-cookbook/"},{"@type":"ListItem","position":3,"name":"Non-blocking and async Micronaut - quick start (part 3)"}]}]}</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="e.printstacktrace.blog - I help you become a better software developer." type="application/atom+xml">
<style>.img-lazyload-container{overflow:hidden;max-width:100%}.img-lazyload-container img{max-width:100%;display:block;height:auto;transition:opacity .5s ease-in-out}.img-lazyload-container img:not([src]){height:0;opacity:0}</style></head><body><header class="fixed-top" id="header"><div class="container"><nav class="navbar navbar-light mx-0 px-0 justify-content-start"><a href="/">Home</a><a href="/about">About</a><a href="/archives">Archives</a><a href="/resources">Tools & Resources</a><a href="/support-me">Support me</a></nav></div></header><main id="main"><section class="sidebar-enabled" id="content"><div class="container"><div class="row"><div class="col-lg-3 bg-primary sidebar pt-5 d-flex align-items-start flex-column order-1 pr-lg-0"><div class="mb-auto"><div class="text-center pt-lg-5 pl-3"><a href="/about"><img class="rounded-circle mb-4" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200" height="96"></a><h5>Hi! 👋 I'm Szymon</h5><p class="small">I help you become a better software developer.</p></div><div class="my-4 pl-2 text-lg-right text-center"><ul class="social-media"><li><a class="gatr" target="_blank" rel="noopener" href="https://twitter.com/wololock" data-type="social-media" data-name="Twitter" title="Twitter"><i class="fa fa-twitter"></i><span class="number">1.12k</span><span class="description">Followers</span></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://www.youtube.com/eprintstacktrace" data-type="social-media" data-name="YouTube" title="YouTube"><i class="fa fa-youtube"></i><span class="number">1.96k</span><span class="description">Subscribers</span></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://github.com/wololock" data-type="social-media" data-name="Github" title="Github"><i class="fa fa-github"></i><span class="number">97</span><span class="description">Followers</span></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://stackoverflow.com/users/2194470/szymon-stepniak" data-type="social-media" data-name="StackOverflow" title="StackOverflow"><i class="fa fa-stack-overflow"></i><span class="number">29.4k</span><span class="description">Reputation</span></a></li></ul></div><div class="pl-4 mt-lg-5 pt-lg-5"><h4 class="h4 pt-4 mb-4 sans-serif">Latest posts from the <span class="h3 font-weight-bold">Micronaut Cookbook</span></h4><div class="media align-items-center pb-1 mb-3"><a class="d-block" href="#"><img class="rounded" src="/images/icons/8.png" width="64"></a><div class="media-body pl-2 ml-1"><h5 class="m-0 small" style="font-size:14px;font-weight:600;line-height:22px"><a class="sans-serif" href="/building-stackoverflow-cli-with-java-11-micronaut-picocli-and-graalvm/">Building stackoverflow-cli with Java 11, Micronaut, Picocli, ...</a></h5></div></div><div class="media align-items-center pb-1 mb-3"><a class="d-block" href="#"><img class="rounded" src="/images/icons/36.png" width="64"></a><div class="media-body pl-2 ml-1"><h5 class="m-0 small" style="font-size:14px;font-weight:600;line-height:22px"><a class="sans-serif" href="/micronaut-non-blocking-and-async-part-3/">Non-blocking and async Micronaut - quick start (part 3)</a></h5></div></div><div class="media align-items-center pb-1 mb-3"><a class="d-block" href="#"><img class="rounded" src="/images/icons/36.png" width="64"></a><div class="media-body pl-2 ml-1"><h5 class="m-0 small" style="font-size:14px;font-weight:600;line-height:22px"><a class="sans-serif" href="/micronaut-non-blocking-and-async-part-2/">Non-blocking and async Micronaut - quick start (part 2)</a></h5></div></div><div class="media align-items-center pb-1 mb-3"><a class="d-block" href="#"><img class="rounded" src="/images/icons/36.png" width="64"></a><div class="media-body pl-2 ml-1"><h5 class="m-0 small" style="font-size:14px;font-weight:600;line-height:22px"><a class="sans-serif" href="/micronaut-non-blocking-and-async-part1/">Non-blocking and async Micronaut - quick start (part 1)</a></h5></div></div></div><div class="mb-5 pt-5 text-center"><a class="gatr" target="_blank" rel="noopener" href="https://click.linksynergy.com/fs-bin/click?id=uow2LCEuhvQ&amp;offerid=572706.11&amp;type=3&amp;subid=0" data-type="banner" data-name="nordvpn-02" data-debug="Displayed nordvpn-02 banner"><img class="img-fluid" data-lazy="/images/yml/nord-vpn-02.png"></a></div></div><div class="spread-the-love pt-4 mt-lg-5"><div class="mb-lg-5 pb-5 pl-lg-4"><h3 class="mb-3">Don't miss anything - join my newsletter</h3><p class="text-justify">Usu tantas omittantur ut, per te modo appetere senserit. Ei ius aperiam tincidunt, ea sit natum iisque repudiandae. Ea nec wisi facete. Ex hinc rebum omittam his.</p><div id="ck-5bc70426c4-box"></div><script>function load_newsletter(e){var t=document.getElementById("ck-5bc70426c4-box");if(document.contains(t)){var n=t.parentElement;t.remove();var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://tremendous-motivator-1432.ck.page/"+e+"/index.js",o.setAttribute("data-uid",e),n.appendChild(o),console.log("Convertkit "+e+" loaded.")}}window.addEventListener("scroll",function(e){var t=document.scrollingElement.scrollTop,n=document.getElementById("ck-5bc70426c4-box");document.contains(n)&&t>n.getBoundingClientRect().top- -500&&load_newsletter("5bc70426c4")})</script></div><div class="pl-lg-3 text-lg-left text-center"><p class="m-0 serif">Did you like this article?</p><h5 class="text-uppercase">Spread the <i class="fa fa-heart"></i>!</h5><ul class="mb-5"><li><a class="gatr" target="_blank" rel="noopener" href="https://twitter.com/intent/tweet?text=Non-blocking and async Micronaut - quick start (part 3) https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/ via @wololock" data-type="share" data-name="Shared on Twitter"><i class="fa fa-twitter"></i></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://www.linkedin.com/shareArticle?url=https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/" data-type="share" data-name="Shared on LinkedIn"><i class="fa fa-linkedin"></i></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://www.facebook.com/sharer.php?u=https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/" data-type="share" data-name="Shared on Facebook"><i class="fa fa-facebook-square"></i></a></li><li><a class="gatr" target="_blank" rel="noopener" href="http://www.reddit.com/submit?url=https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/&amp;title=Non-blocking and async Micronaut - quick start (part 3)" data-type="share" data-name="Shared on Reddit"><i class="fa fa-reddit"></i></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/button/?url=https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/&amp;media=https://e.printstacktrace.blog/images/cards/18.png&amp;description=Non-blocking and async Micronaut - quick start (part 3)" data-type="share" data-name="Shared on Pinterest"><i class="fa fa-pinterest"></i></a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://ko-fi.com/eprintstacktrace" data-type="share" data-name="Clicked on Ko-Fi">☕️</a></li></ul></div></div></div><div class="col-lg-9 py-5 order-0"><div class="pr-lg-4 px-1 pt-lg-5"><nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="/">e.printstacktrace.blog</a></li><li class="breadcrumb-item"><a href="/micronaut-cookbook/">Micronaut Cookbook</a></li></ol></nav><article class="post-body"><h1>Non-blocking and async Micronaut - quick start (part 3)</h1><div class="post-meta mb-4"><ul><li><time datetime="2018-10-30T09:53:18.000Z">October 30, 2018</time></li><li>9 min. read</li><li><a href="https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/#disqus_thread">0 Comments</a></li></ul></div><div class="content"><div class="paragraph"><p>Welcome to the part 3 of <em>"Non-blocking and async <a target="_blank" rel="noopener" href="http://micronaut.io">Micronaut</a>"</em> article. In the <a href="/micronaut-non-blocking-and-async-part-2/" title="previous post">previous post</a> we have created connection between two services using HTTP protocol and we have run some experiments with handling 10,000 requests. Today we are going to extend this example by setting some timeouts to see what happens.</p></div><a id="more"></a><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">Source code can be found here: <span class="icon"><i class="fa fa-github"></i></span> <a target="_blank" rel="noopener" href="https://github.com/wololock/micronaut-nonblocking-async-demo">wololock/micronaut-nonblocking-async-demo</a></td></tr></table></div><div class="sect1"><h2 id="the-motivation">The motivation</h2><div class="sectionbody"><div class="paragraph"><p>Returning 4 recommendations from our mock recommendations-service takes approximately 1250&nbsp;milliseconds. This is actually a huge amount of time. Let&#8217;s assume that we can&#8217;t do anything to decrease latency on requests to product-service, yet we have to return any result in less than 300&nbsp;milliseconds to make any usage of recommendations-service.</p></div></div></div><div class="sect1"><h2 id="the-solution">The solution</h2><div class="sectionbody"><div class="paragraph"><p>In the previous post we didn&#8217;t introduce any timeouts in the part responsible for communication between services. Let&#8217;s fix it now by adding 250 milliseconds timeout to the client call:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package com.github.wololock.micronaut.recommendation;

import io.micronaut.http.annotation.Controller;
import io.micronaut.http.annotation.Get;
import io.reactivex.Maybe;
import io.reactivex.Observable;
import io.reactivex.Single;
import com.github.wololock.micronaut.products.Product;
import com.github.wololock.micronaut.products.ProductClient;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.Arrays;
import java.util.List;
import java.util.concurrent.TimeUnit;

@Controller("/recommendations")
final class RecommendationController &#123;

    private static final Logger log = LoggerFactory.getLogger(RecommendationController.class);

    private static final List&lt;String&gt; ids = Arrays.asList("PROD-001", "PROD-002", "PROD-003", "PROD-004");

    private final ProductClient productClient;

    public RecommendationController(ProductClient productClient) &#123;
        this.productClient = productClient;
    &#125;

    @Get
    public Single&lt;List&lt;Product&gt;&gt; getRecommendations() &#123;
        log.debug("RecommendationController.getRecommendations() called...");

        return Observable.fromIterable(ids)
                .flatMap(id -&gt; productClient.getProduct(id)
                        .timeout(250, TimeUnit.MILLISECONDS, Maybe.empty()) <i class="conum" data-value="1"></i><b>(1)</b>
                        .toObservable()
                )
                .toList();
    &#125;
&#125;</code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b></td><td>250 milliseconds timeout that returns <code>Maybe.empty()</code> when occurs.</td></tr></table></div><div class="paragraph"><p>We use <code>Maybe.timeout(timeout, unit, fallback)</code> <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> to specify a timeout policy - if client does not return a response in 250 milliseconds we simply drop the connection and return a fallback object. Here is what the request to <code>localhost:8080/recommendations</code> returns now:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="http" class="language-http hljs">HTTP/1.1 200 OK
Date: Tue, 30 Oct 2018 11:18:33 GMT
connection: keep-alive
content-length: 119
content-type: application/json

[
    &#123;
        "id": "PROD-001",
        "name": "Micronaut in Action",
        "price": 29.99
    &#125;,
    &#123;
        "id": "PROD-002",
        "name": "Netty in Action",
        "price": 31.22
    &#125;
]</code></pre></div></div><div class="paragraph"><p>We get only two products in return and this is expected, because only these two have a latency that is smaller than 250 milliseconds.</p></div><div class="paragraph"><p>Let&#8217;s execute 10 concurrent requests using <a target="_blank" rel="noopener" href="https://github.com/JoeDog/siege">siege</a>:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">siege -c 10 -r 1 http://localhost:8080/recommendations</code></pre></div></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="text" class="language-text hljs">** SIEGE 4.0.4
** Preparing 10 concurrent users for battle.
The server is now under siege...
HTTP/1.1 200     0.25 secs:     119 bytes ==&gt; GET  /recommendations
HTTP/1.1 200     0.25 secs:     119 bytes ==&gt; GET  /recommendations
HTTP/1.1 200     0.25 secs:     119 bytes ==&gt; GET  /recommendations
HTTP/1.1 200     0.25 secs:     119 bytes ==&gt; GET  /recommendations
HTTP/1.1 200     0.25 secs:     119 bytes ==&gt; GET  /recommendations
HTTP/1.1 200     0.25 secs:     119 bytes ==&gt; GET  /recommendations
HTTP/1.1 200     0.25 secs:     119 bytes ==&gt; GET  /recommendations
HTTP/1.1 200     0.26 secs:     119 bytes ==&gt; GET  /recommendations
HTTP/1.1 200     0.26 secs:     119 bytes ==&gt; GET  /recommendations
HTTP/1.1 200     0.26 secs:     119 bytes ==&gt; GET  /recommendations

Transactions:		          10 hits
Availability:		      100.00 %
Elapsed time:		        0.26 secs
Data transferred:	        0.00 MB
Response time:		        0.25 secs
Transaction rate:	       38.46 trans/sec
Throughput:		        0.00 MB/sec
Concurrency:		        9.73
Successful transactions:          10
Failed transactions:	           0
Longest transaction:	        0.26
Shortest transaction:	        0.25</code></pre></div></div></div></div><div class="sect1"><h2 id="are-we-done">Are we done?</h2><div class="sectionbody"><div class="paragraph"><p>We might think that everything is fine and we are ready to deploy to production. Before that let&#8217;s run <a target="_blank" rel="noopener" href="https://httpd.apache.org/docs/2.4/programs/ab.html">Apache HTTP Bench</a> just to make sure we are ready to go:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">ab -c 500 -n 2000 http://localhost:8080/recommendations</code></pre></div></div><div class="paragraph"><p>500 concurrent requests, 2,000 in total. The result:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="plain" class="language-plain hljs">Server Software:
Server Hostname:        localhost
Server Port:            8080

Document Path:          /recommendations
Document Length:        119 bytes

Concurrency Level:      500
Time taken for tests:   5.312 seconds
Complete requests:      2000
Failed requests:        1570
   (Connect: 0, Receive: 0, Length: 1570, Exceptions: 0)
Non-2xx responses:      146
Total transferred:      339669 bytes
HTML transferred:       83586 bytes
Requests per second:    376.49 [#/sec] (mean)
Time per request:       1328.058 [ms] (mean)
Time per request:       2.656 [ms] (mean, across all concurrent requests)
Transfer rate:          62.44 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0  544 514.3   1005    1068
Processing:   255  546 200.3    545    1236
Waiting:      251  546 200.3    545    1236
Total:        281 1090 455.2   1290    1772

Percentage of the requests served within a certain time (ms)
  50%   1290
  66%   1400
  75%   1467
  80%   1501
  90%   1652
  95%   1733
  98%   1755
  99%   1764
 100%   1772 (longest request)</code></pre></div></div><div class="paragraph"><p>Apache Bench revealed that we have a huge problem with handling 500 concurrent requests - median 1290 milliseconds when we drop connection after 250 ms timeout is not something we would expect here. It also shows that 1570 from 2000 requests were marked as failed based on the content length - it means that some requests returned a response with two products, some with just a single product, and there were most probably some requests with empty result.</p></div><div class="paragraph"><p>Let&#8217;s run one more experiment, but this time with 200 concurrent requests and let&#8217;s take a look at the result <code>ab</code> produced:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="plain" class="language-plain hljs">Server Software:
Server Hostname:        localhost
Server Port:            8080

Document Path:          /recommendations
Document Length:        119 bytes

Concurrency Level:      200
Time taken for tests:   3.073 seconds
Complete requests:      2000
Failed requests:        280
   (Connect: 0, Receive: 0, Length: 280, Exceptions: 0)
Total transferred:      477760 bytes
HTML transferred:       222040 bytes
Requests per second:    650.91 [#/sec] (mean)
Time per request:       307.261 [ms] (mean)
Time per request:       1.536 [ms] (mean, across all concurrent requests)
Transfer rate:          151.85 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    1   2.3      0      15
Processing:   251  269  20.4    261     349
Waiting:      251  269  20.4    261     349
Total:        251  270  21.1    262     352

Percentage of the requests served within a certain time (ms)
  50%    262
  66%    271
  75%    277
  80%    281
  90%    304
  95%    319
  98%    335
  99%    344
 100%    352 (longest request)</code></pre></div></div><div class="paragraph"><p>A smaller concurrent connections number produced much better result - median 262 ms and only 280 failed requests (based on the content length). Why such a huge difference? Well, we need to be aware of one important thing. Even if we drop client connection after 250 ms timeout, the server is still processing all requests executed to product-service. It means that when server receives 500 concurrent requests to <code>localhost:8080/recommendations</code> it processes 1,000 requests that are never returned back to the client. It total it gives us 4,000 orphan requests, which allocate resources, consume them and return back to the even-loop, but never get back to the caller.</p></div></div></div><div class="sect1"><h2 id="any-solution">Any solution?</h2><div class="sectionbody"><div class="paragraph"><p>There is no simple solution to this kind of problems. It shows the importance of a proper application monitoring. If we only monitor client requests success rate we would notice, that PROD-003 and PROD-004 products never return to the client. Maybe it is a good reason to drop recommending these products? Let&#8217;s see what happens if we recommend only first two products?</p></div><div class="paragraph"><p>For 500 concurrent requests we get:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="plain" class="language-plain hljs">Concurrency Level:      500
Time taken for tests:   1.667 seconds
Complete requests:      2000
Failed requests:        948
   (Connect: 0, Receive: 0, Length: 948, Exceptions: 0)
Total transferred:      403820 bytes
HTML transferred:       149371 bytes
Requests per second:    1200.07 [#/sec] (mean)
Time per request:       416.641 [ms] (mean)
Time per request:       0.833 [ms] (mean, across all concurrent requests)
Transfer rate:          236.63 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    3   5.0      0      19
Processing:   212  328  44.3    320     416
Waiting:      193  328  44.3    320     416
Total:        212  331  44.3    326     416

Percentage of the requests served within a certain time (ms)
  50%    326
  66%    347
  75%    357
  80%    372
  90%    399
  95%    409
  98%    413
  99%    415
 100%    416 (longest request)</code></pre></div></div><div class="paragraph"><p>For 200 concurrent requests we get:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="plain" class="language-plain hljs">Concurrency Level:      200
Time taken for tests:   2.613 seconds
Complete requests:      2000
Failed requests:        0
Total transferred:      494000 bytes
HTML transferred:       238000 bytes
Requests per second:    765.26 [#/sec] (mean)
Time per request:       261.349 [ms] (mean)
Time per request:       1.307 [ms] (mean, across all concurrent requests)
Transfer rate:          184.59 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    1   2.3      0      15
Processing:   191  231  27.9    225     279
Waiting:      191  231  28.0    225     279
Total:        191  231  28.6    225     282

Percentage of the requests served within a certain time (ms)
  50%    225
  66%    252
  75%    262
  80%    265
  90%    270
  95%    274
  98%    279
  99%    280
 100%    282 (longest request)</code></pre></div></div><div class="paragraph"><p>It&#8217;s still far from the best results, however 200 concurrent requests produce almost ideal results. With 500 we still see that application has some difficulties and hits timeouts for PROD-002 in some cases. But this is not a bulletproof benchmark and we are only experimenting to see the order of magnitude.</p></div><div class="paragraph"><p></p><div class="youtube-row py-5"><div class="row"><div class="col-12 col-lg-5 text-lg-left text-center mb-lg-0 mb-4"><a class="thumb gatr d-inline-block" target="_blank" rel="noopener" href="https://youtu.be/Xdcg4Drg1hc" data-time="36:53" data-type="youtube" data-name="Building command-line app with Java 11, Micronaut, Picocli, and GraalVM | #micronaut"><img class="img-fluid shadow" data-lazy="https://i3.ytimg.com/vi/Xdcg4Drg1hc/mqdefault.jpg"></a></div><div class="col-12 col-lg-7"><h5 class="m-0 p-0 mb-3 text-lg-left text-center"><a class="gatr" target="_blank" rel="noopener" href="https://youtu.be/Xdcg4Drg1hc" data-type="youtube" data-name="Building command-line app with Java 11, Micronaut, Picocli, and GraalVM | #micronaut">Building command-line app with Java 11, Micronaut, Picocli, and GraalVM | #micronaut</a></h5><p class="sans-serif small text-lg-left text-justify">In this video, I will show you how to create a standalone command-line application (CLI app) using Java 11, Micronaut, Picocli, and GraalVM. We are going to build from scratch a Java program, and in the end, we will compile it to the native binary executable file you can run without the Java Virtual Machine. This is not a deep dive tutorial. It's a quickstart introduction to the technology to give you a better understanding about what Micronaut, Picocli, and GraalVM are suitable for. <a class="gatr font-weight-bold" target="_blank" rel="noopener" href="https://youtu.be/Xdcg4Drg1hc" data-type="youtube" data-name="Building command-line app with Java 11, Micronaut, Picocli, and GraalVM | #micronaut">Watch&nbsp;now&nbsp;&raquo;</a></p></div></div></div><p></p></div></div></div><div class="sect1"><h2 id="conclusion">Conclusion</h2><div class="sectionbody"><div class="paragraph"><p>And that&#8217;s it, we finally reached the end of 3 part article on quick start to non-blocking and async processing in Micronaut. I hope you have enjoyed it and you&#8217;ve learned something useful during this journey. If you are looking for more - let&#8217;s stay in touch. More Micronaut articles are coming soon!</p></div></div></div><div id="footnotes"><hr><div class="footnote" id="_footnotedef_1"><a href="#_footnoteref_1">1</a>. <a target="_blank" rel="noopener" href="http://reactivex.io/RxJava/javadoc/io/reactivex/Maybe.html#timeout-long-java.util.concurrent.TimeUnit-io.reactivex.MaybeSource-" class="bare">http://reactivex.io/RxJava/javadoc/io/reactivex/Maybe.html#timeout-long-java.util.concurrent.TimeUnit-io.reactivex.MaybeSource-</a></div></div></div><ul class="tags-list mt-4"><li><a href="/t/java/">java</a></li><li><a href="/t/micronaut/">micronaut</a></li><li><a href="/t/non-blocking/">non-blocking</a></li><li><a href="/t/async/">async</a></li><li><a href="/t/reactive-programming/">reactive-programming</a></li><li><a href="/t/rxjava/">rxjava</a></li></ul></article></div></div></div></div></section><section class="bg-dark posts-layout-01" id="related"><div class="container py-5"><div class="row py-lg-5"><div class="col-12 col-lg-7 d-flex align-items-start mb-lg-0 mb-4"><div class="px-3 px-lg-0 pr-lg-5"><article><a href="/tail-recursive-methods-in-groovy/"><img class="mb-4 shadow" data-lazy="/images/cards/39.png" width="100%"></a><p class="subtitle m-0"><a href="/groovy-cookbook/">Groovy Cookbook</a></p><h3 class="m-0 serif"><a href="/tail-recursive-methods-in-groovy/">Tail-recursive methods in Groovy</a></h3><div class="post-meta mb-4"><ul><li><time datetime="2018-11-12T09:53:17.000Z">November 12, 2018</time></li><li>9 min. read</li><li><a href="https://e.printstacktrace.blog/tail-recursive-methods-in-groovy/#disqus_thread">0 Comments</a></li></ul></div><p class="small">Most of the object-oriented programmers prefer constructing algorithms using imperative style over using recursion. This is pretty obvious in the JVM ecosystem, where imperative iteration is much more efficient than recursive function call chain. However, what if I tell you that in Groovy you can take advantage of clean tail-recursive functions without sacrificing performance? Interested? Let&#8217;s deep dive into it.</p></article></div></div><div class="col-12 col-lg-5"><div class="px-3 px-lg-0"><article class="tile"><div class="row mb-4"><div class="col-9"><p class="subtitle m-0"><a href="/micronaut-cookbook/">Micronaut Cookbook</a></p><h4 class="m-0 serif"><a href="/micronaut-non-blocking-and-async-part-2/">Non-blocking and async Micronaut - quick start (part 2)</a></h4><div class="post-meta mb-4"><ul><li><time datetime="2018-10-26T11:40:42.000Z">October 26, 2018</time></li><li>9 min. read</li><li><a href="https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/#disqus_thread">0 Comments</a></li></ul></div><p class="small">Welcome to the part 2 of "Non-blocking and async Micronaut" article. In the previous part we hav...</p></div><div class="col-3"><a href="/micronaut-non-blocking-and-async-part-2/"><img class="img-fluid rounded shadow-sm mt-3 mb-lg-0" data-lazy="/images/icons/36.png"></a></div></div></article><article class="tile"><div class="row mb-4"><div class="col-9"><p class="subtitle m-0"><a href="/micronaut-cookbook/">Micronaut Cookbook</a></p><h4 class="m-0 serif"><a href="/micronaut-non-blocking-and-async-part1/">Non-blocking and async Micronaut - quick start (part 1)</a></h4><div class="post-meta mb-4"><ul><li><time datetime="2018-10-25T00:33:37.000Z">October 25, 2018</time></li><li>9 min. read</li><li><a href="https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part1/#disqus_thread">0 Comments</a></li></ul></div><p class="small">Micronaut framework inventors says it is designed for building modern microservice applications....</p></div><div class="col-3"><a href="/micronaut-non-blocking-and-async-part1/"><img class="img-fluid rounded shadow-sm mt-3 mb-lg-0" data-lazy="/images/icons/36.png"></a></div></div></article><article class="tile"><div class="row mb-4"><div class="col-9"><p class="subtitle m-0"><a href="/ratpack-cookbook/">Ratpack Cookbook</a></p><h4 class="m-0 serif"><a href="/ratpack-graalvm-how-to-start/">Ratpack on GraalVM - how to start?</a></h4><div class="post-meta mb-4"><ul><li><time datetime="2019-02-15T02:10:39.000Z">February 15, 2019</time></li><li>9 min. read</li><li><a href="https://e.printstacktrace.blog/ratpack-graalvm-how-to-start/#disqus_thread">0 Comments</a></li></ul></div><p class="small">The journey inside the exciting world of GraalVM continues. Today I would like to share with you...</p></div><div class="col-3"><a href="/ratpack-graalvm-how-to-start/"><img class="img-fluid rounded shadow-sm mt-3 mb-lg-0" data-lazy="/images/icons/40.png"></a></div></div></article><a class="gatr" target="_blank" rel="noopener" href="https://click.linksynergy.com/fs-bin/click?id=uow2LCEuhvQ&amp;offerid=572706.11&amp;type=3&amp;subid=0" data-type="banner" data-name="nordvpn-03" data-debug="Displayed nordvpn-03 banner"><img class="img-fluid" data-lazy="/images/yml/nord-vpn-03.png"></a></div></div></div></div></section><section class="sidebar-enabled" id="comments" data-debug="Scrolled to comments"><div class="container"><div class="row"><div class="col-12 col-lg-3 sidebar order-1 pr-0"><div class="py-5 position-sticky text-center" style="top:-40px" data-debug><a class="gatr" target="_blank" rel="noopener" href="https://www.jdoqocy.com/click-100191173-10952823" data-type="banner" data-name="grammarly-01" data-debug="Displayed grammarly-01 banner"><img class="img-fluid" data-lazy="/images/yml/grammarly-tower.png"></a></div></div><div class="col-12 col-lg-9 order-0"><div class="pr-lg-5 pt-5"><p class="m-0 serif small text-muted">Any thoughts or ideas?</p><h2 class="mb-4">Let's talk in the comment's section 💬</h2><div class="disqus-comments"><div class="tip mb-5">Want to put a code sample in the comment? Read the <a target="_blank" rel="noopener" href="https://help.disqus.com/en/articles/1717236-syntax-highlighting"><b>Syntax highlighting</b></a> guide for more information.</div><div class="comments"><div id="disqus_thread"><div id="disqus_empty" style="display:none">Empty</div></div></div></div><script>function load_disqus(e){var t=document.getElementById("disqus_empty");if(document.contains(t)){var d=document.getElementById("disqus_thread"),n=document.createElement("script"),s=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];d&&t&&(t.remove(),n.type="text/javascript",n.async=!0,n.src="//"+e+".disqus.com/embed.js",s.appendChild(n))}}window.addEventListener("scroll",function(e){document.scrollingElement.scrollTop>document.getElementById("disqus_thread").offsetTop-500&&load_disqus("eprintstacktrace")},!1)</script></div></div></div></div></section></main><footer class="bg-dark" id="footer" data-debug="Scrolled to footer"><div class="container py-5"><div class="px-lg-0 px-3"><div class="row py-lg-3"><div class="col-12 col-md-6"><h5 class="mb-4">Latest blog posts</h5><ul class="list-unstyled mb-5"><li><a href="/jenkins-declarative-pipeline-dynamic-agent/">Jenkins Declarative Pipeline with the dynamic agent - how to configure it?</a></li><li><a href="/groovy-ecosystem-usage-report-2020/">Groovy Ecosystem Usage Report (2020)</a></li><li><a href="/how-to-convert-json-to-csv-from-the-command-line/">How to convert JSON to CSV from the command-line?</a></li><li><a href="/5-common-jenkins-pipeline-mistakes/">5 Common Jenkins Pipeline Mistakes</a></li><li><a href="/how-to-merge-two-maps-in-groovy/">How to merge two maps in Groovy?</a></li><li><a href="/building-stackoverflow-cli-with-java-11-micronaut-picocli-and-graalvm/">Building stackoverflow-cli with Java 11, Micronaut, Picocli, and GraalVM</a></li><li><a href="/how-to-catch-curl-response-in-jenkins-pipeline/">How to catch curl response in Jenkins Pipeline?</a></li><li><a href="/atomic-habits-book-review/">Atomic Habits - book review</a></li><li><a href="/parsing-json-in-command-line-with-jq-basic-filters-and-functions-part-1/">Parsing JSON in command-line with jq: basic filters and functions (part 1)</a></li><li><a href="/how-to-time-out-jenkins-pipeline-stage-and-keep-the-pipeline-running/">How to time out Jenkins Pipeline stage and keep the pipeline running?</a></li></ul></div><div class="col-12 col-md-6"><h5 class="mb-4">Trending videos</h5><div class="youtube-row mb-4"><div class="row"><div class="col-12 col-lg-6 text-lg-left text-center mb-lg-0 mb-4"><a class="d-inline-block thumb gatr" target="_blank" rel="noopener" href="https://youtu.be/Ei_Nk14vruE" data-type="youtube" data-name="Jenkins Declarative Pipeline vs Scripted Pipeline - 4 key differences | #jenkinspipeline" data-time="13:45"><img class="img-fluid shadow" data-lazy="https://i3.ytimg.com/vi/Ei_Nk14vruE/mqdefault.jpg"></a></div><div class="col-12 col-lg-6"><h6 class="m-0 p-0 mb-3 sans-serif text-lg-left text-center px-lg-0 px-4"><a class="gatr" target="_blank" rel="noopener" href="https://youtu.be/Ei_Nk14vruE" data-type="youtube" data-name="Jenkins Declarative Pipeline vs Scripted Pipeline - 4 key differences | #jenkinspipeline">Jenkins Declarative Pipeline vs Scripted Pipeline - 4 key differences | #jenkinspipeline</a></h6><p class="sans-serif small text-justify">Jenkins Pipeline as a code is a new standard for defining continuous integration and delivery pipelines in Jenkins. The scrip...</p></div></div></div><div class="youtube-row mb-4"><div class="row"><div class="col-12 col-lg-6 text-lg-left text-center mb-lg-0 mb-4"><a class="d-inline-block thumb gatr" target="_blank" rel="noopener" href="https://youtu.be/KwQDxwZRZiE" data-type="youtube" data-name="Jenkins Pipeline Environment Variables explained | #jenkinspipeline" data-time="16:43"><img class="img-fluid shadow" data-lazy="https://i3.ytimg.com/vi/KwQDxwZRZiE/mqdefault.jpg"></a></div><div class="col-12 col-lg-6"><h6 class="m-0 p-0 mb-3 sans-serif text-lg-left text-center px-lg-0 px-4"><a class="gatr" target="_blank" rel="noopener" href="https://youtu.be/KwQDxwZRZiE" data-type="youtube" data-name="Jenkins Pipeline Environment Variables explained | #jenkinspipeline">Jenkins Pipeline Environment Variables explained | #jenkinspipeline</a></h6><p class="sans-serif small text-justify">In today's video, I show you how you can work effectively with environment variables in the Jenkins pipeline as a code. You w...</p></div></div></div></div></div><div class="row text-lg-left text-center"><div class="col-12 col-md-3 mb-lg-0 mb-4"><h5 class="mb-4">Useful links</h5><ul class="list-unstyled"><li><a class="gatr" href="/" data-type="footer-useful-links" data-name="Start here">Start here</a></li><li><a class="gatr" href="/about" data-type="footer-useful-links" data-name="About">About</a></li><li><a class="gatr" href="/archives" data-type="footer-useful-links" data-name="Archives">Archives</a></li><li><a class="gatr" href="/resources" data-type="footer-useful-links" data-name="Resources">Resources</a></li><li><a class="gatr" href="/privacy-policy" data-type="footer-useful-links" data-name="Privacy Policy">Privacy Policy</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://teespring.com/stores/eprintstacktrace" data-type="footer-useful-links" data-name="Merchandise">Merchandise</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://kit.co/wololock" data-type="footer-useful-links" data-name="My Kit">My Kit</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://feeds.feedburner.com/Eprintstacktracenet" data-type="footer-useful-links" data-name="RSS">RSS</a></li><li><a class="gatr" href="/support-me" data-type="footer-useful-links" data-name="Support me">Support the blog <em class="fas fa-heart color-red ml-2"></em></a></li></ul></div><div class="col-12 col-md-3 mb-lg-0 mb-4"><h5 class="mb-4">Popular categories</h5><ul class="list-unstyled"><li><a class="gatr" href="/groovy-cookbook/" data-type="footer-category" data-name="Groovy Cookbook">Groovy Cookbook<span class="count ml-2">28</span></a></li><li><a class="gatr" href="/jenkins-pipeline-cookbook/" data-type="footer-category" data-name="Jenkins Pipeline Cookbook">Jenkins Pipeline Cookbook<span class="count ml-2">9</span></a></li><li><a class="gatr" href="/programmers-bookshelf/" data-type="footer-category" data-name="Programmer's Bookshelf">Programmer's Bookshelf<span class="count ml-2">6</span></a></li><li><a class="gatr" href="/micronaut-cookbook/" data-type="footer-category" data-name="Micronaut Cookbook">Micronaut Cookbook<span class="count ml-2">4</span></a></li><li><a class="gatr" href="/ratpack-cookbook/" data-type="footer-category" data-name="Ratpack Cookbook">Ratpack Cookbook<span class="count ml-2">4</span></a></li><li><a class="gatr" href="/learning-java/" data-type="footer-category" data-name="Learning Java">Learning Java<span class="count ml-2">4</span></a></li><li><a class="gatr" href="/how-to/" data-type="footer-category" data-name="How to">How to<span class="count ml-2">3</span></a></li><li><a class="gatr" href="/jq-cookbook/" data-type="footer-category" data-name="jq cookbook">jq cookbook<span class="count ml-2">2</span></a></li><li><a class="gatr" href="/blog-reports/" data-type="footer-category" data-name="Blog Reports">Blog Reports<span class="count ml-2">2</span></a></li></ul></div><div class="col-12 col-md-6"><h5 class="mb-4">Popular tags</h5><section class="tagcloud"><a href="/t/affiliate/" style="font-size:1.8em;color:#7b828b">affiliate</a> <a href="/t/async/" style="font-size:1.4em;color:#696f76">async</a> <a href="/t/benchmark/" style="font-size:1.6em;color:#727880">benchmark</a> <a href="/t/blogging/" style="font-size:1.2em;color:#60666b">blogging</a> <a href="/t/book/" style="font-size:2em;color:#848b95">book</a> <a href="/t/career/" style="font-size:1.2em;color:#60666b">career</a> <a href="/t/cicd/" style="font-size:2.4em;color:#969daa">cicd</a> <a href="/t/continuous-integration/" style="font-size:1.4em;color:#696f76">continuous-integration</a> <a href="/t/curl/" style="font-size:1.6em;color:#727880">curl</a> <a href="/t/devops/" style="font-size:2.2em;color:#8d94a0">devops</a> <a href="/t/docker/" style="font-size:1.6em;color:#727880">docker</a> <a href="/t/git/" style="font-size:1.2em;color:#60666b">git</a> <a href="/t/github/" style="font-size:1.4em;color:#696f76">github</a> <a href="/t/graalvm/" style="font-size:2.4em;color:#969daa">graalvm</a> <a href="/t/gradle/" style="font-size:1.2em;color:#60666b">gradle</a> <a href="/t/grails/" style="font-size:1.4em;color:#696f76">grails</a> <a href="/t/groovy/" style="font-size:3em;color:#b1b9ca">groovy</a> <a href="/t/haskell/" style="font-size:1.4em;color:#696f76">haskell</a> <a href="/t/hexo/" style="font-size:1.2em;color:#60666b">hexo</a> <a href="/t/java/" style="font-size:2.8em;color:#a8b0bf">java</a> <a href="/t/java-8/" style="font-size:1.4em;color:#696f76">java-8</a> <a href="/t/jenkins/" style="font-size:2.6em;color:#9fa7b5">jenkins</a> <a href="/t/jenkins-pipeline/" style="font-size:2.6em;color:#9fa7b5">jenkins-pipeline</a> <a href="/t/jenkinsfile/" style="font-size:1.4em;color:#696f76">jenkinsfile</a> <a href="/t/jmh/" style="font-size:1.8em;color:#7b828b">jmh</a> <a href="/t/jq/" style="font-size:1.4em;color:#696f76">jq</a> <a href="/t/json/" style="font-size:1.4em;color:#696f76">json</a> <a href="/t/junit/" style="font-size:1.4em;color:#696f76">junit</a> <a href="/t/learning/" style="font-size:1.6em;color:#727880">learning</a> <a href="/t/maven/" style="font-size:1.4em;color:#696f76">maven</a> <a href="/t/metaprogramming/" style="font-size:1.2em;color:#60666b">metaprogramming</a> <a href="/t/micronaut/" style="font-size:2em;color:#848b95">micronaut</a> <a href="/t/native-image/" style="font-size:1.8em;color:#7b828b">native-image</a> <a href="/t/non-blocking/" style="font-size:1.6em;color:#727880">non-blocking</a> <a href="/t/progress/" style="font-size:1.2em;color:#60666b">progress</a> <a href="/t/ratpack/" style="font-size:2.4em;color:#969daa">ratpack</a> <a href="/t/reactive-programming/" style="font-size:1.4em;color:#696f76">reactive-programming</a> <a href="/t/reading/" style="font-size:1.4em;color:#696f76">reading</a> <a href="/t/recursion/" style="font-size:1.4em;color:#696f76">recursion</a> <a href="/t/review/" style="font-size:2em;color:#848b95">review</a> <a href="/t/rxjava/" style="font-size:1.4em;color:#696f76">rxjava</a> <a href="/t/sdkman/" style="font-size:1.6em;color:#727880">sdkman</a> <a href="/t/session/" style="font-size:1.2em;color:#60666b">session</a> <a href="/t/split/" style="font-size:1.2em;color:#60666b">split</a> <a href="/t/spock/" style="font-size:1.6em;color:#727880">spock</a> <a href="/t/stackoverflow/" style="font-size:1.4em;color:#696f76">stackoverflow</a> <a href="/t/string/" style="font-size:1.4em;color:#696f76">string</a> <a href="/t/tail-call/" style="font-size:1.2em;color:#60666b">tail-call</a> <a href="/t/tail-recursion/" style="font-size:1.2em;color:#60666b">tail-recursion</a> <a href="/t/unit-test/" style="font-size:1.6em;color:#727880">unit-test</a></section></div></div></div></div><section class="bottom"><div class="container"><ul class="text-center py-1 m-0"><li class="d-inline-block">Designed by <a class="gatr" target="_blank" rel="noopener" href="https://twitter.com/wololock" data-type="footer" data-name="designed">@wololock</a></li><li class="d-inline-block">Created with <a class="gatr" target="_blank" rel="noopener" href="https://hexo.io" data-type="footer" data-name="hexo">Hexo</a></li><li class="d-inline-block">Hosted on <a class="gatr" target="_blank" rel="noopener" href="https://github.com/wololock/wololock.github.io" data-type="footer" data-name="github">GitHub</a></li><li class="d-inline-block">Deployed with <a class="gatr" target="_blank" rel="noopener" href="https://circleci.com/gh/wololock/wololock.github.io" data-type="footer" data-name="circleci">Circle CI</a></li><li class="d-inline-block">License <a class="gatr" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-type="footer" data-name="license">CC BY-NC-SA 4.0</a></li><li class="d-inline-block"><a class="gatr" target="_blank" rel="noopener" href="https://github.com/wololock/wololock.github.io/commits/develop" data-type="footer" data-name="last-commit"><img data-lazy="https://badgen.net/github/last-commit/wololock/wololock.github.io?color=blue&amp;scale=0.8"></a></li></ul></div></section></footer><script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/48c5da59c9.js" crossorigin="anonymous" async></script><script async id="cookiebanner" src="//cdnjs.cloudflare.com/ajax/libs/cookie-banner/1.2.2/cookiebanner.min.js" data-moreinfo="/privacy-policy/" data-message="This blog uses cookies to enhance your experience. By continuing to visit it you agree to its use of cookies." data-link="#5fc4ff" data-font-family="Lora,serif" data-font-size="16px" data-bg="#1d2b36"></script><script src="/js/main.js"></script><script src="/js/highlightjs/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script><script async id="dsq-count-scr" src="//eprintstacktrace.disqus.com/count.js"></script><script>!function(a,e,t,n,c,g,o){a.GoogleAnalyticsObject=c,a.ga=a.ga||function(){(a.ga.q=a.ga.q||[]).push(arguments)},a.ga.l=1*new Date,g=e.createElement(t),o=e.getElementsByTagName(t)[0],g.async=1,g.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(g,o)}(window,document,"script",0,"ga"),ga("create","UA-42400890-5","auto"),ga("send","pageview"),jQuery(document).on("click","a.gatr",function(){var a=jQuery(this),e=a.attr("data-type"),t=a.attr("data-name");return ga("send","event",e,"click",t),!0})</script><script>!function(){"use strict";function r(e){var t=e.getAttribute("data-original"),n=new Image;n.onload=function(){e.setAttribute("src",t),e.style.paddingTop=""},n.src=t}document.addEventListener("DOMContentLoaded",function(){var t,e,n,i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));i.length&&("undefined"!=typeof IntersectionObserver?(t=new IntersectionObserver(function(e,t){e.filter(function(e){return e.isIntersecting}).forEach(function(e){r(e.target),t.unobserve(e.target)})}),i.forEach(function(e){t.observe(e)})):(n=function(){clearTimeout(e),e=setTimeout(function(){return(i=i.filter(function(e){return!e.src})).length?void i.filter(function(e){e.getBoundingClientRect().top<window.innerHeight&&r(e)}):(window.removeEventListener("scroll",n),void window.removeEventListener("resize",n))},100)},window.addEventListener("scroll",n),window.addEventListener("resize",n),n()))},!1)}();</script></body></html>