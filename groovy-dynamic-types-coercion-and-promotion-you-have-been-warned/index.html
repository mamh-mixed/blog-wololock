<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="author" content="Szymon Stepniak"><meta name="robots" content="index, follow"><meta name="keywords" content="groovy,dynamic-types,coercion"><title>Groovy: dynamic types coercion and promotion - you have been warned!</title><meta name="description" content="Groovy is a very powerful language on a JVM platform and with this great power comes great responsibility. There are many language features that are not intuitive for many people that start using Gro"><meta property="og:type" content="article"><meta property="og:title" content="Groovy: dynamic types coercion and promotion - you have been warned!"><meta property="og:url" content="https://e.printstacktrace.blog/groovy-dynamic-types-coercion-and-promotion-you-have-been-warned/"><meta property="og:site_name" content="Szymon Stepniak - I want to help you to become a better software developer"><meta property="og:description" content="Groovy is a very powerful language on a JVM platform and with this great power comes great responsibility. There are many language features that are not intuitive for many people that start using Gro"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2018-09-03T09:28:05.000Z"><meta property="article:modified_time" content="2018-09-03T09:28:05.000Z"><meta property="article:author" content="Szymon Stepniak"><meta property="article:tag" content="groovy"><meta property="article:tag" content="dynamic-types"><meta property="article:tag" content="coercion"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@wololock"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="canonical" href="https://e.printstacktrace.blog/groovy-dynamic-types-coercion-and-promotion-you-have-been-warned/"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,700;1,400;1,700&amp;family=Lora:ital,wght@0,400;0,700;1,400;1,700&amp;family=Montserrat:wght@300;400;700&amp;family=VT323&amp;family=DM+Mono:wght@400;500&amp;family=Poppins:wght@500;700;800&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous"><link rel="stylesheet" href="/css/main.css?v=73"><link rel="stylesheet" href="/css/highlight.css?v=73"><link rel="shortcut icon" type="image/png" href="/favicon_new.png"><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":["Person","Organization"],"@id":"https://e.printstacktrace.blog/#/schema/person/wololock","name":"Szymon Stepniak","description":"I want to help you to become a better software developer.","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/#avatar","inLanguage":"en-US","url":"https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200","caption":"Szymon Stepniak"},"logo":{"@id":"https://e.printstacktrace.blog/#avatar"},"sameAs":["https://twitter.com/wololock","https://github.com/wololock","https://stackoverflow.com/users/2194470/szymon-stepniak","https://www.youtube.com/c/eprintstacktrace"]},{"@type":"WebSite","@id":"https://e.printstacktrace.blog/#website","url":"https://e.printstacktrace.blog","name":"Szymon Stepniak - I want to help you to become a better software developer","description":"Blog about programming, created by Upwork's Top Rated freelancer, 10+ years experienced Java/Groovy developer. Contact me if you are looking for an experienced and high quality consultant."},{"@type":"WebPage","@id":"https://e.printstacktrace.blog/groovy-dynamic-types-coercion-and-promotion-you-have-been-warned/#webpage","url":"https://e.printstacktrace.blog/groovy-dynamic-types-coercion-and-promotion-you-have-been-warned/","name":"Groovy: dynamic types coercion and promotion - you have been warned!","isPartOf":{"@id":"https://e.printstacktrace.blog/#website"},"datePublished":"2018-09-03T09:28:05.000Z","dateModified":"2018-09-03T09:28:05.000Z","description":"\nGroovy is a very powerful language on a JVM platform and with this great power\ncomes great responsibility. There are many language features that are not intuitive for many people\nthat start using Groovy. One of these features is dynamic coercion and type promotion which may cause\nyou a&nbsp;headache if you use it carelessly.\n","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://e.printstacktrace.blog/groovy-dynamic-types-coercion-and-promotion-you-have-been-warned/"]}]},{"@type":"Article","@id":"https://e.printstacktrace.blog/groovy-dynamic-types-coercion-and-promotion-you-have-been-warned/#article","isPartOf":{"@id":"https://e.printstacktrace.blog/groovy-dynamic-types-coercion-and-promotion-you-have-been-warned/#webpage"},"author":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"headline":"Groovy: dynamic types coercion and promotion - you have been warned!","datePublished":"2018-09-03T09:28:05.000Z","dateModified":"2018-09-03T09:28:05.000Z","mainEntityOfPage":{"@id":"https://e.printstacktrace.blog/groovy-dynamic-types-coercion-and-promotion-you-have-been-warned/#webpage"},"publisher":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"keywords":"groovy,dynamic-types,coercion","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/groovy-dynamic-types-coercion-and-promotion-you-have-been-warned/#primaryimage","url":"https://e.printstacktrace.blog/images/cards/37.png","inLanguage":"en-US","caption":"Groovy: dynamic types coercion and promotion - you have been warned!"},"inLanguage":"en-US"},{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://e.printstacktrace.blog"},{"@type":"ListItem","position":2,"name":"Groovy Cookbook","item":"https://e.printstacktrace.blog/groovy-cookbook/"},{"@type":"ListItem","position":3,"name":"Groovy: dynamic types coercion and promotion - you have been warned!"}]}]}</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Szymon Stepniak - I want to help you to become a better software developer" type="application/atom+xml">
<style>.img-lazyload-container{overflow:hidden;max-width:100%}.img-lazyload-container img{max-width:100%;display:block;height:auto;transition:opacity .5s ease-in-out}.img-lazyload-container img:not([src]){height:0;opacity:0}</style></head><body><header class="fixed-top" id="header"><div class="container"><nav class="navbar navbar-expand-lg px-0 py-lg-0 navbar-dark"><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarLinks" aria-controls="navbarLinks"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarLinks"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link gatr" href="/" data-type="nav" data-name="Home">Home</a></li><li class="nav-item"><a class="nav-link gatr" href="/about/" data-type="nav" data-name="About Me">About Me</a></li><li class="nav-item"><a class="nav-link gatr" href="/youtube/" target="_blank" data-type="nav" data-name="Videos">Videos</a></li><li class="nav-item"><a class="nav-link gatr" href="/archives/" data-type="nav" data-name="Archives">Archives</a></li><li class="nav-item"><a class="nav-link gatr" href="/resources/" data-type="nav" data-name="Resources">Resources</a></li><li class="nav-item"><a class="nav-link gatr" href="/upwork/" target="_blank" data-type="nav" data-name="Hire me">Hire me</a></li></ul></div></nav></div></header><div id="pageprogress"><div class="bar"></div></div><main id="main"><article class="post"><div class="jumbotron pt-lg-5 pb-1"><div class="container pt-lg-5"><div class="row py-5"><div class="order-0 col-lg-12"><div class="pr-lg-5"><p class="subtitle m-0 p-0"><a class="category" href="/groovy-cookbook/">Groovy Cookbook</a></p><h1 class="mt-0 mb-2">Groovy: dynamic types coercion and promotion - you have been warned!</h1><div class="lead my-4"><div class="paragraph"><p><a target="_blank" rel="noopener" href="http://groovy-lang.org/">Groovy</a> is a very powerful language on a JVM platform and with this great power comes great responsibility. There are many language features that are not intuitive for many people that start using Groovy. One of these features is dynamic coercion and type promotion which may cause you a&nbsp;headache if you use it carelessly.</p></div></div><ul class="post-meta-extended"><li class="d-none d-lg-inline-block"><a href="/about"><img class="rounded-circle" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200" height="52" width="52" style="margin-top:-24px"></a></li><li><div class="small">Author</div><div class="font-weight-bold"><a href="/about">Szymon Stepniak</a></div></li><li><div class="small">Published</div><div class="font-weight-bold"><time datetime="2018-09-03T09:28:05.000Z">Sep 3, 2018</time></div></li><li><div class="small">Reading time</div><div class="font-weight-bold">6 minutes</div></li><li><div class="small">Discussion</div><div class="font-weight-bold"><a href="https://e.printstacktrace.blog/groovy-dynamic-types-coercion-and-promotion-you-have-been-warned/#disqus_thread">0 Comments</a></div></li></ul></div></div></div></div></div><div class="container py-5"><a id="more"></a><div class="sect1"><h2 id="the-good-parts">The good parts</h2><div class="sectionbody"><div class="paragraph"><p>Dynamic type coercion and promotion may sound strange to you. If you work with statically compiled language like Java you know that expression:</p></div><div class="listingblock"><div class="title">Listing 1. Compilation error thrown because of incompatible types</div><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String str = 123; // Error:(4, 18) java: incompatible types: int cannot be converted to java.lang.String</code></pre></div></div><div class="paragraph"><p>does not compile. Groovy took a different approach and as long as you skip <a target="_blank" rel="noopener" href="http://docs.groovy-lang.org/2.5.1/html/documentation/core-semantics.html#_static_compilation">static compilation</a> you are allowed to coerce a left side type to a right side expression. In this case expression like:</p></div><div class="listingblock"><div class="title">Listing 2. Type coercion from <code>Number</code> to <code>String</code> in Groovy</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">String str = 234
println str.dump() // &lt;java.lang.String@c213 value=234 hash=49683&gt;</code></pre></div></div><div class="paragraph"><p>compiles and converts <code>234</code> numeric value to its <code>String</code> representation.</p></div><div class="sect2"><h3 id="examples">Examples</h3><div class="paragraph"><p>We just saw that Groovy allows us to convert numeric value to its <code>String</code> representation without any issue. Now let&#8217;s take a quick look at some of the other examples where type coercion and promotion makes more or less sense, yet still can make developers life easier.</p></div></div><div class="sect2"><h3 id="1-type-to-boolean-coercion">1. Type to <code>Boolean</code> coercion</h3><div class="listingblock"><div class="title">Listing 3. Examples of types to Boolean coercions</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Boolean numberToFalse = 0 // false
Boolean numberToTrue = -10 // true
Boolean stringToFalse = '' // false
Boolean stringToTrue = 'false' // true
Boolean listToFalse = [] // false
Boolean listToTrue = [false, false] // true</code></pre></div></div><div class="paragraph"><p>The interesting part of this coercion is that you can take advantage of it when calling an <code>if</code> statement. For instance you can do something like this:</p></div><div class="listingblock"><div class="title">Listing 4. Simplified if-statement</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">if (number) &#123;
    // ....
&#125;</code></pre></div></div><div class="paragraph"><p>and it will coerce numeric value to <code>false</code> if number is equal to <code>0</code> and <code>true</code> otherwise.</p></div></div><div class="sect2"><h3 id="2-string-to-enum-coercion">2. <code>String</code> to <code>Enum</code> coercion</h3><div class="listingblock"><div class="title">Listing 5. String to Enum coercion example</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">enum Type &#123;
  BASIC, ADVANCED
&#125;

Type basic = 'BASIC'
Type advanced = 'ADVANCED'

println basic.dump() // prints &lt;Type@10e92f8f name=BASIC ordinal=0&gt;
println advanced.dump() // prints &lt;Type@1d119efb name=ADVANCED ordinal=1&gt;</code></pre></div></div><div class="paragraph"><p>As you can see this is a short version of <code>Enum.valueOf(String value)</code> call.</p></div></div><div class="sect2"><h3 id="3-string-to-class-coercion">3. <code>String</code> to <code>Class</code> coercion</h3><div class="listingblock"><div class="title">Listing 6. String to Class coercion example</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Class clazz = 'java.lang.String'
println clazz.dump() // prints &lt;java.lang.Class@5ef04b5 cachedConstructor=null newInstanceCallerCache=null name=java.lang.String reflectionData=java.lang.ref.SoftReference@bef2d72 classRedefinedCount=0 genericInfo=sun.reflect.generics.repository.ClassRepository@69b2283a enumConstants=null enumConstantDirectory=null annotationData=java.lang.Class$AnnotationData@22a637e7 annotationType=null classValueMap=null&gt;</code></pre></div></div></div><div class="sect2"><h3 id="4-closure-to-a-functional-interface-coercion">4. <code>Closure</code> to a functional interface coercion</h3><div class="listingblock"><div class="title">Listing 7. Closure to a functional interface coercion example</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">interface Worker&lt;T,U&gt; &#123;
  U work(T)
&#125;

Worker&lt;String, Integer&gt; worker = &#123; it.length() &#125;
println worker.work('abc') // prints 3</code></pre></div></div></div><div class="sect2"><h3 id="5-list-to-a-custom-type-coercion">5. <code>List</code> to a custom type coercion</h3><div class="listingblock"><div class="title">Listing 8. Passing implicitely list elements to a class constructor</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">import groovy.transform.Immutable

@Immutable
final class Point &#123;
  final int x
  final int y
&#125;

Point point = [10,23]
println point.dump() // &lt;Point@1de0c x=10 y=23 $hash$code=122380&gt;</code></pre></div></div><div class="paragraph"><p>In this example we define constructor parameters as a list of elements. This type of coercion works only if number (and types) of list elements matches the number of constructor parameters. For instance, if we pass a list of size <code>3</code> we would get <code>GroovyCastException</code> while trying to initialize the object:</p></div><div class="listingblock"><div class="title">Listing 9. Passing incorrect number of constructor parameters throws an exception</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Point point = [10,23,43] // Throws org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object '[10, 23, 43]' with class 'java.util.ArrayList' to class 'Point' due to: groovy.lang.GroovyRuntimeException: Could not find matching constructor for: Point(java.lang.Integer, java.lang.Integer, java.lang.Integer)</code></pre></div></div></div><div class="sect2"><h3 id="6-map-to-a-custom-type-coercion">6. <code>Map</code> to a custom type coercion</h3><div class="listingblock"><div class="title">Listing 10. Passing map to a class constructor method</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">import groovy.transform.Immutable

@Immutable
final class Point &#123;
  final int x
  final int y
&#125;

Point point = [x: 4, y: -32]
println point.dump() // &lt;Point@1dd1b x=4 y=-32 $hash$code=122139&gt;</code></pre></div></div><div class="paragraph"><p>This use case is similar to the previous one. In this case map keys have to match constructor parameters - number of map entries has to match number of constructor parameters and keys names have to match class properties names.</p></div></div></div></div><div class="sect1"><h2 id="the-bad-parts">The bad parts</h2><div class="sectionbody"><div class="paragraph"><p>You may find some of these dynamic coercions useful, however there are use cases where dynamic coercion and promotion causes more problems. There was one pretty <a target="_blank" rel="noopener" href="https://stackoverflow.com/q/52103639/2194470">interesting question on Stack Overflow</a> which inspired me to write this blog post. Let&#8217;s consider following example.</p></div><div class="listingblock"><div class="title">Listing 11. Collection coercion to Set type</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Set&lt;Integer&gt; integers = [1,2,3,4,3,2,1].asCollection()

println integers // prints [1, 2, 3, 4]</code></pre></div></div><div class="paragraph"><p>This kind of assignment is not possible in Java - if you try casting <code>Collection</code> to <code>Set</code> you would get <code>ClassCastException</code>:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Exception in thread "main" java.lang.ClassCastException: java.util.Collections$UnmodifiableCollection cannot be cast to java.util.Set</code></pre></div></div><div class="paragraph"><p>Groovy calls <a target="_blank" rel="noopener" href="https://github.com/apache/groovy/blob/GROOVY_2_4_X/src/main/org/codehaus/groovy/runtime/typehandling/DefaultTypeTransformation.java#L248"><code>DefaultTypeTransformation.continueCastOnCollection(Object object, Class type)</code></a> method in this case and allows promoting <code>Collection</code> to a <code>Set</code> (<code>LinkedHashSet</code> in this case).</p></div><div class="paragraph"><p>Well, what&#8217;s the problem with that? If you get familiar with Groovy&#8217;s source code then such conversions are pretty straightforward to you, right? That is true, however there are use case that confuse people even more. Take a look at following example:</p></div><div class="listingblock"><div class="title">Listing 12. Casting unmodifiable collection to Set example</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Set&lt;Integer&gt; integers = Collections.unmodifiableCollection([1,2,3,4,3,2,1].asCollection())
integers.add(10)
println integers</code></pre></div></div><div class="paragraph"><p>Now, do you think this code compiles? Or what <code>println integers</code> prints to the console? If you read the source code carefully you already know the answer. It compiles and it prints <code>[1, 2, 3, 4, 10]</code>. Why? Because unmodifiable collection does not get promoted to a unmodifiable set, but <code>LinkedHashSet</code> instead. If we only be more careful and stop relying on dynamic type coercion than the code like:</p></div><div class="listingblock"><div class="title">Listing 13. Adding an element to unmodifiable set</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Set&lt;Integer&gt; integers = Collections.unmodifiableSet([1,2,3,4,3,2,1] as Set)
integers.add(10)
println integers</code></pre></div></div><div class="paragraph"><p>would produce a compile time error that saves a lot of our time:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">Caught: java.lang.UnsupportedOperationException
java.lang.UnsupportedOperationException
	at java_util_Set$add.call(Unknown Source)
	at test.run(test.groovy:3)</code></pre></div></div></div></div><div class="sect1"><h2 id="how-to-disable-dynamic-type-coercion">How to disable dynamic type coercion?</h2><div class="sectionbody"><div class="paragraph"><p>It&#8217;s simple - enable <a target="_blank" rel="noopener" href="http://docs.groovy-lang.org/2.5.1/html/documentation/core-semantics.html#_static_compilation">static compilation</a> and all dynamic coercions are turned off.</p></div></div></div><div class="sect1"><h2 id="conclusion">Conclusion</h2><div class="sectionbody"><div class="paragraph"><p>I really like all different features of Groovy programming language, however exaggerating dynamic features usage may cause you a lot of problems when you are not careful enough. I always tend to be as explicit as possible when writing Groovy code - I don&#8217;t overuse dynamic type coercions and only use them when they are very straightforward and don&#8217;t add any level of complication to my code.</p></div></div></div></div></article><section id="share"><div class="container pb-5"><div class="row justify-content-between align-items-center"><div class="col-lg"><p class="font-size-5 text-uppercase mb-0">Did you like this article?</p><h3 class="mb-lg-0 mt-0">Consider buying me a coffee</h3></div><div class="col-auto buttons"><div class="pt-lg-4"><a class="align-middle mr-2 gatr" href="/buy-me-a-coffee/" target="_blank"><img data-lazy="/images/buy-me-a-coffee.png" height="32"></a><iframe class="align-middle gatr" src="https://github.com/sponsors/wololock/button" title="Sponsor wololock" height="35" width="116" style="border:0"></iframe></div></div></div></div></section><section id="related" data-debug="Scrolled to related posts"><div class="featured-post py-5"><div class="container py-3"><div class="row"><div class="col-12"><div class="row"><div class="col-lg-8 order-0"><div class="pr-5"><p class="subtitle m-0 p-0"><a class="category" href="/groovy-cookbook/">Groovy Cookbook</a></p><h3 class="mt-0 mb-2">Continue reading: <a href="/why-grails-package-exexutes-config-groovy/">"Why &quot;grails package&quot; executes Config.groovy file?"</a></h3><div class="my-4"><div class="paragraph"><p>This blog post is inspired by one of my recent Stack Overflow answers to following question: <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/46279525/grails-why-is-the-config-groovy-file-executed-during-compilation/46376893">Grails: why is the Config.groovy file executed during compilation?</a>. Here I&#8217;m going to show you step by step what makes <code>grails package</code> command executing <code>Config.groovy</code> script and how I&#8217;ve managed to find the answer to that question.</p></div><a href="/why-grails-package-exexutes-config-groovy/">Read more<i class="fas fa-arrow-right ml-2"></i></a></div><ul class="post-meta-extended"><li class="d-none d-lg-inline-block"><a href="/about"><img class="rounded-circle" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200" height="52" width="52" style="margin-top:-24px"></a></li><li><div class="small">Author</div><div class="font-weight-bold"><a href="/about">Szymon Stepniak</a></div></li><li><div class="small">Published</div><div class="font-weight-bold"><time datetime="2017-09-30T05:18:20.000Z">Sep 30, 2017</time></div></li><li><div class="small">Reading time</div><div class="font-weight-bold">4 minutes</div></li><li><div class="small">Discussion</div><div class="font-weight-bold"><a href="https://e.printstacktrace.blog/why-grails-package-exexutes-config-groovy/#disqus_thread">0 Comments</a></div></li></ul></div></div><div class="col-lg-4 order-1 d-none d-lg-block"><a href="/why-grails-package-exexutes-config-groovy/"><img class="img-fluid rounded" data-lazy="/images/cards/39.png" style="margin-bottom:-300px"></a></div></div></div></div></div></div><div class="remaining"><div class="container py-5"><div class="row"><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="4 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/24.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">Groovy script: closure does not modify @Field annotated variable</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/groovy-script-closure-does-not-modify-field-annotated-variable/"></a></div></div></div><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="2 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/27.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">Groovy: split string and avoid getting IndexOutOfBoundsException</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/groovy-split-string-and-avoid-getting-index-out-of-bounds-exception/"></a></div></div></div><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="2 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/25.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">Ratpack: mocking Session object in GroovyRequestFixture test</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/ratpack-mocking-Session-object-in-GroovyRequestFixture-test/"></a></div></div></div></div></div></div></section><section id="comments"><div class="container py-5" data-debug="Scrolled to comments"><h2 class="disqus-comment-count" data-disqus-url="https://e.printstacktrace.blog/groovy-dynamic-types-coercion-and-promotion-you-have-been-warned/">0 Comments</h2><div class="row"><div class="col-12 col-lg-3 order-lg-1 order-0"><div class="sticky-top" style="top:40px"><a class="gatr" href="https://www.jdoqocy.com/click-100191173-10952823" data-type="banner" data-name="grammarly-01" target="_blank"><img class="d-none img-fluid d-lg-inline-block" data-lazy="/images/yml/grammarly-tower.png"></a></div></div><div class="col-12 col-lg-9 order-0 order-lg-0 order-1"><div id="disqus_thread"></div></div></div></div><script>const loadDisqus=e=>{var s,r;t=document,(s=t.createElement("script")).src="https://"+e+".disqus.com/embed.js",s.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(s)},disqusObserver=new IntersectionObserver(e=>{e.forEach(e=>{var t,s,r;e.intersectionRatio>0&&(t="eprintstacktrace",s=document,(r=s.createElement("script")).src="https://"+t+".disqus.com/embed.js",r.setAttribute("data-timestamp",+new Date),(s.head||s.body).appendChild(r),disqusObserver.unobserve(e.target))})});disqusObserver.observe(document.getElementById("disqus_thread"))</script></section></main><footer id="footer" data-debug="Scrolled to footer"><div class="container py-3 pt-5"><div class="row"><div class="col-12 col-lg-3"><h5>Popular categories</h5><ul class="list-unstyled list-categories"><li class="mb-2"><a class="gatr" href="/groovy-cookbook/" data-type="footer-category" data-name="Groovy Cookbook">Groovy Cookbook<span class="count ml-2 text-muted small">28</span></a></li><li class="mb-2"><a class="gatr" href="/jenkins-pipeline-cookbook/" data-type="footer-category" data-name="Jenkins Pipeline Cookbook">Jenkins Pipeline Cookbook<span class="count ml-2 text-muted small">9</span></a></li><li class="mb-2"><a class="gatr" href="/programmers-bookshelf/" data-type="footer-category" data-name="Programmer's Bookshelf">Programmer's Bookshelf<span class="count ml-2 text-muted small">6</span></a></li><li class="mb-2"><a class="gatr" href="/micronaut-cookbook/" data-type="footer-category" data-name="Micronaut Cookbook">Micronaut Cookbook<span class="count ml-2 text-muted small">4</span></a></li><li class="mb-2"><a class="gatr" href="/ratpack-cookbook/" data-type="footer-category" data-name="Ratpack Cookbook">Ratpack Cookbook<span class="count ml-2 text-muted small">4</span></a></li><li class="mb-2"><a class="gatr" href="/learning-java/" data-type="footer-category" data-name="Learning Java">Learning Java<span class="count ml-2 text-muted small">4</span></a></li><li class="mb-2"><a class="gatr" href="/jq-cookbook/" data-type="footer-category" data-name="jq cookbook">jq cookbook<span class="count ml-2 text-muted small">3</span></a></li><li class="mb-2"><a class="gatr" href="/how-to/" data-type="footer-category" data-name="How to">How to<span class="count ml-2 text-muted small">3</span></a></li><li class="mb-2"><a class="gatr" href="/blog-reports/" data-type="footer-category" data-name="Blog Reports">Blog Reports<span class="count ml-2 text-muted small">2</span></a></li></ul></div><div class="col-12 col-lg-5 latest-posts"><h5 class="mb-4">Latest posts</h5><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/merging-json-files-recursively-in-the-command-line/" data-type="latest-sidebar" data-name="Merging JSON files recursively in the command-line"><img class="rounded" src="/images/icons/jq-merge-json.jpg" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/merging-json-files-recursively-in-the-command-line/" data-type="latest-sidebar" data-name="Merging JSON files recursively in the command-line">Merging JSON files recursively in the command-line</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-11-05T22:14:35.000Z">November 5, 2020</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/merging-json-files-recursively-in-the-command-line/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/jenkins-declarative-pipeline-dynamic-agent/" data-type="latest-sidebar" data-name="Jenkins Declarative Pipeline with the dynamic agent - how to configure it?"><img class="rounded" src="/images/icons/50.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/jenkins-declarative-pipeline-dynamic-agent/" data-type="latest-sidebar" data-name="Jenkins Declarative Pipeline with the dynamic agent - how to configure it?">Jenkins Declarative Pipeline with the dynamic agent - how to configure it?</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-09-27T07:32:11.000Z">September 27, 2020</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/jenkins-declarative-pipeline-dynamic-agent/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/groovy-ecosystem-usage-report-2020/" data-type="latest-sidebar" data-name="Groovy Ecosystem Usage Report (2020)"><img class="rounded" src="/images/icons/3.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/groovy-ecosystem-usage-report-2020/" data-type="latest-sidebar" data-name="Groovy Ecosystem Usage Report (2020)">Groovy Ecosystem Usage Report (2020)</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-09-13T05:40:19.000Z">September 13, 2020</time></li><li>4 min. read</li><li><a href="https://e.printstacktrace.blog/groovy-ecosystem-usage-report-2020/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/how-to-convert-json-to-csv-from-the-command-line/" data-type="latest-sidebar" data-name="How to convert JSON to CSV from the command-line?"><img class="rounded" src="/images/icons/4.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/how-to-convert-json-to-csv-from-the-command-line/" data-type="latest-sidebar" data-name="How to convert JSON to CSV from the command-line?">How to convert JSON to CSV from the command-line?</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-08-25T18:44:31.000Z">August 25, 2020</time></li><li>3 min. read</li><li><a href="https://e.printstacktrace.blog/how-to-convert-json-to-csv-from-the-command-line/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/5-common-jenkins-pipeline-mistakes/" data-type="latest-sidebar" data-name="5 Common Jenkins Pipeline Mistakes"><img class="rounded" src="/images/icons/1.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/5-common-jenkins-pipeline-mistakes/" data-type="latest-sidebar" data-name="5 Common Jenkins Pipeline Mistakes">5 Common Jenkins Pipeline Mistakes</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-08-24T10:53:13.000Z">August 24, 2020</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/5-common-jenkins-pipeline-mistakes/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/how-to-merge-two-maps-in-groovy/" data-type="latest-sidebar" data-name="How to merge two maps in Groovy?"><img class="rounded" src="/images/icons/28.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/how-to-merge-two-maps-in-groovy/" data-type="latest-sidebar" data-name="How to merge two maps in Groovy?">How to merge two maps in Groovy?</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-07-17T18:11:17.000Z">July 17, 2020</time></li><li>6 min. read</li><li><a href="https://e.printstacktrace.blog/how-to-merge-two-maps-in-groovy/#disqus_thread">0 Comments</a></li></ul></div></div></div></div><div class="col-12 col-lg-4"><h5>Popular tags</h5><div class="tags-cloud"><a href="/t/affiliate/" style="font-size:.8em;color:#6881a5">affiliate</a> <a href="/t/async/" style="font-size:.8em;color:#778196">async</a> <a href="/t/benchmark/" style="font-size:.8em;color:#6f819d">benchmark</a> <a href="/t/book/" style="font-size:.8em;color:#6081ac">book</a> <a href="/t/cicd/" style="font-size:.8em;color:#5082ba">cicd</a> <a href="/t/curl/" style="font-size:.8em;color:#6f819d">curl</a> <a href="/t/devops/" style="font-size:.8em;color:#5882b3">devops</a> <a href="/t/docker/" style="font-size:.8em;color:#6f819d">docker</a> <a href="/t/github/" style="font-size:.8em;color:#778196">github</a> <a href="/t/graalvm/" style="font-size:.8em;color:#5082ba">graalvm</a> <a href="/t/grails/" style="font-size:.8em;color:#778196">grails</a> <a href="/t/groovy/" style="font-size:.8em;color:#3982d0">groovy</a> <a href="/t/haskell/" style="font-size:.8em;color:#778196">haskell</a> <a href="/t/java/" style="font-size:.8em;color:#4182c9">java</a> <a href="/t/java-8/" style="font-size:.8em;color:#778196">java-8</a> <a href="/t/jenkins/" style="font-size:.8em;color:#4982c2">jenkins</a> <a href="/t/jenkins-pipeline/" style="font-size:.8em;color:#4982c2">jenkins-pipeline</a> <a href="/t/jmh/" style="font-size:.8em;color:#6881a5">jmh</a> <a href="/t/jq/" style="font-size:.8em;color:#6f819d">jq</a> <a href="/t/json/" style="font-size:.8em;color:#6f819d">json</a> <a href="/t/junit/" style="font-size:.8em;color:#778196">junit</a> <a href="/t/learning/" style="font-size:.8em;color:#6f819d">learning</a> <a href="/t/micronaut/" style="font-size:.8em;color:#6081ac">micronaut</a> <a href="/t/native-image/" style="font-size:.8em;color:#6881a5">native-image</a> <a href="/t/non-blocking/" style="font-size:.8em;color:#6f819d">non-blocking</a> <a href="/t/ratpack/" style="font-size:.8em;color:#5082ba">ratpack</a> <a href="/t/reactive-programming/" style="font-size:.8em;color:#778196">reactive-programming</a> <a href="/t/reading/" style="font-size:.8em;color:#778196">reading</a> <a href="/t/recursion/" style="font-size:.8em;color:#778196">recursion</a> <a href="/t/review/" style="font-size:.8em;color:#6081ac">review</a> <a href="/t/rxjava/" style="font-size:.8em;color:#778196">rxjava</a> <a href="/t/sdkman/" style="font-size:.8em;color:#6f819d">sdkman</a> <a href="/t/spock/" style="font-size:.8em;color:#6f819d">spock</a> <a href="/t/stackoverflow/" style="font-size:.8em;color:#778196">stackoverflow</a> <a href="/t/string/" style="font-size:.8em;color:#778196">string</a> <a href="/t/unit-test/" style="font-size:.8em;color:#6f819d">unit-test</a></div><div class="mt-5"><a class="gatr" href="https://click.linksynergy.com/deeplink?id=uow2LCEuhvQ&amp;mid=39197&amp;murl=https%3A%2F%2Fwww.udemy.com%2Ftopic%2Fdevops%2F" data-type="banner" data-name="udemy-devops-01" target="_blank"><img class="d-none img-fluid d-lg-inline-block d-md-inline-block" data-lazy="/images/yml/udemy-devops-01.png"></a></div></div></div></div><div class="border-top border-dark py-4 footer-bottom"><div class="container"><div class="justify-content-between d-flex"><div class="links"><ul><li><a class="gatr" href="/about/" data-type="footer-link" data-name="About">About</a></li><li><a class="gatr" href="/archives/" data-type="footer-link" data-name="Archives">Archives</a></li><li><a class="gatr" href="/resources/" data-type="footer-link" data-name="Resources">Resources</a></li><li><a class="gatr" href="/privacy-policy/" data-type="footer-link" data-name="Privacy Policy">Privacy Policy</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://kit.co/wololock" data-type="footer-link" data-name="My Kit">My Kit</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://feeds.feedburner.com/Eprintstacktracenet" data-type="footer-link" data-name="RSS">RSS</a></li></ul></div><div class="socials"><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://twitter.com/wololock"><i class="fa fa-twitter"></i></a></li><li><a target="_blank" rel="noopener" href="https://youtube.com/eprintstacktrace"><i class="fa fa-youtube"></i></a></li><li><a target="_blank" rel="noopener" href="https://github.com/wololock"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://stackoverflow.com/users/2194470/szymon-stepniak?tab=profile"><i class="fa fa-stack-overflow"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.linkedin.com/in/szymon-st%C4%99pniak-9a0b1630/"><i class="fa fa-linkedin"></i></a></li></ul></div></div></div></div></footer><script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/48c5da59c9.js" crossorigin="anonymous" async></script><script async id="cookiebanner" src="//cdnjs.cloudflare.com/ajax/libs/cookie-banner/1.2.2/cookiebanner.min.js" data-moreinfo="/privacy-policy/" data-message="This blog uses cookies to enhance your experience. By continuing to visit it you agree to its use of cookies." data-link="#5fc4ff" data-font-family="Lora,serif" data-font-size="16px" data-bg="#1d2b36"></script><script src="/js/main.js?v=12"></script><script src="/js/highlightjs/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script><script async id="dsq-count-scr" src="//eprintstacktrace.disqus.com/count.js"></script><script>!function(e,a,t,n,c,i,g){e.GoogleAnalyticsObject=c,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,i=a.createElement(t),g=a.getElementsByTagName(t)[0],i.async=1,i.src="//www.google-analytics.com/analytics.js",g.parentNode.insertBefore(i,g)}(window,document,"script",0,"ga"),ga("create","UA-42400890-5","auto"),ga("send","pageview"),jQuery(document).on("mousedown",".gatr",(function(e){var a=jQuery(this),t=a.attr("data-type"),n=a.attr("data-name"),c=1===e.which?"click":2===e.which?"middle-click":"right-click";return ga("send","event",t,c,n),!1}))</script><script>!function(){"use strict";function r(e){var t=e.getAttribute("data-original"),n=new Image;n.onload=function(){e.setAttribute("src",t),e.style.paddingTop=""},n.src=t}document.addEventListener("DOMContentLoaded",function(){var t,e,n,i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));i.length&&("undefined"!=typeof IntersectionObserver?(t=new IntersectionObserver(function(e,t){e.filter(function(e){return e.isIntersecting}).forEach(function(e){r(e.target),t.unobserve(e.target)})}),i.forEach(function(e){t.observe(e)})):(n=function(){clearTimeout(e),e=setTimeout(function(){return(i=i.filter(function(e){return!e.src})).length?void i.filter(function(e){e.getBoundingClientRect().top<window.innerHeight&&r(e)}):(window.removeEventListener("scroll",n),void window.removeEventListener("resize",n))},100)},window.addEventListener("scroll",n),window.addEventListener("resize",n),n()))},!1)}();</script></body></html>