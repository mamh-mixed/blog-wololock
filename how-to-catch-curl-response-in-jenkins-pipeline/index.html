<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="author" content="Szymon Stepniak"><meta name="robots" content="index, follow"><meta name="keywords" content="curl,jenkins,jenkins-pipeline,jenkinsfile,jq,json"><title>How to catch curl response in Jenkins Pipeline?</title><meta name="description" content="In this blog post, I explain why you may want to use curl command in your Jenkinsfile, how to catch curl response and store it in a variable, as well as how to read HTTP response status code and extr"><meta property="og:type" content="article"><meta property="og:title" content="How to catch curl response in Jenkins Pipeline?"><meta property="og:url" content="https://e.printstacktrace.blog/how-to-catch-curl-response-in-jenkins-pipeline/"><meta property="og:site_name" content="Szymon Stepniak - I want to help you to become a better software developer"><meta property="og:description" content="In this blog post, I explain why you may want to use curl command in your Jenkinsfile, how to catch curl response and store it in a variable, as well as how to read HTTP response status code and extr"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2020-06-22T18:20:41.000Z"><meta property="article:modified_time" content="2020-06-22T18:20:41.000Z"><meta property="article:author" content="Szymon Stepniak"><meta property="article:tag" content="curl"><meta property="article:tag" content="jenkins"><meta property="article:tag" content="jenkins-pipeline"><meta property="article:tag" content="jenkinsfile"><meta property="article:tag" content="jq"><meta property="article:tag" content="json"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@wololock"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="canonical" href="https://e.printstacktrace.blog/how-to-catch-curl-response-in-jenkins-pipeline/"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,700;1,400;1,700&amp;family=Lora:ital,wght@0,400;0,700;1,400;1,700&amp;family=Montserrat:wght@300;400;700&amp;family=DM+Mono:wght@400;500&amp;family=Poppins:wght@500;700;800&amp;family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous"><link rel="stylesheet" href="/css/main.css?v=73"><link rel="stylesheet" href="/css/highlight.css?v=73"><link rel="shortcut icon" type="image/png" href="/favicon_new.png"><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":["Person","Organization"],"@id":"https://e.printstacktrace.blog/#/schema/person/wololock","name":"Szymon Stepniak","description":"I want to help you to become a better software developer.","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/#avatar","inLanguage":"en-US","url":"https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200","caption":"Szymon Stepniak"},"logo":{"@id":"https://e.printstacktrace.blog/#avatar"},"sameAs":["https://twitter.com/wololock","https://github.com/wololock","https://stackoverflow.com/users/2194470/szymon-stepniak","https://www.youtube.com/c/eprintstacktrace"]},{"@type":"WebSite","@id":"https://e.printstacktrace.blog/#website","url":"https://e.printstacktrace.blog","name":"Szymon Stepniak - I want to help you to become a better software developer","description":"Blog about programming, created by Upwork's Top Rated freelancer, 10+ years experienced Java/Groovy developer. Contact me if you are looking for an experienced and high quality consultant."},{"@type":"WebPage","@id":"https://e.printstacktrace.blog/how-to-catch-curl-response-in-jenkins-pipeline/#webpage","url":"https://e.printstacktrace.blog/how-to-catch-curl-response-in-jenkins-pipeline/","name":"How to catch curl response in Jenkins Pipeline?","isPartOf":{"@id":"https://e.printstacktrace.blog/#website"},"datePublished":"2020-06-22T18:20:41.000Z","dateModified":"2020-06-22T18:20:41.000Z","description":"\nIn this blog post, I explain why you may want to use curl command in your Jenkinsfile, how to catch curl response and store it in a variable, as well as how to read HTTP response status code and extract some data from the JSON document. Enjoy!\n","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://e.printstacktrace.blog/how-to-catch-curl-response-in-jenkins-pipeline/"]}]},{"@type":"Article","@id":"https://e.printstacktrace.blog/how-to-catch-curl-response-in-jenkins-pipeline/#article","isPartOf":{"@id":"https://e.printstacktrace.blog/how-to-catch-curl-response-in-jenkins-pipeline/#webpage"},"author":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"headline":"How to catch curl response in Jenkins Pipeline?","datePublished":"2020-06-22T18:20:41.000Z","dateModified":"2020-06-22T18:20:41.000Z","mainEntityOfPage":{"@id":"https://e.printstacktrace.blog/how-to-catch-curl-response-in-jenkins-pipeline/#webpage"},"publisher":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"keywords":"curl,jenkins,jenkins-pipeline,jenkinsfile,jq,json","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/how-to-catch-curl-response-in-jenkins-pipeline/#primaryimage","url":"https://e.printstacktrace.blog/images/cards/3.png","inLanguage":"en-US","caption":"How to catch curl response in Jenkins Pipeline?"},"inLanguage":"en-US"},{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://e.printstacktrace.blog"},{"@type":"ListItem","position":2,"name":"Jenkins Pipeline Cookbook","item":"https://e.printstacktrace.blog/jenkins-pipeline-cookbook/"},{"@type":"ListItem","position":3,"name":"How to catch curl response in Jenkins Pipeline?"}]}]}</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Szymon Stepniak - I want to help you to become a better software developer" type="application/atom+xml">
<style>.img-lazyload-container{overflow:hidden;max-width:100%}.img-lazyload-container img{max-width:100%;display:block;height:auto;transition:opacity .5s ease-in-out}.img-lazyload-container img:not([src]){height:0;opacity:0}</style></head><body><header class="fixed-top" id="header"><div class="container"><nav class="navbar navbar-expand-lg px-0 py-lg-0 navbar-dark"><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarLinks" aria-controls="navbarLinks"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarLinks"><ul class="navbar-nav ml-auto"><li class="nav-item"><a class="nav-link gatr" href="/" data-type="nav" data-name="Home">Home</a></li><li class="nav-item"><a class="nav-link gatr" href="/about/" data-type="nav" data-name="About Me">About Me</a></li><li class="nav-item"><a class="nav-link gatr" href="/youtube/" target="_blank" data-type="nav" data-name="Videos">Videos</a></li><li class="nav-item"><a class="nav-link gatr" href="/archives/" data-type="nav" data-name="Archives">Archives</a></li><li class="nav-item"><a class="nav-link gatr" href="/resources/" data-type="nav" data-name="Resources">Resources</a></li><li class="nav-item"><a class="nav-link gatr" href="/upwork/" target="_blank" data-type="nav" data-name="Hire me">Hire me</a></li></ul></div></nav></div></header><div id="pageprogress"><div class="bar"></div></div><main id="main"><article class="post"><div class="jumbotron pt-lg-5 pb-1"><div class="container pt-lg-5"><div class="row py-5"><div class="order-0 col-lg-8"><div class="pr-lg-5"><p class="subtitle m-0 p-0"><a class="category" href="/jenkins-pipeline-cookbook/">Jenkins Pipeline Cookbook</a></p><h1 class="mt-0 mb-2">How to catch curl response in Jenkins Pipeline?</h1><div class="lead my-4"><div class="paragraph"><p>In this blog post, I explain why you may want to use <code>curl</code> command in your Jenkinsfile, how to catch <code>curl</code> response and store it in a variable, as well as how to read HTTP response status code and extract some data from the JSON document. Enjoy!</p></div></div><ul class="post-meta-extended"><li class="d-none d-lg-inline-block"><a href="/about"><img class="rounded-circle" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200" height="52" width="52" style="margin-top:-24px"></a></li><li><div class="small">Author</div><div class="font-weight-bold"><a href="/about">Szymon Stepniak</a></div></li><li><div class="small">Published</div><div class="font-weight-bold"><time datetime="2020-06-22T18:20:41.000Z">Jun 22, 2020</time></div></li><li><div class="small">Reading time</div><div class="font-weight-bold">11 minutes</div></li><li><div class="small">Discussion</div><div class="font-weight-bold"><a href="https://e.printstacktrace.blog/how-to-catch-curl-response-in-jenkins-pipeline/#disqus_thread">0 Comments</a></div></li></ul></div></div><div class="col-lg-4 order-1 d-none d-lg-block"><img class="img-fluid rounded fade-in" src="/images/hero/jenkins-01.png" style="margin-bottom:-300px"></div></div></div></div><div class="container py-5"><a id="more"></a><div id="toc" class="toc"><div id="toctitle" class="title">Table of Contents</div><ul class="sectlevel1"><li><a href="#why-use-curl-instead-of-any-java-http-client">Why use <code>curl</code> instead of any Java HTTP client?</a></li><li><a href="#capturing-sh-output-with-returnstdout-option">Capturing <code>sh</code> output with <code>returnStdout</code> option</a></li><li><a href="#using-authentication">Using authentication</a></li><li><a href="#capturing-http-response-status-code-and-response-body">Capturing HTTP response status code and response body</a></li><li><a href="#using-groovy-json-jsonslurperclassic-to-parse-the-response">Using <code>groovy.json.JsonSlurperClassic</code> to parse the response</a></li><li><a href="#using-jq-to-parse-the-response">Using <code>jq</code> to parse the response</a></li><li><a href="#bonus-a-few-more-useful-curl-parameters">Bonus: a few more useful <code>curl</code> parameters</a><ul class="sectlevel2"><li><a href="#how-to-set-the-acceptapplicationjson-header">How to set the <code>Accept:application/json</code> header?</a></li><li><a href="#how-to-store-and-send-cookies-from-a-file">How to store and send cookies from a file?</a></li><li><a href="#how-to-handle-redirects-e-g-from-http-to-https">How to handle redirects (e.g. from <code>http</code> to <code>https</code>)?</a></li><li><a href="#how-to-retry-on-connection-refused">How to retry on connection refused?</a></li></ul></li></ul></div><div class="sect1"><h2 id="why-use-curl-instead-of-any-java-http-client">Why use <code>curl</code> instead of any Java HTTP client?</h2><div class="sectionbody"><div class="paragraph"><p>I guess you may ask this question: <em>"why to bother with curl while there is Java or Groovy HTTP client I can use in the pipeline script block?"</em>. This question might look reasonable. However, there is one important fact you need to consider. Any Groovy (or Java) code you put into the script block is always <a target="_blank" rel="noopener" href="https://www.jenkins.io/blog/2017/02/01/pipeline-scalability-best-practice/#fundamentals">executed on the Jenkins master server</a>. No matter what agent/node you use to execute the specific stage(s). Now imagine the following scenario. Let&#8217;s say you have a dedicated node in your Jenkins infrastructure to run some REST API calls to perform a production deployment. And let&#8217;s assume that only this specific node can make such an HTTP call for security reasons. If you implement the deployment part by using some Groovy code (e.g., something as simple as <code>java.net.HttpURLConnection</code>), it will fail. The server that de facto makes an HTTP call, in this case, is not your dedicated node, but the Jenkins master server. The same one that is not allowed to make any connection to your production server(s). However, if you use the pipeline&#8217;s <code>sh</code> step to execute the <code>curl</code> command instead, the HTTP request will be sent from the designated Jenkins node. This way, you can design a topology where only a specific node can perform strategic REST API calls.</p></div><div class="paragraph"><p>Now when you know <em>"why"</em>, let&#8217;s take a look at the <em>"how"</em> part.</p></div><div class="openblock text-center mt-4"><div class="content"><div class="paragraph"><p><a class="gatr" href="https://www.jdoqocy.com/click-100264350-13722493" data-type="banner" data-name="oreilly-01" target="_blank"><img class="d-none img-fluid d-lg-inline-block" data-lazy="/images/yml/v2/oreilly.png"></a></p></div></div></div></div></div><div class="sect1"><h2 id="capturing-sh-output-with-returnstdout-option">Capturing <code>sh</code> output with <code>returnStdout</code> option</h2><div class="sectionbody"><div class="paragraph"><p>The way to execute curl command is to use <code>sh</code> (or <code>bat</code> if you are on the Windows server) step. You need to know that the <code>sh</code> step by default does not return any value, so if you try to assign it&#8217;s output to a variable, you will get the <code>null</code> value. To change this behavior, you need to set the <code>returnStdout</code> parameter to <code>true</code>. In the following example, I use my local Jenkins installation to get the build information of one of my Jenkins pipelines using the JSON API endpoint.</p></div><div class="listingblock"><div class="title">Listing 1. Jenkinsfile</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline &#123;
    agent any

    stages &#123;
        stage("Using curl example") &#123;
            steps &#123;
                script &#123;
                    final String url = "http://localhost:8080/job/Demos/job/maven-pipeline-demo/job/sdkman/2/api/json"

                    final String response = sh(script: "curl -s $url", <strong class="highlightcode">returnStdout: true</strong>).trim()

                    echo response
                &#125;
            &#125;
        &#125;
    &#125;
&#125;</code></pre></div></div><div class="openblock text-center"><div class="content"><div class="imageblock img-fluid shadow d-inline-block p-2"><div class="content"><a class="image" href="/images/curl-jenkins-pipeline/01-basic-curl.jpg"><div class="img-lazyload-container" style="width:1126px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/curl-jenkins-pipeline/01-basic-curl.jpg" height="385" width="1126" style="padding-top:34.19182948490231%"></div></a></div></div></div></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">It is useful to call <code>trim()</code> on the output from the <code>sh</code> step to remove any new line characters.</td></tr></table></div></div></div><div class="sect1"><h2 id="using-authentication">Using authentication</h2><div class="sectionbody"><div class="paragraph"><p>The endpoint I was trying to call in the previous example requires authentication. We can extend this example by adding <code>-u username:password</code> option and using <a target="_blank" rel="noopener" href="https://plugins.jenkins.io/credentials-binding/">Credentials Binding plugin</a> to store those credentials.</p></div><div class="admonitionblock warning"><table><tr><td class="icon"><i class="fa icon-warning" title="Warning"></i></td><td class="content"><div class="paragraph"><p>Storing sensitive credentials securely is <strong>very difficult</strong>, and it is out of this blog post&#8217;s scope. However, here are a few hints that may help you avoid some real problems.</p></div><div class="ulist"><ul><li><p>Limit the scope of credentials as much as possible.</p></li><li><p>Group Jenkins jobs using folders and control who (a person, or a team) has permissions to those folders using <a target="_blank" rel="noopener" href="https://plugins.jenkins.io/role-strategy/">Role-based Authorization Strategy plugin</a>.</p></li><li><p>Avoid using credentials when possible. If you have to use them, prefer using tokens with the least permissions granted.</p></li><li><p>If possible, store credentials outside Jenkins. If using private/public key pairs is an option, consider using remote storage (like AWS KMS.) For the most sensitive credentials, you can use a dedicated node combined with a Jenkins job (or a pipeline) that can run on it exclusively. Such a job can be modified only by administrators, and the node cannot be used by other regular Jenkins users. Other pipelines/jobs may trigger this dedicated job to perform a sensitive task that uses a key (from remote storage) to authenticate. This way, you can minimize the risk of leaking sensitive credentials.</p></li></ul></div><hr><div class="exampleblock small"><div class="content"><div class="paragraph"><p>You can read more about securing sensitive credentials here:</p></div><div class="ulist"><ul><li><p><a target="_blank" rel="noopener" href="https://support.cloudbees.com/hc/en-us/articles/115002880172-How-to-manage-sensitive-credentials-">How to manage sensitive credentials?</a></p></li><li><p><a target="_blank" rel="noopener" href="https://codurance.com/2019/05/30/accessing-and-dumping-jenkins-credentials/">Accessing and dumping Jenkins credentials</a></p></li></ul></div></div></div></td></tr></table></div><div class="paragraph"><p>In this example, I use the <a target="_blank" rel="noopener" href="https://support.cloudbees.com/hc/en-us/articles/115003090592-How-to-re-generate-my-Jenkins-user-token">user&#8217;s API Token</a> instead of a real password. It works like a regular password, but it can be easily revoked, and the new one can be re-generated if needed. Also, you can use <code>usernameColonPassword</code> to bind <code>username:password</code> to the specific variable easily.</p></div><div class="listingblock"><div class="title">Listing 2. Jenkinsfile</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline &#123;
    agent any

    stages &#123;
        stage("Using curl example") &#123;
            steps &#123;
                script &#123;
                    final String url = "http://localhost:8080/job/Demos/job/maven-pipeline-demo/job/sdkman/2/api/json"

                    withCredentials([usernameColonPassword(credentialsId: "jenkins-api-token", variable: "API_TOKEN")]) &#123;
                        final String response = sh(script: "curl -s <strong class="highlightcode">-u $API_TOKEN</strong> $url", returnStdout: true).trim()

                        echo response
                    &#125;
                &#125;
            &#125;
        &#125;
    &#125;
&#125;</code></pre></div></div><div class="openblock text-center"><div class="content"><div class="imageblock img-fluid shadow d-inline-block p-2"><div class="content"><a class="image" href="/images/curl-jenkins-pipeline/03-auth.jpg"><div class="img-lazyload-container" style="width:1122px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/curl-jenkins-pipeline/03-auth.jpg" height="398" width="1122" style="padding-top:35.47237076648842%"></div></a></div></div></div></div></div></div><div class="sect1"><h2 id="capturing-http-response-status-code-and-response-body">Capturing HTTP response status code and response body</h2><div class="sectionbody"><div class="paragraph"><p>In many cases, you want to react to different HTTP response status codes. For instance, you want to check if the response returned <code>200</code> or <code>400</code> status code. Let&#8217;s extend the previous example to fit into such a use case. We can pass <code>-w' \n%&#123;response_code&#125;'</code> option to change the output format to the one that contains the response body in the first line, and the status code in the second line. Then we can split the output by the new line character, and we can use {multiple-assignment}[Groovy multiple assignment] feature to assign the response body and the status to the two separate variables.</p></div><div class="listingblock"><div class="title">Listing 3. Jenkinsfile</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline &#123;
    agent any

    stages &#123;
        stage("Using curl example") &#123;
            steps &#123;
                script &#123;
                    final String url = "http://localhost:8080/job/Demos/job/maven-pipeline-demo/job/sdkman/2/api/json"

                    withCredentials([usernameColonPassword(credentialsId: "jenkins-api-token", variable: "API_TOKEN")]) &#123;
                        final <strong class="highlightcode">def (String response, int code)</strong> =
                            sh(script: "curl -s <strong class="highlightcode">-w '\\n%&#123;response_code&#125;'</strong> -u $API_TOKEN $url", returnStdout: true)
                                .trim()
                                <strong class="highlightcode">.tokenize("\n")</strong>

                        echo "HTTP response status code: $code"

                        if (code == 200) &#123;
                            echo response
                        &#125;
                    &#125;
                &#125;
            &#125;
        &#125;
    &#125;
&#125;</code></pre></div></div><div class="openblock text-center"><div class="content"><div class="imageblock img-fluid shadow d-inline-block p-2"><div class="content"><a class="image" href="/images/curl-jenkins-pipeline/04-status-code.jpg"><div class="img-lazyload-container" style="width:1128px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/curl-jenkins-pipeline/04-status-code.jpg" height="427" width="1128" style="padding-top:37.854609929078016%"></div></a></div></div></div></div></div></div><div class="sect1"><h2 id="using-groovy-json-jsonslurperclassic-to-parse-the-response">Using <code>groovy.json.JsonSlurperClassic</code> to parse the response</h2><div class="sectionbody"><div class="paragraph"><p>Once we have the response body and the status code extracted, we can parse the JSON body and extract the value we are interested in. The Jenkins build&#8217;s JSON API response contains a list of different actions. Let&#8217;s say we want to extract the value of <code>executingTimeMillis</code> stored as an action of type <code>jenkins.metrics.impl.TimeInQueueAction</code>.</p></div><div class="paragraph"><p>If you know Groovy, I&#8217;m guessing you might already think about using <code>groovy.json.JsonSlurper</code> to solve the problem. It is not a terrible idea, but it has two downsides you need to take into account. Firstly, it makes Jenkins master server involved in parsing the JSON response, even if the stage gets executed on a different node. And secondly, <code>groovy.json.JsonSlurper</code> produces a lazy map which is not-serializable. The first thing might or might not be a problem - it mainly depends on your Jenkins topology architecture. If you use multiple agents to execute stages and have a lot of different Jenkins jobs on your server, it makes sense to utilize Jenkins master server resources more effectively. Using <code>groovy.json.JsonSlurper</code> to parse small JSON documents might not be a bottleneck. Still, if hundreds or thousands of Jenkins jobs start to parse large JSON documents, it may become an issue. The second problem can be solved easily - instead of using <code>groovy.json.JsonSlurper</code>, use <code>groovy.json.JsonSlurperClassic</code>. This class produces a regular hash map that can be serialized, and that way, you can avoid pipeline serialization problems.</p></div><div class="listingblock"><div class="title">Listing 4. Jenkinsfile</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline &#123;
    agent any

    stages &#123;
        stage("Using curl example") &#123;
            steps &#123;
                script &#123;
                    final String url = "http://localhost:8080/job/Demos/job/maven-pipeline-demo/job/sdkman/2/api/json"

                    withCredentials([usernameColonPassword(credentialsId: "jenkins-api-token", variable: "API_TOKEN")]) &#123;
                        final def (String response, int code) =
                            sh(script: "curl -s -w '\\n%&#123;response_code&#125;' -u $API_TOKEN $url", returnStdout: true)
                                .trim()
                                .tokenize("\n")

                        echo "HTTP response status code: $code"

                        if (code == 200) &#123;
                            def json = new groovy.json.JsonSlurperClassic().parseText(response)

                            def executingTimeMillis = json.actions.find &#123; it._class == "jenkins.metrics.impl.TimeInQueueAction" &#125;.executingTimeMillis

                            echo "executingTimeMillis = $executingTimeMillis"
                        &#125;
                    &#125;
                &#125;
            &#125;
        &#125;
    &#125;
&#125;</code></pre></div></div><div class="admonitionblock warning"><table><tr><td class="icon"><i class="fa icon-warning" title="Warning"></i></td><td class="content"><div class="paragraph"><p>By default, using <code>groovy.json.JsonSlurper</code> class and its <code>parseText(String str)</code> method are not allowed, <strong>requiring the administrator&#8217;s manual approval</strong> the first time you are trying to use it. If you run this example and see an error like the one below, you need to go to your Jenkins' ScriptApproval page and approve using both the class and the <code>parseText()</code> method.</p></div><div class="openblock text-center"><div class="content"><div class="imageblock img-fluid d-inline-block m-0"><div class="content"><a class="image" href="/images/curl-jenkins-pipeline/05-jsonslurper.jpg"><div class="img-lazyload-container" style="width:1045px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/curl-jenkins-pipeline/05-jsonslurper.jpg" height="180" width="1045" style="padding-top:17.22488038277512%"></div></a></div></div></div></div></td></tr></table></div><div class="openblock text-center"><div class="content"><div class="imageblock img-fluid shadow d-inline-block p-2"><div class="content"><a class="image" href="/images/curl-jenkins-pipeline/06-jsonslurper-response.jpg"><div class="img-lazyload-container" style="width:1046px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/curl-jenkins-pipeline/06-jsonslurper-response.jpg" height="248" width="1046" style="padding-top:23.709369024856596%"></div></a></div></div></div></div></div></div><div class="sect1"><h2 id="using-jq-to-parse-the-response">Using <code>jq</code> to parse the response</h2><div class="sectionbody"><div class="paragraph"><p>There is an alternative, and it is usually a more recommended way to parse and extract values from the JSON data - the <code>jq</code> command-line tool. All you have to do is to make sure that the <code>jq</code> is installed on the Jenkins node that executes the pipeline.</p></div><div class="paragraph"><p>Let&#8217;s take a look at how we can use it to extract the same information from the JSON response.</p></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content"><div class="paragraph"><p>In the below example, I want re-use the <code>response</code> variable that stores the JSON response body, and keep checking the <code>code</code> variable if the status was <code>200</code>. To make this use case working, I need to echo the response body and pipe it with the <code>jq</code> command.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">sh(script: "echo '$response' | jq -r ...", returnStdout: true)</code></pre></div></div><div class="paragraph"><p>However, it is a common pattern to pipe <code>curl</code> output directly as an input for the <code>jq</code> command:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">sh(script: "curl -s ... | jq -r ...", returnStdout: true)</code></pre></div></div></td></tr></table></div><div class="listingblock"><div class="title">Listing 5. Jenkinsfile</div><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">pipeline &#123;
    agent any

    stages &#123;
        stage("Using curl example") &#123;
            steps &#123;
                script &#123;
                    final String url = "http://localhost:8080/job/Demos/job/maven-pipeline-demo/job/sdkman/2/api/json"

                    withCredentials([usernameColonPassword(credentialsId: "jenkins-api-token", variable: "API_TOKEN")]) &#123;
                        final def (String response, int code) =
                            sh(script: "curl -s -w '\\n%&#123;response_code&#125;' -u $API_TOKEN $url", returnStdout: true)
                                .trim()
                                .tokenize("\n")

                        echo "HTTP response status code: $code"

                        if (code == 200) &#123;
                            def executingTimeMillis = sh(script: "echo '$response' | jq -r '.actions[] | select(._class == \"jenkins.metrics.impl.TimeInQueueAction\") | .executingTimeMillis'", returnStdout: true).trim()

                            echo "executingTimeMillis = $executingTimeMillis"
                        &#125;
                    &#125;
                &#125;
            &#125;
        &#125;
    &#125;
&#125;</code></pre></div></div><div class="openblock text-center"><div class="content"><div class="imageblock img-fluid shadow d-inline-block p-2"><div class="content"><a class="image" href="/images/curl-jenkins-pipeline/07-jq.jpg"><div class="img-lazyload-container" style="width:1048px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/curl-jenkins-pipeline/07-jq.jpg" height="289" width="1048" style="padding-top:27.576335877862597%"></div></a></div></div></div></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">You can learn more about <code>jq</code> from my <strong class="mark">jq cookbook</strong> <a href="https://e.printstacktrace.blog/jq-cookbook/" target="">blog posts series</a>.</td></tr></table></div></div></div><div class="sect1"><h2 id="bonus-a-few-more-useful-curl-parameters">Bonus: a few more useful <code>curl</code> parameters</h2><div class="sectionbody"><div class="paragraph"><p>The list of all available options and parameters that the <code>curl</code> command supports is enormous. You can find all of them in the <code>man curl</code> manual page. Below you can find a few more useful options you may want to use in your Jenkins pipeline.</p></div><div class="sect2"><h3 id="how-to-set-the-acceptapplicationjson-header">How to set the <code>Accept:application/json</code> header?</h3><div class="paragraph"><p>Some REST API endpoints support multiple content types. If this is your case, you will need to explicitly say what the content type you can accept is. For the JSON content type, you will need to pass the <code>-H "Accept: application/json"</code> parameter.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">sh(script: "curl -s <strong class="highlightcode">-H 'Accept:application/json'</strong> $url", returnStdout: true).trim()</code></pre></div></div></div><div class="sect2"><h3 id="how-to-store-and-send-cookies-from-a-file">How to store and send cookies from a file?</h3><div class="paragraph"><p>Cookies are useful for storing temporary information. By default, <code>curl</code> makes all requests in a stateless manner. If you want to store cookies coming with the response, and then send them back with the following request, you may want to add <code>-c cookies.txt -b cookies.txt</code> parameters.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">sh(script: "curl -s <strong class="highlightcode">-c cookies.txt -b cookies.txt</strong> $url", returnStdout: true).trim()</code></pre></div></div></div><div class="sect2"><h3 id="how-to-handle-redirects-e-g-from-http-to-https">How to handle redirects (e.g. from <code>http</code> to <code>https</code>)?</h3><div class="paragraph"><p>If you want to instruct the <code>curl</code> command to follow redirects, you need to add <code>-L</code> parameter.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">sh(script: "curl -s <strong class="highlightcode">-L</strong> $url", returnStdout: true).trim()</code></pre></div></div></div><div class="sect2"><h3 id="how-to-retry-on-connection-refused">How to retry on connection refused?</h3><div class="paragraph"><p>The first <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing">fallacy of the distributed computing</a> says that <em>"The network is reliable."</em> We all know it is not. The <code>curl</code> command allows you to perform a simple retry mechanism on connection refused error. For instance, if you want to retry up to 10 times with the 6 seconds delay between every retry, you need to add the following parameters: <code>--retry-connrefused --retry 10 --retry-delay 6</code></p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">sh(script: "curl -s <strong class="highlightcode">--retry-connrefused --retry 10 --retry-delay 6</strong> $url", returnStdout: true).trim()</code></pre></div></div><div class="paragraph"><p></p><div class="youtube-widget py-3"><div class="container"><div class="row youtube-row"><div class="col-12 col-lg-4 text-lg-left text-center mb-lg-0 mb-4"><a class="thumb gatr d-inline-block" target="_blank" rel="noopener" href="https://youtu.be/Ei_Nk14vruE" data-time="13:45" data-type="youtube" data-name="Jenkins Declarative Pipeline vs Scripted Pipeline - 4 key differences | #jenkinspipeline"><img class="img-fluid shadow" data-lazy="https://i3.ytimg.com/vi/Ei_Nk14vruE/mqdefault.jpg"></a></div><div class="col-12 col-lg-8"><h5 class="m-0 p-0 mb-3 text-lg-left text-center"><a class="gatr" target="_blank" rel="noopener" href="https://youtu.be/Ei_Nk14vruE" data-type="youtube" data-name="Jenkins Declarative Pipeline vs Scripted Pipeline - 4 key differences | #jenkinspipeline">Jenkins Declarative Pipeline vs Scripted Pipeline - 4 key differences | #jenkinspipeline</a></h5><ul class="youtube-meta"><li><i class="fa fa-youtube mr-1"></i><span>YouTube</span></li><li>5k views</li><li>2.5k subscribers</li></ul><p class="sans-serif small text-lg-left text-justify">Jenkins Pipeline as a code is a new standard for defining continuous integration and delivery pipelines in Jenkins. The scripted pipeline was the first implementation of the pipeline as a code standard. The later one, the declarative pipeline, slowly becomes a standard of how Jenkins users define their pipeline logic. In this tutorial video, I explain what are four major differences between Jenkins declarative pipeline and the scripted one. Enjoy and don't forget to like and comment on the video! <a class="gatr font-weight-bold" target="_blank" rel="noopener" href="https://youtu.be/Ei_Nk14vruE" data-type="youtube" data-name="Jenkins Declarative Pipeline vs Scripted Pipeline - 4 key differences | #jenkinspipeline">Watch&nbsp;now&nbsp;&raquo;</a></p></div></div></div></div><p></p></div></div></div></div></div></article><section id="share"><div class="container pb-5"><div class="row justify-content-between align-items-center"><div class="col-lg"><p class="font-size-5 text-uppercase mb-0">Did you like this article?</p><h3 class="mb-lg-0 mt-0">Consider buying me a coffee</h3></div><div class="col-auto buttons"><div class="pt-lg-4"><a class="align-middle mr-2 gatr" href="/buy-me-a-coffee/" target="_blank"><img data-lazy="/images/buy-me-a-coffee.png" height="32"></a><iframe class="align-middle gatr" src="https://github.com/sponsors/wololock/button" title="Sponsor wololock" height="35" width="116" style="border:0"></iframe></div></div></div></div></section><section id="related" data-debug="Scrolled to related posts"><div class="featured-post py-5"><div class="container py-3"><div class="row"><div class="col-12"><div class="row"><div class="col-lg-8 order-0"><div class="pr-5"><p class="subtitle m-0 p-0"><a class="category" href="/jq-cookbook/">jq cookbook</a></p><h3 class="mt-0 mb-2">Continue reading: <a href="/how-to-convert-json-to-csv-from-the-command-line/">"How to convert JSON to CSV from the command-line?"</a></h3><div class="my-4"><div class="paragraph"><p>Are you looking for an easy and fast way to convert a JSON file to a CSV one? In this blog post, I will show you how you can use <code>jq</code> command-line tool to do exactly that.</p></div><a href="/how-to-convert-json-to-csv-from-the-command-line/">Read more<i class="fas fa-arrow-right ml-2"></i></a></div><ul class="post-meta-extended"><li class="d-none d-lg-inline-block"><a href="/about"><img class="rounded-circle" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200" height="52" width="52" style="margin-top:-24px"></a></li><li><div class="small">Author</div><div class="font-weight-bold"><a href="/about">Szymon Stepniak</a></div></li><li><div class="small">Published</div><div class="font-weight-bold"><time datetime="2020-08-25T18:44:31.000Z">Aug 25, 2020</time></div></li><li><div class="small">Reading time</div><div class="font-weight-bold">3 minutes</div></li><li><div class="small">Discussion</div><div class="font-weight-bold"><a href="https://e.printstacktrace.blog/how-to-convert-json-to-csv-from-the-command-line/#disqus_thread">0 Comments</a></div></li></ul></div></div><div class="col-lg-4 order-1 d-none d-lg-block"><a href="/how-to-convert-json-to-csv-from-the-command-line/"><img class="img-fluid rounded" data-lazy="/images/cards/6.png" style="margin-bottom:-300px"></a></div></div></div></div></div></div><div class="remaining"><div class="container py-5"><div class="row"><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="12 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/6.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">Parsing JSON in command-line with jq: basic filters and functions (part 1)</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/parsing-json-in-command-line-with-jq-basic-filters-and-functions-part-1/"></a></div></div></div><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="4 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/4.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">How to time out Jenkins Pipeline stage and keep the pipeline running?</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/how-to-time-out-jenkins-pipeline-stage-and-keep-the-pipeline-running/"></a></div></div></div><div class="col-md-4"><div class="card card-sm rounded border-0 card-post" data-read="1 min read"><div class="card-header p-0 position-relative rounded"><img class="card-img-top rounded" data-lazy="/images/cards/3.png"><div class="card-img-overlay d-flex align-items-end p-3 rounded"><h4 class="card-title">Jenkins Declarative Pipeline with the dynamic agent - how to configure it?</h4></div><div class="mask rounded"></div></div><div class="card-body small p-1"><a class="stretched-link" href="/jenkins-declarative-pipeline-dynamic-agent/"></a></div></div></div></div></div></div></section><section id="comments"><div class="container py-5" data-debug="Scrolled to comments"><h2 class="disqus-comment-count" data-disqus-url="https://e.printstacktrace.blog/how-to-catch-curl-response-in-jenkins-pipeline/">0 Comments</h2><div class="row"><div class="col-12 col-lg-3 order-lg-1 order-0"><div class="sticky-top" style="top:40px"><a class="gatr" href="https://www.jdoqocy.com/click-100191173-10952823" data-type="banner" data-name="grammarly-01" target="_blank"><img class="d-none img-fluid d-lg-inline-block" data-lazy="/images/yml/grammarly-tower.png"></a></div></div><div class="col-12 col-lg-9 order-0 order-lg-0 order-1"><div id="disqus_thread"></div></div></div></div><script>const loadDisqus=e=>{var s,r;t=document,(s=t.createElement("script")).src="https://"+e+".disqus.com/embed.js",s.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(s)},disqusObserver=new IntersectionObserver(e=>{e.forEach(e=>{var t,s,r;e.intersectionRatio>0&&(t="eprintstacktrace",s=document,(r=s.createElement("script")).src="https://"+t+".disqus.com/embed.js",r.setAttribute("data-timestamp",+new Date),(s.head||s.body).appendChild(r),disqusObserver.unobserve(e.target))})});disqusObserver.observe(document.getElementById("disqus_thread"))</script></section></main><footer id="footer" data-debug="Scrolled to footer"><div class="container py-3 pt-5"><div class="row"><div class="col-12 col-lg-3"><h5>Popular categories</h5><ul class="list-unstyled list-categories"><li class="mb-2"><a class="gatr" href="/groovy-cookbook/" data-type="footer-category" data-name="Groovy Cookbook">Groovy Cookbook<span class="count ml-2 text-muted small">28</span></a></li><li class="mb-2"><a class="gatr" href="/jenkins-pipeline-cookbook/" data-type="footer-category" data-name="Jenkins Pipeline Cookbook">Jenkins Pipeline Cookbook<span class="count ml-2 text-muted small">9</span></a></li><li class="mb-2"><a class="gatr" href="/programmers-bookshelf/" data-type="footer-category" data-name="Programmer's Bookshelf">Programmer's Bookshelf<span class="count ml-2 text-muted small">6</span></a></li><li class="mb-2"><a class="gatr" href="/micronaut-cookbook/" data-type="footer-category" data-name="Micronaut Cookbook">Micronaut Cookbook<span class="count ml-2 text-muted small">4</span></a></li><li class="mb-2"><a class="gatr" href="/ratpack-cookbook/" data-type="footer-category" data-name="Ratpack Cookbook">Ratpack Cookbook<span class="count ml-2 text-muted small">4</span></a></li><li class="mb-2"><a class="gatr" href="/learning-java/" data-type="footer-category" data-name="Learning Java">Learning Java<span class="count ml-2 text-muted small">4</span></a></li><li class="mb-2"><a class="gatr" href="/jq-cookbook/" data-type="footer-category" data-name="jq cookbook">jq cookbook<span class="count ml-2 text-muted small">3</span></a></li><li class="mb-2"><a class="gatr" href="/how-to/" data-type="footer-category" data-name="How to">How to<span class="count ml-2 text-muted small">3</span></a></li><li class="mb-2"><a class="gatr" href="/blog-reports/" data-type="footer-category" data-name="Blog Reports">Blog Reports<span class="count ml-2 text-muted small">2</span></a></li></ul></div><div class="col-12 col-lg-5 latest-posts"><h5 class="mb-4">Latest posts</h5><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/merging-json-files-recursively-in-the-command-line/" data-type="latest-sidebar" data-name="Merging JSON files recursively in the command-line"><img class="rounded" src="/images/icons/jq-merge-json.jpg" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/merging-json-files-recursively-in-the-command-line/" data-type="latest-sidebar" data-name="Merging JSON files recursively in the command-line">Merging JSON files recursively in the command-line</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-11-05T22:14:35.000Z">November 5, 2020</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/merging-json-files-recursively-in-the-command-line/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/jenkins-declarative-pipeline-dynamic-agent/" data-type="latest-sidebar" data-name="Jenkins Declarative Pipeline with the dynamic agent - how to configure it?"><img class="rounded" src="/images/icons/50.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/jenkins-declarative-pipeline-dynamic-agent/" data-type="latest-sidebar" data-name="Jenkins Declarative Pipeline with the dynamic agent - how to configure it?">Jenkins Declarative Pipeline with the dynamic agent - how to configure it?</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-09-27T07:32:11.000Z">September 27, 2020</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/jenkins-declarative-pipeline-dynamic-agent/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/groovy-ecosystem-usage-report-2020/" data-type="latest-sidebar" data-name="Groovy Ecosystem Usage Report (2020)"><img class="rounded" src="/images/icons/3.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/groovy-ecosystem-usage-report-2020/" data-type="latest-sidebar" data-name="Groovy Ecosystem Usage Report (2020)">Groovy Ecosystem Usage Report (2020)</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-09-13T05:40:19.000Z">September 13, 2020</time></li><li>4 min. read</li><li><a href="https://e.printstacktrace.blog/groovy-ecosystem-usage-report-2020/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/how-to-convert-json-to-csv-from-the-command-line/" data-type="latest-sidebar" data-name="How to convert JSON to CSV from the command-line?"><img class="rounded" src="/images/icons/4.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/how-to-convert-json-to-csv-from-the-command-line/" data-type="latest-sidebar" data-name="How to convert JSON to CSV from the command-line?">How to convert JSON to CSV from the command-line?</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-08-25T18:44:31.000Z">August 25, 2020</time></li><li>3 min. read</li><li><a href="https://e.printstacktrace.blog/how-to-convert-json-to-csv-from-the-command-line/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/5-common-jenkins-pipeline-mistakes/" data-type="latest-sidebar" data-name="5 Common Jenkins Pipeline Mistakes"><img class="rounded" src="/images/icons/1.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/5-common-jenkins-pipeline-mistakes/" data-type="latest-sidebar" data-name="5 Common Jenkins Pipeline Mistakes">5 Common Jenkins Pipeline Mistakes</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-08-24T10:53:13.000Z">August 24, 2020</time></li><li>1 min. read</li><li><a href="https://e.printstacktrace.blog/5-common-jenkins-pipeline-mistakes/#disqus_thread">0 Comments</a></li></ul></div></div></div><div class="media align-items-center pb-1 mb-2"><a class="d-block gatr" href="/how-to-merge-two-maps-in-groovy/" data-type="latest-sidebar" data-name="How to merge two maps in Groovy?"><img class="rounded" src="/images/icons/28.png" width="64"></a><div class="media-body pl-2 ml-1"><a class="gatr small font-weight-bold" href="/how-to-merge-two-maps-in-groovy/" data-type="latest-sidebar" data-name="How to merge two maps in Groovy?">How to merge two maps in Groovy?</a><div class="text-muted"><ul class="post-meta"><li><time datetime="2020-07-17T18:11:17.000Z">July 17, 2020</time></li><li>6 min. read</li><li><a href="https://e.printstacktrace.blog/how-to-merge-two-maps-in-groovy/#disqus_thread">0 Comments</a></li></ul></div></div></div></div><div class="col-12 col-lg-4"><h5>Popular tags</h5><div class="tags-cloud"><a href="/t/affiliate/" style="font-size:.8em;color:#6881a5">affiliate</a> <a href="/t/async/" style="font-size:.8em;color:#778196">async</a> <a href="/t/benchmark/" style="font-size:.8em;color:#6f819d">benchmark</a> <a href="/t/book/" style="font-size:.8em;color:#6081ac">book</a> <a href="/t/cicd/" style="font-size:.8em;color:#5082ba">cicd</a> <a href="/t/curl/" style="font-size:.8em;color:#6f819d">curl</a> <a href="/t/devops/" style="font-size:.8em;color:#5882b3">devops</a> <a href="/t/docker/" style="font-size:.8em;color:#6f819d">docker</a> <a href="/t/github/" style="font-size:.8em;color:#778196">github</a> <a href="/t/graalvm/" style="font-size:.8em;color:#5082ba">graalvm</a> <a href="/t/grails/" style="font-size:.8em;color:#778196">grails</a> <a href="/t/groovy/" style="font-size:.8em;color:#3982d0">groovy</a> <a href="/t/haskell/" style="font-size:.8em;color:#778196">haskell</a> <a href="/t/java/" style="font-size:.8em;color:#4182c9">java</a> <a href="/t/java-8/" style="font-size:.8em;color:#778196">java-8</a> <a href="/t/jenkins/" style="font-size:.8em;color:#4982c2">jenkins</a> <a href="/t/jenkins-pipeline/" style="font-size:.8em;color:#4982c2">jenkins-pipeline</a> <a href="/t/jmh/" style="font-size:.8em;color:#6881a5">jmh</a> <a href="/t/jq/" style="font-size:.8em;color:#6f819d">jq</a> <a href="/t/json/" style="font-size:.8em;color:#6f819d">json</a> <a href="/t/junit/" style="font-size:.8em;color:#778196">junit</a> <a href="/t/learning/" style="font-size:.8em;color:#6f819d">learning</a> <a href="/t/micronaut/" style="font-size:.8em;color:#6081ac">micronaut</a> <a href="/t/native-image/" style="font-size:.8em;color:#6881a5">native-image</a> <a href="/t/non-blocking/" style="font-size:.8em;color:#6f819d">non-blocking</a> <a href="/t/ratpack/" style="font-size:.8em;color:#5082ba">ratpack</a> <a href="/t/reactive-programming/" style="font-size:.8em;color:#778196">reactive-programming</a> <a href="/t/reading/" style="font-size:.8em;color:#778196">reading</a> <a href="/t/recursion/" style="font-size:.8em;color:#778196">recursion</a> <a href="/t/review/" style="font-size:.8em;color:#6081ac">review</a> <a href="/t/rxjava/" style="font-size:.8em;color:#778196">rxjava</a> <a href="/t/sdkman/" style="font-size:.8em;color:#6f819d">sdkman</a> <a href="/t/spock/" style="font-size:.8em;color:#6f819d">spock</a> <a href="/t/stackoverflow/" style="font-size:.8em;color:#778196">stackoverflow</a> <a href="/t/string/" style="font-size:.8em;color:#778196">string</a> <a href="/t/unit-test/" style="font-size:.8em;color:#6f819d">unit-test</a></div><div class="mt-5"><a class="gatr" href="https://amzn.to/35QTnYE" data-type="banner" data-name="audible-01" target="_blank"><img class="d-none img-fluid d-lg-inline-block d-md-inline-block" data-lazy="/images/yml/audible-01.png"></a></div></div></div></div><div class="border-top border-dark py-4 footer-bottom"><div class="container"><div class="justify-content-between d-flex"><div class="links"><ul><li><a class="gatr" href="/about/" data-type="footer-link" data-name="About">About</a></li><li><a class="gatr" href="/archives/" data-type="footer-link" data-name="Archives">Archives</a></li><li><a class="gatr" href="/resources/" data-type="footer-link" data-name="Resources">Resources</a></li><li><a class="gatr" href="/privacy-policy/" data-type="footer-link" data-name="Privacy Policy">Privacy Policy</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://kit.co/wololock" data-type="footer-link" data-name="My Kit">My Kit</a></li><li><a class="gatr" target="_blank" rel="noopener" href="https://feeds.feedburner.com/Eprintstacktracenet" data-type="footer-link" data-name="RSS">RSS</a></li></ul></div><div class="socials"><ul class="social-links"><li><a target="_blank" rel="noopener" href="https://twitter.com/wololock"><i class="fa fa-twitter"></i></a></li><li><a target="_blank" rel="noopener" href="https://youtube.com/eprintstacktrace"><i class="fa fa-youtube"></i></a></li><li><a target="_blank" rel="noopener" href="https://github.com/wololock"><i class="fa fa-github"></i></a></li><li><a target="_blank" rel="noopener" href="https://stackoverflow.com/users/2194470/szymon-stepniak?tab=profile"><i class="fa fa-stack-overflow"></i></a></li><li><a target="_blank" rel="noopener" href="https://www.linkedin.com/in/szymon-st%C4%99pniak-9a0b1630/"><i class="fa fa-linkedin"></i></a></li></ul></div></div></div></div></footer><script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/48c5da59c9.js" crossorigin="anonymous" async></script><script async id="cookiebanner" src="//cdnjs.cloudflare.com/ajax/libs/cookie-banner/1.2.2/cookiebanner.min.js" data-moreinfo="/privacy-policy/" data-message="This blog uses cookies to enhance your experience. By continuing to visit it you agree to its use of cookies." data-link="#5fc4ff" data-font-family="Lora,serif" data-font-size="16px" data-bg="#1d2b36"></script><script src="/js/main.js?v=12"></script><script src="/js/highlightjs/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad()</script><script async id="dsq-count-scr" src="//eprintstacktrace.disqus.com/count.js"></script><script>!function(e,a,t,n,c,i,g){e.GoogleAnalyticsObject=c,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,i=a.createElement(t),g=a.getElementsByTagName(t)[0],i.async=1,i.src="//www.google-analytics.com/analytics.js",g.parentNode.insertBefore(i,g)}(window,document,"script",0,"ga"),ga("create","UA-42400890-5","auto"),ga("send","pageview"),jQuery(document).on("mousedown",".gatr",(function(e){var a=jQuery(this),t=a.attr("data-type"),n=a.attr("data-name"),c=1===e.which?"click":2===e.which?"middle-click":"right-click";return ga("send","event",t,c,n),!1}))</script><script>!function(){"use strict";function r(e){var t=e.getAttribute("data-original"),n=new Image;n.onload=function(){e.setAttribute("src",t),e.style.paddingTop=""},n.src=t}document.addEventListener("DOMContentLoaded",function(){var t,e,n,i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));i.length&&("undefined"!=typeof IntersectionObserver?(t=new IntersectionObserver(function(e,t){e.filter(function(e){return e.isIntersecting}).forEach(function(e){r(e.target),t.unobserve(e.target)})}),i.forEach(function(e){t.observe(e)})):(n=function(){clearTimeout(e),e=setTimeout(function(){return(i=i.filter(function(e){return!e.src})).length?void i.filter(function(e){e.getBoundingClientRect().top<window.innerHeight&&r(e)}):(window.removeEventListener("scroll",n),void window.removeEventListener("resize",n))},100)},window.addEventListener("scroll",n),window.addEventListener("resize",n),n()))},!1)}();</script></body></html>