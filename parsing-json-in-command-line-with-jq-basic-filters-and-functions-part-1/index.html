<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="author" content="Szymon Stepniak"><meta name="robots" content="index, follow"><title>Parsing JSON in command-line with jq: basic filters and functions (part 1)</title><meta name="description" content="Have you ever wondered, what is the most convenient way to parse JSON data in the Unix/Linux command line? For instance, how to parse some information from the curl JSON response? Grep? No, thank you. There is a b..."><meta name="keywords" content="devops,rest,http,curl,jq,json,linux"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//stackpath.bootstrapcdn.com"><link rel="dns-prefetch" href="//disqus.com"><link rel="dns-prefetch" href="//c.disquscdn.com"><link href="//fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;700&amp;display=swap" rel="stylesheet"><link href="//fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&amp;display=swap" rel="stylesheet"><link href="//fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400&amp;display=swap" rel="stylesheet"><link href="//fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;1,400&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"><link rel="shortcut icon" type="image/png" href="/favicon_new.png"><link rel="stylesheet" href="/css/highlightjs.css"><link rel="stylesheet" href="/css/main.css?v=52"><link rel="canonical" href="https://e.printstacktrace.blog/parsing-json-in-command-line-with-jq-basic-filters-and-functions-part-1/"><meta name="description" content="Have you ever wondered, what is the most convenient way to parse JSON data in the Unix&#x2F;Linux command line? For instance, how to parse some information from the curl JSON response? Grep? No, thank you."><meta property="og:type" content="article"><meta property="og:title" content="Parsing JSON in command-line with jq: basic filters and functions (part 1)"><meta property="og:url" content="https://e.printstacktrace.blog/parsing-json-in-command-line-with-jq-basic-filters-and-functions-part-1/"><meta property="og:site_name" content="Szymon Stepniak - Freelance Groovy Developer &amp; DevOps"><meta property="og:description" content="Have you ever wondered, what is the most convenient way to parse JSON data in the Unix&#x2F;Linux command line? For instance, how to parse some information from the curl JSON response? Grep? No, thank you."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://e.printstacktrace.blog/images/og/curl-jq.jpg"><meta property="article:published_time" content="2020-05-24T16:28:32.000Z"><meta property="article:modified_time" content="2020-05-25T08:31:56.000Z"><meta property="article:author" content="Szymon Stepniak"><meta property="article:tag" content="devops"><meta property="article:tag" content="rest"><meta property="article:tag" content="http"><meta property="article:tag" content="curl"><meta property="article:tag" content="jq"><meta property="article:tag" content="json"><meta property="article:tag" content="linux"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://e.printstacktrace.blog/images/og/curl-jq.jpg"><meta name="twitter:creator" content="@wololock"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://e.printstacktrace.blog/parsing-json-in-command-line-with-jq-basic-filters-and-functions-part-1/"},"headline":"Parsing JSON in command-line with jq: basic filters and functions (part 1)","image":{"@type":"ImageObject","url":"https://e.printstacktrace.blog/images/og/curl-jq.jpg"},"datePublished":"2020-05-24T16:28:32.000Z","dateModified":"2020-05-25T08:31:56.000Z","author":{"@type":"Person","name":"Szymon Stepniak"},"publisher":{"@type":"Organization","name":"Szymon Stepniak - Freelance Groovy Developer & DevOps","logo":{"@type":"ImageObject","url":"https://e.printstacktrace.blog/images/site-logo.jpg","height":60,"width":600}},"description":"Have you ever wondered, what is the most convenient way to parse JSON data in the Unix/Linux command line? For instance, how to parse some information from the curl JSON response? Grep? No, thank you. There is a better tool for that. And it&#8217;s called jq.","keywords":"devops,rest,http,curl,jq,json,linux"}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Szymon Stepniak - Freelance Groovy Developer & DevOps" type="application/atom+xml">
<style>.img-lazyload-container{overflow:hidden;max-width:100%}.img-lazyload-container img{max-width:100%;display:block;height:auto;transition:opacity .5s ease-in-out}.img-lazyload-container img:not([src]){height:0;opacity:0}</style></head><body class="layout-post"><header class="fixed-top" id="header"><div class="container-fluid px-md-auto px-0"><nav class="navbar navbar-expand-lg"><h3 class="logo mr-auto position-relative">e.printstacktrace.blog<a class="stretched-link" href="/"></a></h3><span class="badge badge-info badge-pill h5 ml-2">NEW!</span><button class="navbar-toggler" data-toggle="collapse" data-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="mainNav"><ul class="navbar-nav ml-lg-auto text-center text-md-left d-block d-lg-flex"><li class="nav-item"><a class="nav-link" href="/">Start here</a></li><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/support-me">Support me</a></li><li class="nav-item"><a class="nav-link" href="/archives">Archives</a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link" href="https://twitter.com/wololock" target="_blank" rel="noopener"><em class="fa fa-twitter"></em></a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link" href="https://github.com/wololock" target="_blank" rel="noopener"><em class="fa fa-github"></em></a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link" href="https://stackoverflow.com/users/2194470/szymon-stepniak" target="_blank" rel="noopener"><em class="fa fa-stack-overflow"></em></a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link" href="https://youtube.com/c/eprintstacktrace" target="_blank" rel="noopener"><em class="fa fa-youtube"></em></a></li></ul></div></nav></div></header><main id="page-post" role="main" itemscope itemtype="http://schema.org/Article"><header class="jumbotron text-center pb-5" style="background-image:url(/images/jq-bg.jpg)"><div class="mask"></div><div class="container pt-5 pb-1"><a class="category mark" href="/jq-cookbook/">jq cookbook</a><h1 class="mt-2 mt-md-0" itemprop="name">Parsing JSON in command-line with jq: basic filters and functions (part 1)</h1><section class="post-meta"><ul><li><time datetime="2020-05-24T16:28:32.000Z" itemprop="datePublished">May 24, 2020</time></li><li>13 min. read</li><li><a href="https://e.printstacktrace.blog/parsing-json-in-command-line-with-jq-basic-filters-and-functions-part-1/#disqus_thread">0 Comments</a></li></ul></section></div></header><article class="post-content" role="article" itemprop="articleBody"><div class="container"><div class="row"><div class="col-12 offset-0 col-md-10 offset-md-1 pt-4 pt-md-5"><div class="paragraph"><p>Have you ever wondered, what is the most convenient way to parse JSON data in the Unix/Linux command line? For instance, how to parse some information from the <code>curl</code> JSON response? Grep? No, thank you. There is a better tool for that. And it&#8217;s called <code>jq</code>.</p></div><a id="more"></a><div class="paragraph"><p>Welcome to the first episode of the <strong>jq cookbook</strong> series! The first episode is not about theory - we jump to the first exercise in just a second. I strongly encourage you to <a href="https://stedolan.github.io/jq/download/" target="_blank" rel="noopener">install <code>jq</code> command-line tool</a> in your operating system and follow me. There are some exciting things to learn today, and we are starting right now!</p></div><div id="toc" class="toc"><div id="toctitle" class="title">Table of Contents</div><ul class="sectlevel1"><li><a href="#introduction">Introduction</a></li><li><a href="#invoking-jq">Invoking <code>jq</code></a></li><li><a href="#processing-input-from-command-other-than-curl">Processing input from command other than <code>curl</code></a></li><li><a href="#extracting-fields-from-the-array">Extracting fields from the array</a></li><li><a href="#filtering-null-values-with-selectexpr-filter">Filtering <code>null</code> values with <code>select(expr)</code> filter</a></li><li><a href="#sorting-by-field-with-sort_byexpr-filter">Sorting by field with <code>sort_by(expr)</code> filter</a></li><li><a href="#limiting-the-size-of-the-result-with-limitnexpr-filter">Limiting the size of the result with <code>limit(n;expr)</code> filter</a></li><li><a href="#grouping-by-using-group_byexpr-filter">Grouping by using <code>group_by(expr)</code> filter</a></li><li><a href="#putting-it-all-together">Putting it all together</a></li></ul></div><div class="sect1"><h2 id="introduction">Introduction</h2><div class="sectionbody"><div class="paragraph"><p>In this blog post, I will use <a href="https://openlibrary.org/dev/docs/api/search" target="_blank" rel="noopener">openlibrary.org public Search API</a>. The reason for that is simple - it returns quite complex and interesting data we can process, and it still mimics a real-life example. I want to use this API to run a full-text search query. I&#8217;m going to use my last name as a search term - it is not a very popular Polish last name, so there shouldn&#8217;t be many results associated with it.</p></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">The JSON response used in this example is 3631 lines long. To keep all code samples clear, I will limit the JSON output to max. 10-15 lines. The original document can be found here - <span class="icon"><i class="fa fa-github"></i></span> <a href="https://gist.github.com/wololock/0ba478cfeb73b36c41c4f8c814111db3" target="_blank" rel="noopener">openlibrary.json</a>.</td></tr></table></div><div class="listingblock"><div class="title">Listing 1. An example of openlibrary.org full-text search query</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ curl -s "http://openlibrary.org/search.json?q=st%C4%99pniak"
{
 "start": 0,
 "num_found": 44,
 "numFound": 44,
 "docs": [
    ...
  ]
}</code></pre></div></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">My last name contains Polish letter <code>ę</code>, which gets encoded as <code>%C4%99</code>.</td></tr></table></div></div></div><div class="sect1"><h2 id="invoking-jq">Invoking <code>jq</code></h2><div class="sectionbody"><div class="paragraph"><p>Once we have the JSON document to process, it&#8217;s time to invoke <code>jq</code> processor. The simplest way to do it is to pipe the output from the <code>curl</code> command to the <code>jq</code> input.</p></div><div class="listingblock"><div class="title">Listing 2. Pipe from <code>curl</code> to <code>jq</code> example.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ curl -s "http://openlibrary.org/search.json?q=st%C4%99pniak" | jq .</code></pre></div></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">The <code>.</code> in the <code>jq</code> filter means <strong>identity</strong>.</td></tr></table></div><div class="paragraph"><p>This simple pipe doesn&#8217;t do much, and <code>jq</code> just prints the JSON "as is." However, there is one difference when compared with the plain <code>curl</code> response. <code>jq</code> by default prints JSON document using "pretty" format, and it adds some basic colors.</p></div><div class="openblock text-center"><div class="content"><div class="imageblock img-responsive img-thumbnail"><div class="content"><a class="image" href="/images/curl-jq-basic-example.jpg"><div class="img-lazyload-container" style="width:1280px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/curl-jq-basic-example.jpg" height="351" width="1280" style="padding-top:27.421875%"></div></a></div><div class="title">Figure 1. Plain <code>curl</code> output on the left side. The simplest <code>jq .</code> output on the right side.</div></div></div></div></div></div><div class="sect1"><h2 id="processing-input-from-command-other-than-curl">Processing input from command other than <code>curl</code></h2><div class="sectionbody"><div class="paragraph"><p>Using pipes comes with huge benefits - it doesn&#8217;t matter what command produces the input. It means that we can forward the <code>curl</code> command output to a file, and then use this file to produce input for the <code>jq</code> processor. This might be very useful when we do experiments, and we don&#8217;t want to download the same JSON document over and over again.</p></div><div class="listingblock"><div class="title">Listing 3. Forwarding <code>curl</code> output to the openlibrary.json file</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ curl -s "http://openlibrary.org/search.json?q=st%C4%99pniak" &gt; openlibrary.json</code></pre></div></div><div class="paragraph"><p>Once we captured the input, we can e.g., pipe commands <code>cat</code> and <code>jq</code> to produce the same result, but this time without involving the call over the network.</p></div><div class="listingblock"><div class="title">Listing 4. Pipe from <code>cat</code> to <code>jq</code> example.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ cat openlibrary.json | jq .</code></pre></div></div><div class="paragraph"><p>However, using <code>cat</code> is not necessary if we want to read the input from a file - <code>jq</code> takes a file as an argument as well. In the all upcoming examples, I will use this syntax to save a few characters.</p></div><div class="listingblock"><div class="title">Listing 5. Taking input from the file example.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq . openlibrary.json</code></pre></div></div></div></div><div class="sect1"><h2 id="extracting-fields-from-the-array">Extracting fields from the array</h2><div class="sectionbody"><div class="paragraph"><p>Let&#8217;s start processing the data with some real filters. The document we took from the openlibrary.org Search API has a list under the <code>docs</code> key. This list contains all documents matching the search term. Every document is described using multiple fields, but we are interested in the <code>title</code>, <code>author_name</code>, and <code>publish_year</code> only.</p></div><div class="paragraph"><p>The first filter we want to use is called <strong>array/object value iterator <code>.[]</code></strong>. This filter extracts values from the given array (or object), so the next filter in the pipeline gets applied to each element. In our case, we want to apply <code>.docs[]</code> filter to extract documents.</p></div><div class="listingblock"><div class="title">Listing 6. Applying array value iterator on the <code>docs</code> key.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '.docs[]' openlibrary.json
{
  "title_suggest": "Słownik tajemnych gwar przestępczych",
  "edition_key": [
    "OL1174034M"
  ],
  "isbn": [
    "9781859170069",
    "1859170064"
  ],
  ....</code></pre></div></div><div class="paragraph"><p>The next step is to extract only specific fields. <code>jq</code> filters support piping to apply new filters on top of the results from the previous ones. It uses the same <code>|</code> symbol, but pay attention to one significant difference - piping filters happens inside the <code>jq</code> argument string.</p></div><div class="listingblock"><div class="title">Listing 7. Piping <code>jq</code> filters to extract specific fields.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '.docs[] | {title,author_name,publish_year}' openlibrary.json
{
  "title": "Słownik tajemnych gwar przestępczych",
  "author_name": [
    "Klemens Stępniak"
  ],
  "publish_year": [
    1993
  ]
}
{
  "title": "EU adjustment to eastern enlargement",
  "author_name": null,
  "publish_year": [
    1998
  ]
}
...</code></pre></div></div><div class="paragraph"><p>Looks good. Every document got extracted to the new one, containing only three fields. However, <code>author_name</code> and <code>publish_year</code> seem to be arrays. We can update the filter to extract the first value from those arrays and store them as scalar values instead.</p></div><div class="listingblock"><div class="title">Listing 8. Transforming arrays to scalar values example.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '.docs[] | {title,author_name: .author_name[0], publish_year: .publish_year[0]}' openlibrary.json
{
  "title": "Słownik tajemnych gwar przestępczych",
  "author_name": "Klemens Stępniak",
  "publish_year": 1993
}
{
  "title": "EU adjustment to eastern enlargement",
  "author_name": null,
  "publish_year": 1998
}
...</code></pre></div></div><div class="paragraph"><p>I guess you already noticed that we can transform objects either by just referring to the field name (e.g. <code>title</code>) or by constructing the new field explicitly (e.g. <code>author_name: .author_name[0]</code>.)</p></div></div></div><div class="sect1"><h2 id="filtering-null-values-with-selectexpr-filter">Filtering <code>null</code> values with <code>select(expr)</code> filter</h2><div class="sectionbody"><div class="paragraph"><p>When I looked at the response, I noticed that some documents were missing either <code>author_name</code> or <code>publish_year</code>. We can exclude such documents from the final result using the <code>select(expr)</code> filter.</p></div><div class="listingblock"><div class="title">Listing 9. Filtering objects containing <code>null</code> values.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '.docs[] | {title,author_name: .author_name[0], publish_year: .publish_year[0]} | select(.author_name!=null and .publish_year!=null)' openlibrary.json
{
  "title": "Słownik tajemnych gwar przestępczych",
  "author_name": "Klemens Stępniak",
  "publish_year": 1993
}
{
  "title": "Integracja regionalna i transfer kapitału",
  "author_name": "Andrzej Stępniak",
  "publish_year": 1996
}
...</code></pre></div></div></div></div><div class="sect1"><h2 id="sorting-by-field-with-sort_byexpr-filter">Sorting by field with <code>sort_by(expr)</code> filter</h2><div class="sectionbody"><div class="paragraph"><p>Now let&#8217;s say we want to get the result in a specific order. What if we want to sort the final result by <code>publish_year</code>? <code>jq</code> offer the <code>sort_by(expr)</code> filter, but before we apply it, we need to make one modification. The <code>sort_by(expr)</code> filter works on arrays, and our current output is not an array. If you look closely, you will see that this is just a set of JSON documents printed one after another. We can transform it into a JSON array by wrapping our current long filter with square brackets - an array constructor.</p></div><div class="paragraph"><p>Compare the following example with the previous one and spot the difference.</p></div><div class="listingblock"><div class="title">Listing 10. Transforming set of JSON objects into a JSON array of objects using <code>[]</code> constructor.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '[.docs[] | {title,author_name: .author_name[0], publish_year: .publish_year[0]} | select(.author_name!=null and .publish_year!=null)]' openlibrary.json
[
  {
    "title": "Słownik tajemnych gwar przestępczych",
    "author_name": "Klemens Stępniak",
    "publish_year": 1993
  },
  {
    "title": "Integracja regionalna i transfer kapitału",
    "author_name": "Andrzej Stępniak",
    "publish_year": 1996
  },
  ...
]</code></pre></div></div><div class="paragraph"><p>Once we have a JSON array constructed, we can pipe <code>sort_by(.publish_year)</code> into our filter.</p></div><div class="listingblock"><div class="title">Listing 11. Sorting a JSON array of objects by specific field using <code>sort_by(expr)</code>.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '[.docs[] | {title,author_name: .author_name[0], publish_year: .publish_year[0]} | select(.author_name!=null and .publish_year!=null)] | sort_by(.publish_year)' openlibrary.json
[
  {
    "title": "Rada Portu i Dróg Wodnych w Wolnym Mieście Gdańsku.  Gdańsku",
    "author_name": "Henryk Stępniak",
    "publish_year": 1971
  },
  {
    "title": "Potrącenie w systemie polskiego prawa cywilnego",
    "author_name": "Lechosław Stępniak",
    "publish_year": 1975
  },
  {
    "title": "Uzdatnianie złomu poprodukcyjnego",
    "author_name": "Stanisław Stępniak",
    "publish_year": 1978
  },
  ...
]</code></pre></div></div><div class="paragraph"><p>By default, <code>sort_by(expr)</code> sorts objects in the ascending order. To sort objects in the descending order, we can pipe <code>reverse</code> filter after the <code>sort_by(expr)</code> one.</p></div><div class="listingblock"><div class="title">Listing 12. Sorting in the descending order.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '[.docs[] | {title,author_name: .author_name[0], publish_year: .publish_year[0]} | select(.author_name!=null and .publish_year!=null)] | sort_by(.publish_year) | reverse' openlibrary.json
[
  {
    "title": "Dziedzictwo archiwalne we współpracy Polski i Ukrainy",
    "author_name": "Władysław Stępniak",
    "publish_year": 2010
  },
  {
    "title": "Misja Służby Więziennej a jej zadania wobec aktualnej polityki karnej i oczekiwań społecznych",
    "author_name": "Polski Kongres Penitencjarny (4th 2008 Poznań, Poland)",
    "publish_year": 2008
  },
  {
    "title": "Czarny Bór",
    "author_name": "Władysław Stępniak",
    "publish_year": 2007
  },
  ...
]</code></pre></div></div></div></div><div class="sect1"><h2 id="limiting-the-size-of-the-result-with-limitnexpr-filter">Limiting the size of the result with <code>limit(n;expr)</code> filter</h2><div class="sectionbody"><div class="paragraph"><p>As the next step, we may want to limit the size of the result. Let&#8217;s say we want to get the newest three publications as a result. We can use <code>limit(n;expr)</code> filter, but we need to be aware of one thing. To limit the size of an array using this filter, we need to use an expression that extracts values from an array for iteration - <code>.[]</code>. Once <code>limit(n;expr)</code> limits the number of objects, it produces the output in the same format. It means that we don&#8217;t get an array but rather a set of separate results instead.</p></div><div class="listingblock"><div class="title">Listing 13. Applying <code>limit(3;.[])</code> filter.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '[.docs[] | {title,author_name: .author_name[0], publish_year: .publish_year[0]} | select(.author_name!=null and .publish_year!=null)] | sort_by(.publish_year)| reverse | limit(3;.[])' openlibrary.json
{
  "title": "Dziedzictwo archiwalne we współpracy Polski i Ukrainy",
  "author_name": "Władysław Stępniak",
  "publish_year": 2010
}
{
  "title": "Misja Służby Więziennej a jej zadania wobec aktualnej polityki karnej i oczekiwań społecznych",
  "author_name": "Polski Kongres Penitencjarny (4th 2008 Poznań, Poland)",
  "publish_year": 2008
}
{
  "title": "Czarny Bór",
  "author_name": "Władysław Stępniak",
  "publish_year": 2007
}</code></pre></div></div><div class="paragraph"><p>If we want to represent the result as a JSON array, we need to wrap <code>limit(n;expr)</code> filter with <code>[]</code> to construct an array again.</p></div><div class="listingblock"><div class="title">Listing 14. Final JSON array of the three latest documents.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '[.docs[] | {title,author_name: .author_name[0], publish_year: .publish_year[0]} | select(.author_name!=null and .publish_year!=null)] | sort_by(.publish_year)| reverse | [limit(3;.[])]' openlibrary.json
[
  {
    "title": "Dziedzictwo archiwalne we współpracy Polski i Ukrainy",
    "author_name": "Władysław Stępniak",
    "publish_year": 2010
  },
  {
    "title": "Misja Służby Więziennej a jej zadania wobec aktualnej polityki karnej i oczekiwań społecznych",
    "author_name": "Polski Kongres Penitencjarny (4th 2008 Poznań, Poland)",
    "publish_year": 2008
  },
  {
    "title": "Czarny Bór",
    "author_name": "Władysław Stępniak",
    "publish_year": 2007
  }
]</code></pre></div></div></div></div><div class="sect1"><h2 id="grouping-by-using-group_byexpr-filter">Grouping by using <code>group_by(expr)</code> filter</h2><div class="sectionbody"><div class="paragraph"><p>Let&#8217;s say we want to find out how many publications each author created. <code>jq</code> offers built-in <code>group_by(expr)</code> filter we can use. In our case, we will use <code>group_by(.author_name)</code> to group all publications by their authors.</p></div><div class="listingblock"><div class="title">Listing 15. Grouping results using <code>group_by(.author_name)</code> filter.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '[.docs[] | {title,author_name: .author_name[0], publish_year: .publish_year[0]} | select(.author_name!=null and .publish_year!=null)] | group_by(.author_name)' openlibrary.json
[
  [
    {
      "title": "Integracja regionalna i transfer kapitału",
      "author_name": "Andrzej Stępniak",
      "publish_year": 1996
    },
    {
      "title": "Promocja polskich podmiotów inwestycyjnych na obszarze Wspólnot Europejskich",
      "author_name": "Andrzej Stępniak",
      "publish_year": 1993
    },
    {
      "title": "Kwestia narodowa a społeczna na Śląsku Cieszyńskim pod koniec XIX i w początkach XX wieku, do 1920 roku",
      "author_name": "Andrzej Stępniak",
      "publish_year": 1986
    },
    {
      "title": "Polska-WE",
      "author_name": "Andrzej Stępniak",
      "publish_year": 1993
    }
  ],
  [
    {
      "title": "Kula jako symbol vanitas",
      "author_name": "Beata Purc-Stępniak",
      "publish_year": 2004
    }
  ],
  ....
]</code></pre></div></div><div class="paragraph"><p>As you can see now, <code>group_by(.author_name)</code> produced an array of arrays. It&#8217;s hard to say how many publications each author did from this document, so we might need to transform this output a bit.</p></div><div class="paragraph"><p>The next filter we need to apply is <code>.[]</code> to start iterating over the grouped arrays. We will pipe this iteration with a transformation that extracts <code>author_name</code> field from the first result using <code>{author_name: .[0].author_name}</code> filter. And as we seen before, <code>.[] | {author_name: .[0].author_name}</code> combination produces a set of results, so we need to wrap it with <code>[]</code> to construct an array.</p></div><div class="listingblock"><div class="title">Listing 16. Extracting <code>author_name</code> from the grouped result.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '[.docs[] | {title,author_name: .author_name[0], publish_year: .publish_year[0]} | select(.author_name!=null and .publish_year!=null)] | group_by(.author_name)| [.[] | {author_name: .[0].author_name}]' openlibrary.json
[
  {
    "author_name": "Andrzej Stępniak"
  },
  {
    "author_name": "Beata Purc-Stępniak"
  },
  {
    "author_name": "Colloquia Jerzy Skowronek dedicata (10th 2004 Warsaw, Poland)"
  },
  ....
]</code></pre></div></div><div class="paragraph"><p>That&#8217;s a good step forward - now we have author names extracted from the grouped result. The next step is to update the transformation filter to also produce the <code>count</code> field - a field containing the number of publications. There is a simple way to do it. The current transformation filter, <code>[.[] | {author_name: .[0].author_name}]</code>, iterates the nested arrays that contain all documents associated with the same author. It means that <code>.</code> (identity) in this filter refers to a list of objects, and that is why we extract the author name using <code>.[0].author_name</code> expression, which means: take the first object from the array and return its <code>author_name</code> value. We can use this array to count its size. In the <code>jq</code>, we have a filter called <code>length</code> that can be piped with an array to return its size. So in our case, an expression <code>. | lenght</code> used in the context of this transformation will return the size of an array, which represents the number of publications.</p></div><div class="listingblock"><div class="title">Listing 17. Extracting the number of publications using <code>length</code> filter.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '[.docs[] | {title,author_name: .author_name[0], publish_year: .publish_year[0]} | select(.author_name!=null and .publish_year!=null)] | group_by(.author_name)| [.[] | {author_name: .[0].author_name, count: . | length}]' openlibrary.json
[
  {
    "author_name": "Andrzej Stępniak",
    "count": 4
  },
  {
    "author_name": "Beata Purc-Stępniak",
    "count": 1
  },
  {
    "author_name": "Colloquia Jerzy Skowronek dedicata (10th 2004 Warsaw, Poland)",
    "count": 1
  },
  ....
]</code></pre></div></div><div class="paragraph"><p>Voila! <span class="icon"><i class="fa fa-smile-o"></i></span></p></div></div></div><div class="sect1"><h2 id="putting-it-all-together">Putting it all together</h2><div class="sectionbody"><div class="paragraph"><p>Let&#8217;s finish this experiment by putting all commands we have learned today together. We can add <code>sort_by(expr)</code> and <code>limit(n;expr)</code> to the latest query to produce the final result - an array of three authors that published the most documents.</p></div><div class="listingblock"><div class="title">Listing 18. Extracting the number of publications using <code>length</code> filter.</div><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ jq '[.docs[] | {title,author_name: .author_name[0], publish_year: .publish_year[0]} | select(.author_name!=null and .publish_year!=null)] | group_by(.author_name)| [.[] | {author_name: .[0].author_name, count: . | length}] | sort_by(.count) | reverse | [limit(3;.[])]' openlibrary.json
[
  {
    "author_name": "Władysław Stępniak",
    "count": 11
  },
  {
    "author_name": "Andrzej Stępniak",
    "count": 4
  },
  {
    "author_name": "Henryk Stępniak",
    "count": 3
  }
]</code></pre></div></div><div class="paragraph"><p>And that&#8217;s it for today. In the next episode, we will dive deeper into more advanced filters and functions that <code>jq</code> offers. Stay tuned! <span class="icon"><i class="fa fa-smile-o"></i></span></p></div><div class="paragraph"><p></p><div class="youtube-box py-4"><div class="container"><div class="row"><div class="col-12 col-md-6 offset-md-1 offset-0 pr-md-5 order-1 order-md-0"><h4>Parsing JSON from curl with jq: sort_by, group_by, limit (part 1) | #jq #json #curl</h4><p class="desc">In this video, I show you how to use the jq command-line to parse and transform a JSON response to the desired format. I use openlibrary.org Search API to get a complex JSON document (~3600 lines) using curl command for further parsing using jq. In the first step, we extract three fields for each document (title, author, publishing year) and then we continue transforming the JSON - we sort it, we limit the number of elements, and last but not least, we group elements by the author name.</p><p class="text-center pt-3"><a class="btn btn-danger text-white" href="https://www.youtube.com/watch?v=EIhLl9ebeiA" target="_blank" rel="noopener" data-type="youtube" data-name="Parsing JSON from curl with jq: sort_by, group_by, limit (part 1) | #jq #json #curl">Watch now</a></p></div><div class="col-12 col-md-4 order-0 order-md-1"><div class="card shadow mb-4 mb-md-0"><div class="card-header" itemprop="image" style="background-image:url(https://i3.ytimg.com/vi/EIhLl9ebeiA/mqdefault.jpg)"><div class="time">9:44</div><em class="fa fa-youtube"></em></div><a class="stretched-link gatr" href="https://www.youtube.com/watch?v=EIhLl9ebeiA" target="_blank" rel="noopener" data-type="youtube" data-name="Parsing JSON from curl with jq: sort_by, group_by, limit (part 1) | #jq #json #curl"></a></div></div></div></div></div><p></p></div><h2 id="thank-you" class="discrete">Thank you!</h2><div class="paragraph"><p>If you read up to this point - leave me a comment below so that I can <strong>thank you</strong> in person for such an engagement. You can share this blog post on <span class="icon color-twitter"><i class="fa fa-twitter"></i></span> <a href="https://twitter.com/intent/tweet?text=%22Parsing%20JSON%20in%20command-line%20with%20jq:%20basic%20filters%20and%20functions%20(part%201)%22%20https://e.printstacktrace.blog/parsing-json-in-command-line-with-jq-basic-filters-and-functions-part-1/%20via%20@wololock" target="_blank" rel="noopener">Twitter</a> or <span class="icon color-linkedin"><i class="fa fa-linkedin-square"></i></span> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://e.printstacktrace.blog/parsing-json-in-command-line-with-jq-basic-filters-and-functions-part-1/&title=Parsing%20JSON%20in%20command-line%20with%20jq:%20basic%20filters%20and%20functions%20(part%201)" target="_blank" rel="noopener">LinkedIn</a> to help me reach a broader audience. If you appreciate my work on this blog, consider <a href="https://e.printstacktrace.blog/support-me" class="ga-track">supporting</a> my efforts and joining me on that journey. Thank you so much, and I will see you next time! <span class="icon color-orange"><i class="fa fa-smile-wink"></i></span></p></div></div></div></div><div class="col-12 offset-0 col-md-10 offset-md-1"><div class="post-tags"><ul><li class="text"><em class="far fa-calendar-alt mr-1"></em>Published: May 24, 2020 in <a class="mark" href="/jq-cookbook/">jq cookbook</a></li></ul><ul class="mt-2"><li class="text"><em class="fas fa-tags"></em></li><li><a href="/t/curl/">curl</a></li><li><a href="/t/devops/">devops</a></li><li><a href="/t/http/">http</a></li><li><a href="/t/jq/">jq</a></li><li><a href="/t/json/">json</a></li><li><a href="/t/linux/">linux</a></li><li><a href="/t/rest/">rest</a></li></ul></div></div></div></div><footer class="post-footer"><div class="container"><div class="row"><div class="col-12 offset-0 col-md-10 offset-md-1"><div class="about-author"><div class="row"><div class="col-md-2 col-6 offset-md-0 offset-3 text-center mt-4"><img class="rounded-circle img-fluid" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200"></div><div class="col-md-10 col-12 text-md-left text-center mt-md-4 mt-1"><h4 class="text-md-left text-center" itemprop="creator"><a href="/about">Szymon Stepniak</a></h4><p class="bio"><span>Groovista, Upwork's Top Rated freelancer, Toruń Java User Group founder, open&nbsp;source contributor, Stack Overflow addict, bedroom guitar player. I walk through e.printStackTrace() so you don't have to.</span><span class="ml-2"><a href="/about">More about me &raquo;</a></span></p><ul class="social-links text-md-left text-center"><li><a href="https://twitter.com/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-twitter"></span></a></li><li><a href="https://github.com/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-github"></span></a></li><li><a href="https://stackoverflow.com/users/2194470/szymon-stepniak?tab=profile" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-stack-overflow"></span></a></li><li><a href="https://www.youtube.com/c/eprintstacktrace" target="_blank" rel="noopener" onclick="return window.open(this.href),!1"><span class="fa fa-youtube"></span></a></li></ul></div></div></div></div></div></div></footer></article></main><section class="related-posts"><div class="container"><h3>Related posts</h3><div class="card-deck pt-2"><article class="card shadow-sm" itemscope itemtype="http://schema.org/Article"><div class="card-header" itemprop="image" style="background-image:url(/images/cards/release-it.jpg)"><div class="mask"></div><h3 class="h5 text-left font-weight-bold text-white" itemprop="name"><div><a class="category">Programmer's Bookshelf</a></div><div class="title">Release It! 2nd edition - book review</div></h3></div><div class="card-body"><section class="post-meta"><ul><li><time datetime="2019-03-02T23:17:25.000Z" itemprop="datePublished">Mar 3, 2019</time></li><li>5 min. read</li><li><a href="https://e.printstacktrace.blog/release-it-2nd-edition-book-review/#disqus_thread">0 Comments</a></li></ul></section><p class="card-text pt-3" itemprop="description">We are software developers. Our daily duty is to write programs. We spend a lot of time and effort into doing the right things and doing them right. At some point, the production launch day comes and depending on our level of confidence - we are calm and ready for the first wave of unpredictabl ...</p></div><a class="stretched-link" href="/release-it-2nd-edition-book-review/" itemprop="url"></a></article><article class="card shadow-sm" itemscope itemtype="http://schema.org/Article"><div class="card-header" itemprop="image" style="background-image:url(/images/og/ratpack-prefix-http-methods.jpg)"><div class="mask"></div><h3 class="h5 text-left font-weight-bold text-white" itemprop="name"><div><a class="category">Ratpack Cookbook</a></div><div class="title">Using the same prefix with different HTTP methods in Ratpack</div></h3></div><div class="card-body"><section class="post-meta"><ul><li><time datetime="2019-04-01T08:12:52.000Z" itemprop="datePublished">Apr 1, 2019</time></li><li>5 min. read</li><li><a href="https://e.printstacktrace.blog/using-the-same-prefix-with-different-http-methods-in-ratpack/#disqus_thread">0 Comments</a></li></ul></section><p class="card-text pt-3" itemprop="description">Ratpack is an excellent tool for building RESTful[1] applications. However, to benefit most of it, we need to know the tool a little bit better. It applies to Ratpack handler&#8217;s mechanism - it is much different compared to what we have learned by using many popular MVC frameworks. In today ...</p></div><a class="stretched-link" href="/using-the-same-prefix-with-different-http-methods-in-ratpack/" itemprop="url"></a></article><article class="card shadow-sm" itemscope itemtype="http://schema.org/Article"><div class="card-header" itemprop="image" style="background-image:url(/images/cards/jenkins-02.jpg)"><div class="mask"></div><h3 class="h5 text-left font-weight-bold text-white" itemprop="name"><div><a class="category">Jenkins Pipeline Cookbook</a></div><div class="title">How to time out Jenkins Pipeline stage and keep the pipeline running?</div></h3></div><div class="card-body"><section class="post-meta"><ul><li><time datetime="2020-04-16T07:28:38.000Z" itemprop="datePublished">Apr 16, 2020</time></li><li>4 min. read</li><li><a href="https://e.printstacktrace.blog/how-to-time-out-jenkins-pipeline-stage-and-keep-the-pipeline-running/#disqus_thread">0 Comments</a></li></ul></section><p class="card-text pt-3" itemprop="description">The declarative Jenkins Pipeline allows us to define timeout either at the pipeline level or the specific stage. This feature prevents Jenkins&#8217;s job from getting stuck. However, in some cases, we want to accept that one stage may timeout, but we want to keep the remaining stages running.</p></div><a class="stretched-link" href="/how-to-time-out-jenkins-pipeline-stage-and-keep-the-pipeline-running/" itemprop="url"></a></article></div></div><div class="col-12 text-center mt-5 serif"><h5 class="h3"><span class="small d-block mb-2">More posts from</span><span class="font-weight-bold mark">jq cookbook</span></h5><div><em class="fas fa-angle-down"></em></div><a class="stretched-link" href="/jq-cookbook/"></a></div></section><div class="container py-5"><div class="disqus-comments"><div class="alert alert-info small"><em class="fa fa-info-circle"></em> Want to paste code in the comment and make the formatting look good? Read this - <a href="https://help.disqus.com/en/articles/1717236-syntax-highlighting" target="_blank" rel="noopener"><b>Syntax highlighting</b></a>.</div><div class="comments"><div id="disqus_thread"><div id="disqus_empty" style="display:none">Empty</div></div></div></div><script>function load_disqus(e){var t=document.getElementById("disqus_empty");if(document.contains(t)){var d=document.getElementById("disqus_thread"),n=document.createElement("script"),s=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];d&&t&&(t.remove(),n.type="text/javascript",n.async=!0,n.src="//"+e+".disqus.com/embed.js",s.appendChild(n))}}window.addEventListener("scroll",function(e){document.scrollingElement.scrollTop>document.getElementById("disqus_thread").offsetTop-500&&load_disqus("eprintstacktrace")},!1)</script></div><footer class="page-footer"><section class="links"><div class="container"><div class="row"><div class="col-12 col-md-4"><h5 class="text-md-left text-center">Useful links</h5><ul class="text-md-left text-center mb-md-0 mb-5"><li><a href="/">Start here</a></li><li><a href="/about">About</a></li><li><a href="/archives">Archives</a></li><li><a href="/privacy-policy">Privacy Policy</a></li><li><a class="gatr" href="https://kit.co/wololock" target="_blank" rel="noopener" data-type="affiliate" data-name="My Kit">My Kit</a></li><li><a href="https://feeds.feedburner.com/Eprintstacktracenet" target="_blank" rel="noopener">RSS</a></li><li><a href="/support-me">Support me <em class="fas fa-heart color-red ml-2"></em></a></li></ul></div><div class="col-12 col-md-4"><h5 class="text-md-left text-center">Popular categories</h5><ul class="text-md-left text-center mb-md-0 mb-5"><li><a href="/groovy-cookbook/">Groovy Cookbook<span class="count ml-2">26</span></a></li><li><a href="/jenkins-pipeline-cookbook/">Jenkins Pipeline Cookbook<span class="count ml-2">6</span></a></li><li><a href="/programmers-bookshelf/">Programmer's Bookshelf<span class="count ml-2">6</span></a></li><li><a href="/learning-java/">Learning Java<span class="count ml-2">4</span></a></li><li><a href="/ratpack-cookbook/">Ratpack Cookbook<span class="count ml-2">4</span></a></li><li><a href="/how-to/">How to<span class="count ml-2">3</span></a></li><li><a href="/micronaut-cookbook/">Micronaut Cookbook<span class="count ml-2">3</span></a></li></ul></div><div class="col-12 col-md-4 text-center"><a class="gatr" href="https://www.jdoqocy.com/click-100154593-12490428" target="_blank" rel="noopener" data-type="banner" data-name="Grammarly Footer Default"><img class="img-fluid" src="/images/yml/grammarly-square-2.png"></a></div></div></div></section><section class="bottom"><div class="container"><ul class="text-center py-2"><li class="d-inline-block mb-md-0 mb-2">Designed by <a href="https://twitter.com/wololock" target="_blank" rel="noopener">@wololock</a></li><li class="d-inline-block mb-md-0 mb-2">Created with <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a></li><li class="d-inline-block mb-md-0 mb-2">Hosted on <a href="https://github.com/wololock/wololock.github.io" target="_blank" rel="noopener">GitHub</a></li><li class="d-inline-block mb-md-0 mb-2">Deployed with <a href="https://circleci.com/gh/wololock/wololock.github.io" target="_blank" rel="noopener">Circle CI</a></li><li class="d-inline-block mb-md-0 mb-2">License <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></li><li class="d-inline-block mb-md-0 mb-2"><a href="https://github.com/wololock/wololock.github.io/commits/develop" target="_blank" rel="noopener"><img src="https://badgen.net/github/last-commit/wololock/wololock.github.io?color=blue&amp;scale=0.8"></a></li></ul></div></section></footer><script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script async src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script><script async src="https://kit.fontawesome.com/25fc8ffdd1.js" crossorigin="anonymous"></script><script async id="cookiebanner" src="//cdnjs.cloudflare.com/ajax/libs/cookie-banner/1.2.2/cookiebanner.min.js" data-moreinfo="/privacy-policy/" data-message="This blog uses cookies to enhance your experience. By continuing to visit it you agree to its use of cookies." data-link="#ffad33" data-font-family="Lora,serif" data-font-size="15px" data-bg="#444"></script><script src="/js/highlight.pack.js?v=10.0.3"></script><script>hljs.initHighlightingOnLoad()</script><script async src="/js/main.js?v=6"></script><script async id="dsq-count-scr" src="//eprintstacktrace.disqus.com/count.js"></script><script>!function(a,e,t,n,c,g,r){a.GoogleAnalyticsObject=c,a.ga=a.ga||function(){(a.ga.q=a.ga.q||[]).push(arguments)},a.ga.l=1*new Date,g=e.createElement(t),r=e.getElementsByTagName(t)[0],g.async=1,g.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(g,r)}(window,document,"script",0,"ga"),ga("create","UA-42400890-5","auto"),ga("send","pageview"),jQuery("a.gatr").click(function(){var a=jQuery(this),e=a.attr("data-type"),t=a.attr("data-name");return ga("send","event",e,"click",t),!0})</script><script>!function(){"use strict";function r(e){var t=e.getAttribute("data-original"),n=new Image;n.onload=function(){e.setAttribute("src",t),e.style.paddingTop=""},n.src=t}document.addEventListener("DOMContentLoaded",function(){var t,e,n,i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));i.length&&("undefined"!=typeof IntersectionObserver?(t=new IntersectionObserver(function(e,t){e.filter(function(e){return e.isIntersecting}).forEach(function(e){r(e.target),t.unobserve(e.target)})}),i.forEach(function(e){t.observe(e)})):(n=function(){clearTimeout(e),e=setTimeout(function(){return(i=i.filter(function(e){return!e.src})).length?void i.filter(function(e){e.getBoundingClientRect().top<window.innerHeight&&r(e)}):(window.removeEventListener("scroll",n),void window.removeEventListener("resize",n))},100)},window.addEventListener("scroll",n),window.addEventListener("resize",n),n()))},!1)}();</script></body></html>