<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="author" content="Szymon Stepniak"><meta name="robots" content="index, follow"><meta name="monetization" content="$ilp.uphold.com/Jfxe9Qd9z8Mb"><title>Non-blocking and async Micronaut - quick start (part 2)</title><meta name="description" content="Welcome to the part 2 of &quot;Non-blocking and async Micronaut&quot; article. In the previous part we have explained the idea behind this demo and we have implemented product-service - a simple endpoint that r"><meta property="og:type" content="article"><meta property="og:title" content="Non-blocking and async Micronaut - quick start (part 2)"><meta property="og:url" content="https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/"><meta property="og:site_name" content="Szymon Stepniak - Freelance Groovy Developer &amp; DevOps"><meta property="og:description" content="Welcome to the part 2 of &quot;Non-blocking and async Micronaut&quot; article. In the previous part we have explained the idea behind this demo and we have implemented product-service - a simple endpoint that r"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://e.printstacktrace.blog/images/og/micronaut-nonblocking-part2.jpg"><meta property="article:published_time" content="2018-10-26T11:40:42.000Z"><meta property="article:modified_time" content="2018-10-26T11:40:42.000Z"><meta property="article:author" content="Szymon Stepniak"><meta property="article:tag" content="java"><meta property="article:tag" content="micronaut"><meta property="article:tag" content="non-blocking"><meta property="article:tag" content="async"><meta property="article:tag" content="reactive-programming"><meta property="article:tag" content="rxjava"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://e.printstacktrace.blog/images/og/micronaut-nonblocking-part2.jpg"><meta name="twitter:creator" content="@wololock"><meta name="keywords" content="java,micronaut,non-blocking,async,reactive-programming,rxjava"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//stackpath.bootstrapcdn.com"><link rel="dns-prefetch" href="//disqus.com"><link rel="dns-prefetch" href="//c.disquscdn.com"><link href="//fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;700&amp;display=swap" rel="stylesheet"><link href="//fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&amp;display=swap" rel="stylesheet"><link href="//fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400&amp;display=swap" rel="stylesheet"><link href="//fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;1,400&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"><link rel="shortcut icon" type="image/png" href="/favicon_new.png"><link rel="stylesheet" href="/css/main.css?v=61"><link rel="stylesheet" href="/css/highlightjs.css?v=61"><link rel="canonical" href="https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/"><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":["Person","Organization"],"@id":"https://e.printstacktrace.blog/#/schema/person/wololock","name":"Szymon Stepniak","description":"Groovista, Upwork's Top Rated freelancer, Toru≈Ñ Java User Group founder, open&nbsp;source contributor, Stack Overflow addict, bedroom guitar player. I walk through e.printStackTrace() so you don't have to.","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/#avatar","inLanguage":"en-US","url":"https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200","caption":"Szymon Stepniak"},"logo":{"@id":"https://e.printstacktrace.blog/#avatar"},"sameAs":["https://twitter.com/wololock","https://github.com/wololock","https://stackoverflow.com/users/2194470/szymon-stepniak","https://www.youtube.com/c/eprintstacktrace"]},{"@type":"WebSite","@id":"https://e.printstacktrace.blog/#website","url":"https://e.printstacktrace.blog","name":"Szymon Stepniak - Freelance Groovy Developer & DevOps","description":"Blog about programming, created by Upwork's Top Rated freelancer, 10+ years experienced Java/Groovy developer. Contact me if you are looking for an experienced and high quality consultant."},{"@type":"WebPage","@id":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/#webpage","url":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/","name":"Non-blocking and async Micronaut - quick start (part 2)","isPartOf":{"@id":"https://e.printstacktrace.blog/#website"},"datePublished":"2018-10-26T11:40:42.000Z","dateModified":"2018-10-26T11:40:42.000Z","description":"Welcome to the part 2 of \"Non-blocking and async Micronaut\" article. In the previous part we have explained the idea behind this demo and we have implemented product-service - a simple endpoint that returns information about some products. Today we will focus on implementing recommendations-service part and we will run some simple benchmark tests. Let&#8217;s start!","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/"]}]},{"@type":"Article","@id":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/#article","isPartOf":{"@id":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/#webpage"},"author":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"headline":"Non-blocking and async Micronaut - quick start (part 2)","datePublished":"2018-10-26T11:40:42.000Z","dateModified":"2018-10-26T11:40:42.000Z","mainEntityOfPage":{"@id":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/#webpage"},"publisher":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"keywords":"java,micronaut,non-blocking,async,reactive-programming,rxjava","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/#primaryimage","url":"https://e.printstacktrace.blog/images/og/micronaut-nonblocking-part2.jpg","inLanguage":"en-US","caption":"Non-blocking and async Micronaut - quick start (part 2)"},"inLanguage":"en-US"},{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://e.printstacktrace.blog","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://e.printstacktrace.blog/micronaut-cookbook/","name":"Micronaut Cookbook"}},{"@type":"ListItem","position":3,"item":{"@id":"https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/","name":"Non-blocking and async Micronaut - quick start (part 2)"}}]}]}</script><script data-ad-client="ca-pub-4108181727204619" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Szymon Stepniak - Freelance Groovy Developer & DevOps" type="application/atom+xml">
<style>.img-lazyload-container{overflow:hidden;max-width:100%}.img-lazyload-container img{max-width:100%;display:block;height:auto;transition:opacity .5s ease-in-out}.img-lazyload-container img:not([src]){height:0;opacity:0}</style></head><body class="layout-post"><header class="fixed-top" id="header"><div class="container-fluid px-md-auto px-0"><nav class="navbar navbar-expand-lg"><h3 class="logo mr-auto position-relative">e.printstacktrace.blog<a class="stretched-link gatr" href="/" data-type="logo" data-name="e.printstacktrace.blog"></a></h3><button class="navbar-toggler" data-toggle="collapse" data-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="mainNav"><ul class="navbar-nav ml-lg-auto text-center text-md-left d-block d-lg-flex"><li class="nav-item"><a class="nav-link" href="/">Start here</a></li><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/support-me">Support the blog</a></li><li class="nav-item"><a class="nav-link" href="/archives">Archives</a></li><li class="nav-item"><a class="nav-link" href="/resources">Resources</a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link gatr" href="https://twitter.com/wololock" target="_blank" rel="noopener" data-type="social" data-name="Twitter"><em class="fa fa-twitter"></em></a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link gatr" href="https://github.com/wololock" target="_blank" rel="noopener" data-type="social" data-name="GitHub"><em class="fa fa-github"></em></a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link gatr" href="https://stackoverflow.com/users/2194470/szymon-stepniak" target="_blank" rel="noopener" data-type="social" data-name="Stack Overflow"><em class="fa fa-stack-overflow"></em></a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link gatr" href="https://youtube.com/c/eprintstacktrace" target="_blank" rel="noopener" data-type="social" data-name="YouTube"><em class="fa fa-youtube"></em></a></li></ul></div></nav></div></header><main id="page-post"><header class="jumbotron text-center pb-5" style="background-image:url(/img/micronaut-bg.jpg)"><div class="mask"></div><div class="container pt-5 pb-1"><a class="category mark" href="/micronaut-cookbook/">Micronaut Cookbook</a><h1 class="mt-2 mt-md-0">Non-blocking and async Micronaut - quick start (part 2)</h1><section class="post-meta"><ul><li><time datetime="2018-10-26T11:40:42.000Z">Oct 26, 2018</time></li><li>8 min. read</li><li><a href="https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/#disqus_thread">0 Comments</a></li></ul></section></div></header><article class="post-content" role="article"><div class="container"><div class="row"><div class="col-12 offset-0 col-md-10 offset-md-1 pt-4 pt-md-5"><div class="paragraph"><p>Welcome to the part 2 of <em>"Non-blocking and async Micronaut"</em> article. In the <a href="https://e.printstacktrace.blog/2018/10/micronaut-non-blocking-and-async-part1/">previous part</a> we have explained the idea behind this demo and we have implemented product-service - a simple endpoint that returns information about some products. Today we will focus on implementing <strong>recommendations-service</strong> part and we will run some simple benchmark tests. Let&#8217;s start!</p></div><a id="more"></a><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">Source code can be found here: <span class="icon"><i class="fa fa-github"></i></span> <a href="https://github.com/wololock/micronaut-nonblocking-async-demo" target="_blank" rel="noopener">wololock/micronaut-nonblocking-async-demo</a></td></tr></table></div><div class="sect1"><h2 id="implementing-recommendations-service">Implementing recommendations-service</h2><div class="sectionbody"><div class="paragraph"><p>We use recommendation-service example more like an excuse to connect with product-service over HTTP. We won&#8217;t spent time on inventing recommendations algorithm - we will simply mock and hard-code products to recommend instead. This is fine for demo purpose and it allows us to focus on what is most important here - service to service communication over HTTP.</p></div><div class="paragraph"><p>We will represent concept of recommendations-service as a single controller class stored in the separate package:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">recommendation
‚îî‚îÄ‚îÄ RecommendationController.java</code></pre></div></div><div class="paragraph"><p>Let&#8217;s take a look at its implementation:</p></div><div class="listingblock"><div class="title">Listing 1. src/main/java/com/github/wololock/micronaut/recommendation/RecommendationController.java</div><div class="content"><pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package com.github.wololock.micronaut.recommendation;

import com.github.wololock.micronaut.products.Product;
import com.github.wololock.micronaut.products.ProductClient;
import io.micronaut.http.annotation.Controller;
import io.micronaut.http.annotation.Get;
import io.reactivex.Observable;
import io.reactivex.Single;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.Arrays;
import java.util.List;

@Controller("/recommendations")
final class RecommendationController {

    private static final Logger log = LoggerFactory.getLogger(RecommendationController.class);

    private static final List&lt;String&gt; ids = Arrays.asList( <i class="conum" data-value="1"></i><b>(1)</b>
            "PROD-001",
            "PROD-002",
            "PROD-003",
            "PROD-004"
    );

    private final ProductClient productClient; <i class="conum" data-value="2"></i><b>(2)</b>

    public RecommendationController(ProductClient productClient) {
        this.productClient = productClient;
    }

    @Get
    public Single&lt;List&lt;Product&gt;&gt; getRecommendations() { <i class="conum" data-value="3"></i><b>(3)</b>
        log.debug("RecommendationController.getRecommendations() called...");

        return Observable.fromIterable(ids) <i class="conum" data-value="4"></i><b>(4)</b>
                .flatMap(id -&gt; productClient.getProduct(id).toObservable()) <i class="conum" data-value="5"></i><b>(5)</b>
                .toList(); <i class="conum" data-value="6"></i><b>(6)</b>
    }
}</code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b></td><td>A fixed list of 4 products IDs.</td></tr><tr><td><i class="conum" data-value="2"></i><b>2</b></td><td>We use injected <code>ProductClient</code> - Micronaut will generate and compile a client class based on the interface.</td></tr><tr><td><i class="conum" data-value="3"></i><b>3</b></td><td>We return <code>Single&lt;List&lt;Product&gt;&gt;</code> - a reactive type that represents some single value.</td></tr><tr><td><i class="conum" data-value="4"></i><b>4</b></td><td>We start with converting list of IDs to <code>Observable&lt;String&gt;</code></td></tr><tr><td><i class="conum" data-value="5"></i><b>5</b></td><td>Next we map every ID to a corresponding <code>Product</code> retrieved via HTTP request.</td></tr><tr><td><i class="conum" data-value="6"></i><b>6</b></td><td>We specify the return type to a <code>Single&lt;List&lt;Product&gt;&gt;</code>.</td></tr></table></div><div class="paragraph"><p>The class is very concise as you can see. We start with injection of an implementation of <code>ProductClient</code> interface we have defined in product-service:</p></div><div class="listingblock"><div class="title">Listing 2. src/main/java/com/github/wololock/micronaut/products/ProductClient.java</div><div class="content"><pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package com.github.wololock.micronaut.products;

import io.micronaut.http.annotation.Get;
import io.micronaut.http.client.annotation.Client;
import io.reactivex.Maybe;

@Client("/product")
public interface ProductClient {

    @Get("/{id}")
    Maybe&lt;Product&gt; getProduct(final String id);
}</code></pre></div></div><div class="paragraph"><p>We don&#8217;t implement this interface explicitly - Micronaut takes care of generating implementing class at the compile time.</p></div><div class="paragraph"><p>The <code>getRecommendations</code> method implements our business logic - it takes a list of IDs and for each ID it calls <code>ProductClient.getProduct(id)</code> and converts <code>Maybe&lt;Product&gt;</code> to <code>Observable&lt;Product&gt;</code> with <code>toObservable()</code> method call. And the last line of this method precises that we want to return a list of products and that&#8217;s it.</p></div><div class="paragraph"><p>Let&#8217;s see it in action. We will start with a single HTTP request (using <a href="https://httpie.org/" target="_blank" rel="noopener">HTTPie</a>):</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">% http localhost:8080/recommendations

HTTP/1.1 200 OK
Date: Fri, 26 Oct 2018 18:31:41 GMT
connection: keep-alive
content-length: 240
content-type: application/json

[
    {
        "id": "PROD-001",
        "name": "Micronaut in Action",
        "price": 29.99
    },
    {
        "id": "PROD-002",
        "name": "Netty in Action",
        "price": 31.22
    },
    {
        "id": "PROD-003",
        "name": "Effective Java, 3rd edition",
        "price": 31.22
    },
    {
        "id": "PROD-004",
        "name": "Clean Code",
        "price": 31.22
    }
]</code></pre></div></div><div class="paragraph"><p>We get 4 recommendations in response as expected. And the console log of the application looks like this:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="text" class="language-text hljs">18:31:40.007 [nioEventLoopGroup-1-2     ] DEBUG - RecommendationController.getRecommendations() called...
18:31:40.173 [nioEventLoopGroup-1-2     ] DEBUG - ProductController.getProduct(PROD-001) executed...
18:31:40.175 [nioEventLoopGroup-1-2     ] DEBUG - ProductController.getProduct(PROD-003) executed...
18:31:40.178 [nioEventLoopGroup-1-2     ] DEBUG - ProductController.getProduct(PROD-002) executed...
18:31:40.178 [nioEventLoopGroup-1-2     ] DEBUG - ProductController.getProduct(PROD-004) executed...
18:31:40.297 [RxCachedThreadScheduler-1 ] DEBUG - Product with id PROD-001 ready to return...
18:31:40.368 [RxCachedThreadScheduler-3 ] DEBUG - Product with id PROD-002 ready to return...
18:31:40.777 [RxCachedThreadScheduler-2 ] DEBUG - Product with id PROD-003 ready to return...
18:31:41.379 [RxCachedThreadScheduler-4 ] DEBUG - Product with id PROD-004 ready to return...</code></pre></div></div><div class="paragraph"><p>It took 1372 milliseconds to complete the request. We still use a single event-loop for a computation - that is why <code>nioEventLoopGroup-1-2</code> handled the first 5 requests without blocking. If we process these requests in a blocking manner we would see something like this:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="text" class="language-text hljs">RecommendationController.getRecommendations() called...
ProductController.getProduct(PROD-001) executed...
Product with id PROD-001 ready to return...
ProductController.getProduct(PROD-003) executed...
Product with id PROD-002 ready to return...
ProductController.getProduct(PROD-002) executed...
Product with id PROD-003 ready to return...
ProductController.getProduct(PROD-004) executed...
Product with id PROD-004 ready to return...</code></pre></div></div><div class="paragraph"><p>And it would not take 1372 ms but at least 2110 ms (a sum of latencies). Alternatively we would need at least 5 threads to handle this single request to <code>/recommendations</code> endpoint - one thread per connection. I think it shows clearly what is the difference between blocking and non-blocking approach.</p></div></div></div><div class="sect1"><h2 id="simulating-multiple-requests">Simulating multiple requests</h2><div class="sectionbody"><div class="paragraph"><p>Handling a single request on <code>/recommendations</code> endpoint isn&#8217;t very challenging for our demo application. Let&#8217;s see what happens if 500 concurrent requests (from 2000 total) reaches the application. To run such test we will use <a href="https://httpd.apache.org/docs/2.4/programs/ab.html" target="_blank" rel="noopener">Apache HTTP benchmark tool</a>:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">ab -c 500 -n 2000 http://localhost:8080/recommendations</code></pre></div></div><div class="paragraph"><p>This command executes 500 concurrent requests and does it 4 times (2000 requests in total).</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="text" class="language-text hljs">This is ApacheBench, Version 2.3 &lt;$Revision: 1826891 $&gt;
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking localhost (be patient)
Completed 200 requests
Completed 400 requests
Completed 600 requests
Completed 800 requests
Completed 1000 requests
Completed 1200 requests
Completed 1400 requests
Completed 1600 requests
Completed 1800 requests
Completed 2000 requests
Finished 2000 requests


Server Software:
Server Hostname:        localhost
Server Port:            8080

Document Path:          /recommendations
Document Length:        240 bytes

Concurrency Level:      500
Time taken for tests:   7.078 seconds
Complete requests:      2000
Failed requests:        65
   (Connect: 0, Receive: 0, Length: 65, Exceptions: 0)
Non-2xx responses:      65
Total transferred:      730605 bytes
HTML transferred:       473370 bytes
Requests per second:    282.57 [#/sec] (mean)
Time per request:       1769.468 [ms] (mean)
Time per request:       3.539 [ms] (mean, across all concurrent requests)
Transfer rate:          100.80 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    3   5.6      0      23
Processing:   436 1376 278.3   1290    1953
Waiting:      436 1376 278.3   1290    1953
Total:        444 1379 281.1   1290    1961

Percentage of the requests served within a certain time (ms)
  50%   1290
  66%   1379
  75%   1433
  80%   1703
  90%   1811
  95%   1870
  98%   1943
  99%   1956
 100%   1961 (longest request)</code></pre></div></div><div class="paragraph"><p>Nothing unexpected happened. Median processing time per request is 1290 ms, which is OK - the longest request to product-service takes 1200 ms, so recommendations-service cannot return a response in shorter time. The longest request took 1961 ms - a decent and acceptable value in this demo.</p></div><div class="paragraph"><p>The most interesting value is not shown directly in this result. We have executed 2000 requests to <code>/recommendations</code> endpoint and it took 7 seconds to complete all requests. However, our application handled not 2000, but 10,000 requests, because every single request to <code>/recommendations</code> causes 4&nbsp;additional requests to <code>/product/PROD-xxx</code>, handled by the same application. It means that our demo application handled ~1429 requests per second. With just a single thread.</p></div><div class="paragraph"><p>Another good information is that handling 10,000 request didn&#8217;t cause significant resources consumption. Below you can find a screen shot taken from JProfiler attached to the application when I have repeated the same <code>ab</code> command 3 times:</p></div><div class="imageblock img-responsive img-thumbnail"><div class="content"><a class="image" href="/images/micronaut-jprofiler.png"><div class="img-lazyload-container" style="width:1128px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/micronaut-jprofiler.png" height="608" width="1128" style="padding-top:53.90070921985816%"></div></a></div></div><div class="paragraph"><p>3 spikes on GC activity and CPU load (up to &lt;20% max), and unnoticeable memory consumption increase. Keep in mind that this is not a bulletproof benchmark - I used application running with <code>gradle run</code> and I haven&#8217;t set any useful JVM tweak flags.</p></div><div class="paragraph"><p></p><div class="youtube-box py-4"><div class="container"><div class="row"><div class="col-12 col-md-6 offset-md-1 offset-0 pr-md-5 order-1 order-md-0"><h4>Building command-line app with Java 11, Micronaut, Picocli, and GraalVM | #micronaut</h4><p class="desc">In this video, I will show you how to create a standalone command-line application (CLI app) using Java 11, Micronaut, Picocli, and GraalVM. We are going to build from scratch a Java program, and in the end, we will compile it to the native binary executable file you can run without the Java Virtual Machine. This is not a deep dive tutorial. It's a quickstart introduction to the technology to give you a better understanding about what Micronaut, Picocli, and GraalVM are suitable for.</p><p class="text-center pt-3"><a class="btn btn-danger text-white" href="https://www.youtube.com/watch?v=Xdcg4Drg1hc" target="_blank" rel="noopener" data-type="youtube" data-name="Building command-line app with Java 11, Micronaut, Picocli, and GraalVM | #micronaut">Watch now</a></p></div><div class="col-12 col-md-4 order-0 order-md-1"><div class="card shadow mb-4 mb-md-0"><div class="card-header" itemprop="image" style="background-image:url(https://i3.ytimg.com/vi/Xdcg4Drg1hc/mqdefault.jpg)"><div class="time">36:53</div><em class="fa fa-youtube"></em></div><a class="stretched-link gatr" href="https://www.youtube.com/watch?v=Xdcg4Drg1hc" target="_blank" rel="noopener" data-type="youtube" data-name="Building command-line app with Java 11, Micronaut, Picocli, and GraalVM | #micronaut"></a></div></div></div></div></div><p></p></div></div></div><div class="sect1"><h2 id="conclusion">Conclusion</h2><div class="sectionbody"><div class="paragraph"><p>Part 2 ends here. In the next (and last) part of this article we will play around with timeouts and see what kind of problems it may introduce. Stay tuned, and until the next time!</p></div><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content">Continue reading here - <a href="/micronaut-non-blocking-and-async-part-3/" title="Non-blocking and async Micronaut - quick start (part 3)">Non-blocking and async Micronaut - quick start (part 3)</a></td></tr></table></div><div class="paragraph mt-5"><p>Share this blog post on <span class="icon color-twitter"><i class="fa fa-twitter"></i></span> <a href="https://twitter.com/intent/tweet?text=%22Non-blocking%20and%20async%20Micronaut%20-%20quick%20start%20(part%202)%22%20https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/%20via%20@wololock" target="_blank" rel="noopener">Twitter</a> or <span class="icon color-linkedin"><i class="fa fa-linkedin-square"></i></span> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-2/&title=Non-blocking%20and%20async%20Micronaut%20-%20quick%20start%20(part%202)" target="_blank" rel="noopener">LinkedIn</a> to help me spread the word. Thanks! <span class="icon"><i class="fa fa-smile-o"></i></span></p></div></div></div></div><div class="col-12 offset-0 col-md-10 offset-md-1"><div class="post-tags"><ul><li class="text"><em class="far fa-calendar-alt mr-1"></em>Published: Oct 26, 2018 in <a class="mark" href="/micronaut-cookbook/">Micronaut Cookbook</a></li></ul><ul class="mt-2"><li class="text"><em class="fas fa-tags"></em></li><li><a href="/t/async/">async</a></li><li><a href="/t/java/">java</a></li><li><a href="/t/micronaut/">micronaut</a></li><li><a href="/t/non-blocking/">non-blocking</a></li><li><a href="/t/reactive-programming/">reactive-programming</a></li><li><a href="/t/rxjava/">rxjava</a></li></ul></div></div></div></div><footer class="post-footer"><div class="container"><div class="row"><div class="col-12 offset-0 col-md-10 offset-md-1"><div class="about-author"><div class="row"><div class="col-md-2 col-6 offset-md-0 offset-3 text-center mt-4"><img class="rounded-circle img-fluid" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200"></div><div class="col-md-10 col-12 text-md-left text-center mt-md-4 mt-1"><h4 class="text-md-left text-center"><a class="gatr" href="/about" data-type="post-footer" data-name="About">Szymon Stepniak</a></h4><p class="bio"><span>Groovista, Upwork's Top Rated freelancer, Toru≈Ñ Java User Group founder, open&nbsp;source contributor, Stack Overflow addict, bedroom guitar player. I walk through e.printStackTrace() so you don't have to.</span><span class="ml-2"><a href="/about">More about me &raquo;</a></span></p><ul class="social-links text-md-left text-center"><li><a class="gatr" href="https://twitter.com/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1" data-type="post-footer" data-name="twitter"><span class="fa fa-twitter"></span></a></li><li><a class="gatr" href="https://github.com/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1" data-type="post-footer" data-name="github"><span class="fa fa-github"></span></a></li><li><a class="gatr" href="https://stackoverflow.com/users/2194470/szymon-stepniak?tab=profile" target="_blank" rel="noopener" onclick="return window.open(this.href),!1" data-type="post-footer" data-name="stackoverflow"><span class="fa fa-stack-overflow"></span></a></li><li><a class="gatr" href="https://www.youtube.com/c/eprintstacktrace" target="_blank" rel="noopener" onclick="return window.open(this.href),!1" data-type="post-footer" data-name="youtube"><span class="fa fa-youtube"></span></a></li></ul></div></div></div></div></div><div class="row mt-lg-2 mt-3 h6 pager"><div class="col-lg-6 col-12 text-lg-left text-center py-3"><a class="gatr" href="/micronaut-non-blocking-and-async-part1/" data-type="prev-post" data-name="Non-blocking and async Micronaut - quick start (part 1)" title="Non-blocking and async Micronaut - quick start (part 1)">&laquo; Previous: <b>Non-blocking and async Micronaut - quick start (part 1)</b></a></div><div class="col-lg-6 col-12 text-lg-right text-center py-3"><a class="gatr" href="/java-type-inference-generic-methods-chain-call/" data-type="next-post" data-name="Java 8 type inference in generic methods chain call - what might go wrong?" title="Java 8 type inference in generic methods chain call - what might go wrong?">Next: <b>Java 8 type inference in generic methods chain call - what might go wrong?</b> &raquo;</a></div></div></div></footer></article></main><section class="related-posts"><div class="container"><h3>Related posts</h3><div class="card-deck pt-2"><article class="card shadow-sm"><div class="card-header" style="background-image:url(/images/cards/micronaut.jpg)"><div class="mask"></div><h3 class="h5 text-left font-weight-bold text-white"><div><a class="category">Micronaut Cookbook</a></div><div class="title">Non-blocking and async Micronaut - quick start (part 3)</div></h3></div><div class="card-body"><section class="post-meta"><ul><li><time datetime="2018-10-30T09:53:18.000Z">Oct 30, 2018</time></li><li>9 min. read</li><li><a href="https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part-3/#disqus_thread">0 Comments</a></li></ul></section><p class="card-text pt-3">Welcome to the part 3 of "Non-blocking and async Micronaut" article. In the previous post we have created connection between two services using HTTP protocol and we have run some experiments with handling 10,000 requests. Today we are going to extend this example by setting some timeouts to see ...</p></div><a class="stretched-link gatr" href="/micronaut-non-blocking-and-async-part-3/" data-type="related" data-name="Non-blocking and async Micronaut - quick start (part 3)"></a></article><article class="card shadow-sm"><div class="card-header" style="background-image:url(/images/cards/micronaut.jpg)"><div class="mask"></div><h3 class="h5 text-left font-weight-bold text-white"><div><a class="category">Micronaut Cookbook</a></div><div class="title">Non-blocking and async Micronaut - quick start (part 1)</div></h3></div><div class="card-body"><section class="post-meta"><ul><li><time datetime="2018-10-25T00:33:37.000Z">Oct 25, 2018</time></li><li>16 min. read</li><li><a href="https://e.printstacktrace.blog/micronaut-non-blocking-and-async-part1/#disqus_thread">0 Comments</a></li></ul></section><p class="card-text pt-3">Micronaut framework inventors says it is designed for building modern microservice applications. It supports reactive and non-blocking HTTP requests processing thanks to a powerful network application framework - Netty. In this blog post I will give you a quick and practical introduction to a a ...</p></div><a class="stretched-link gatr" href="/micronaut-non-blocking-and-async-part1/" data-type="related" data-name="Non-blocking and async Micronaut - quick start (part 1)"></a></article><article class="card shadow-sm"><div class="card-header" style="background-image:url(/images/cards/micronaut-02.jpg)"><div class="mask"></div><h3 class="h5 text-left font-weight-bold text-white"><div><a class="category">Micronaut Cookbook</a></div><div class="title">Building stackoverflow-cli with Java 11, Micronaut, Picocli, and GraalVM</div></h3></div><div class="card-body"><section class="post-meta"><ul><li><time datetime="2020-07-08T12:17:41.000Z">Jul 8, 2020</time></li><li>14 min. read</li><li><a href="https://e.printstacktrace.blog/building-stackoverflow-cli-with-java-11-micronaut-picocli-and-graalvm/#disqus_thread">0 Comments</a></li></ul></section><p class="card-text pt-3">In this blog post, I show you how to build stackoverflow-cli - a command-line application that allows you to search Stack Overflow questions directly from the terminal window. I use Java 11+, Micronaut, Picocli, and GraalVM&#8217;s native-image.</p></div><a class="stretched-link gatr" href="/building-stackoverflow-cli-with-java-11-micronaut-picocli-and-graalvm/" data-type="related" data-name="Building stackoverflow-cli with Java 11, Micronaut, Picocli, and GraalVM"></a></article></div></div><div class="col-12 text-center mt-5 serif"><h5 class="h3"><span class="small d-block mb-2">More posts from</span><span class="font-weight-bold mark">Micronaut Cookbook</span></h5><div><em class="fas fa-angle-down"></em></div><a class="stretched-link" href="/micronaut-cookbook/"></a></div></section><div class="container py-5"><div class="disqus-comments"><div class="alert alert-info small"><em class="fa fa-info-circle"></em> Want to paste code in the comment and make the formatting look good? Read this - <a href="https://help.disqus.com/en/articles/1717236-syntax-highlighting" target="_blank" rel="noopener"><b>Syntax highlighting</b></a>.</div><div class="comments"><div id="disqus_thread"><div id="disqus_empty" style="display:none">Empty</div></div></div><div class="text-center pt-4"><a class="gatr" href="https://www.jdoqocy.com/click-100191173-10952823" target="_blank" rel="noopener" data-type="grammarly-comments" data-name="Grammar Check"><img class="d-none d-lg-inline" src="/images/yml/grammarly-comments-banner.png" width="728" height="90" alt="Grammar Check " border="0"><img class="d-inline d-lg-none" src="/images/yml/grammarly-square.png" alt="Grammar Check " border="0"></a></div></div><script>function load_disqus(e){var t=document.getElementById("disqus_empty");if(document.contains(t)){var d=document.getElementById("disqus_thread"),n=document.createElement("script"),s=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];d&&t&&(t.remove(),n.type="text/javascript",n.async=!0,n.src="//"+e+".disqus.com/embed.js",s.appendChild(n))}}window.addEventListener("scroll",function(e){document.scrollingElement.scrollTop>document.getElementById("disqus_thread").offsetTop-500&&load_disqus("eprintstacktrace")},!1)</script></div><footer class="page-footer"><section class="links"><div class="container"><div class="row"><div class="col-12 col-md-2"><h5 class="text-md-left text-center">Useful links</h5><ul class="text-md-left text-center mb-md-0 mb-5"><li><a class="gatr" href="/" data-type="footer-useful-links" data-name="Start here">Start here</a></li><li><a class="gatr" href="/about" data-type="footer-useful-links" data-name="About">About</a></li><li><a class="gatr" href="/archives" data-type="footer-useful-links" data-name="Archives">Archives</a></li><li><a class="gatr" href="/resources" data-type="footer-useful-links" data-name="Resources">Resources</a></li><li><a class="gatr" href="/privacy-policy" data-type="footer-useful-links" data-name="Privacy Policy">Privacy Policy</a></li><li><a class="gatr" href="https://teespring.com/stores/eprintstacktrace" target="_blank" rel="noopener" data-type="footer-useful-links" data-name="Merchandise">Merchandise</a></li><li><a class="gatr" href="https://kit.co/wololock" target="_blank" rel="noopener" data-type="footer-useful-links" data-name="My Kit">My Kit</a></li><li><a class="gatr" href="https://feeds.feedburner.com/Eprintstacktracenet" target="_blank" rel="noopener" data-type="footer-useful-links" data-name="RSS">RSS</a></li><li><a class="gatr" href="/support-me" data-type="footer-useful-links" data-name="Support me">Support the blog <em class="fas fa-heart color-red ml-2"></em></a></li></ul></div><div class="col-12 col-md-3"><h5 class="text-md-left text-center">Popular categories</h5><ul class="text-md-left text-center mb-md-0 mb-5"><li><a class="gatr" href="/groovy-cookbook/" data-type="footer-category" data-name="Groovy Cookbook">Groovy Cookbook<span class="count ml-2">27</span></a></li><li><a class="gatr" href="/jenkins-pipeline-cookbook/" data-type="footer-category" data-name="Jenkins Pipeline Cookbook">Jenkins Pipeline Cookbook<span class="count ml-2">7</span></a></li><li><a class="gatr" href="/programmers-bookshelf/" data-type="footer-category" data-name="Programmer's Bookshelf">Programmer's Bookshelf<span class="count ml-2">6</span></a></li><li><a class="gatr" href="/micronaut-cookbook/" data-type="footer-category" data-name="Micronaut Cookbook">Micronaut Cookbook<span class="count ml-2">4</span></a></li><li><a class="gatr" href="/learning-java/" data-type="footer-category" data-name="Learning Java">Learning Java<span class="count ml-2">4</span></a></li><li><a class="gatr" href="/ratpack-cookbook/" data-type="footer-category" data-name="Ratpack Cookbook">Ratpack Cookbook<span class="count ml-2">4</span></a></li><li><a class="gatr" href="/how-to/" data-type="footer-category" data-name="How to">How to<span class="count ml-2">3</span></a></li></ul></div><div class="col-12 col-md-4 text-center"><h5 class="text-md-left text-center">Latest posts</h5><ul class="text-md-left text-center mb-md-0 mb-5"><li><a class="gatr" href="/how-to-merge-two-maps-in-groovy/" data-type="footer-latest-posts" data-name="How to merge two maps in Groovy?">How to merge two maps in Groovy?</a></li><li><a class="gatr" href="/building-stackoverflow-cli-with-java-11-micronaut-picocli-and-graalvm/" data-type="footer-latest-posts" data-name="Building stackoverflow-cli with Java 11, Micronaut, Picocli, and GraalVM">Building stackoverflow-cli with Java 11, Micronaut, Picocli, and GraalVM</a></li><li><a class="gatr" href="/how-to-catch-curl-response-in-jenkins-pipeline/" data-type="footer-latest-posts" data-name="How to catch curl response in Jenkins Pipeline?">How to catch curl response in Jenkins Pipeline?</a></li><li><a class="gatr" href="/atomic-habits-book-review/" data-type="footer-latest-posts" data-name="Atomic Habits - book review">Atomic Habits - book review</a></li><li><a class="gatr" href="/parsing-json-in-command-line-with-jq-basic-filters-and-functions-part-1/" data-type="footer-latest-posts" data-name="Parsing JSON in command-line with jq: basic filters and functions (part 1)">Parsing JSON in command-line with jq: basic filters and functions (part 1)</a></li><li><a class="gatr" href="/how-to-time-out-jenkins-pipeline-stage-and-keep-the-pipeline-running/" data-type="footer-latest-posts" data-name="How to time out Jenkins Pipeline stage and keep the pipeline running?">How to time out Jenkins Pipeline stage and keep the pipeline running?</a></li></ul></div><div class="col-12 col-md-3 text-center"><a class="gatr" href="https://amzn.to/2ZdC8ib" target="_blank" rel="noopener" data-type="banner" data-name="Audible Free Trial"><img class="img-fluid" src="/images/yml/audible-free-trial.jpg"></a></div></div></div></section><section class="bottom"><div class="container"><ul class="text-center py-2"><li class="d-inline-block mb-md-0 mb-2">Designed by <a class="gatr" href="https://twitter.com/wololock" target="_blank" rel="noopener" data-type="footer" data-name="designed">@wololock</a></li><li class="d-inline-block mb-md-0 mb-2">Created with <a class="gatr" href="https://hexo.io" target="_blank" rel="noopener" data-type="footer" data-name="hexo">Hexo</a></li><li class="d-inline-block mb-md-0 mb-2">Hosted on <a class="gatr" href="https://github.com/wololock/wololock.github.io" target="_blank" rel="noopener" data-type="footer" data-name="github">GitHub</a></li><li class="d-inline-block mb-md-0 mb-2">Deployed with <a class="gatr" href="https://circleci.com/gh/wololock/wololock.github.io" target="_blank" rel="noopener" data-type="footer" data-name="circleci">Circle CI</a></li><li class="d-inline-block mb-md-0 mb-2">License <a class="gatr" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener" data-type="footer" data-name="license">CC BY-NC-SA 4.0</a></li><li class="d-inline-block mb-md-0 mb-2"><a class="gatr" href="https://github.com/wololock/wololock.github.io/commits/develop" target="_blank" rel="noopener" data-type="footer" data-name="last-commit"><img src="https://badgen.net/github/last-commit/wololock/wololock.github.io?color=blue&amp;scale=0.8"></a></li></ul></div></section></footer><script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script async src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script><script async src="https://kit.fontawesome.com/25fc8ffdd1.js" crossorigin="anonymous"></script><script async id="cookiebanner" src="//cdnjs.cloudflare.com/ajax/libs/cookie-banner/1.2.2/cookiebanner.min.js" data-moreinfo="/privacy-policy/" data-message="This blog uses cookies to enhance your experience. By continuing to visit it you agree to its use of cookies." data-link="#ffad33" data-font-family="Lora,serif" data-font-size="15px" data-bg="#444"></script><script src="/js/highlight.pack.js?v=9.18.1"></script><script>hljs.initHighlightingOnLoad()</script><script async src="/js/main.js?v=6"></script><script async id="dsq-count-scr" src="//eprintstacktrace.disqus.com/count.js"></script><script>!function(a,e,t,n,c,g,r){a.GoogleAnalyticsObject=c,a.ga=a.ga||function(){(a.ga.q=a.ga.q||[]).push(arguments)},a.ga.l=1*new Date,g=e.createElement(t),r=e.getElementsByTagName(t)[0],g.async=1,g.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(g,r)}(window,document,"script",0,"ga"),ga("create","UA-42400890-5","auto"),ga("send","pageview"),jQuery("a.gatr").click(function(){var a=jQuery(this),e=a.attr("data-type"),t=a.attr("data-name");return ga("send","event",e,"click",t),!0})</script><script>!function(){"use strict";function r(e){var t=e.getAttribute("data-original"),n=new Image;n.onload=function(){e.setAttribute("src",t),e.style.paddingTop=""},n.src=t}document.addEventListener("DOMContentLoaded",function(){var t,e,n,i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));i.length&&("undefined"!=typeof IntersectionObserver?(t=new IntersectionObserver(function(e,t){e.filter(function(e){return e.isIntersecting}).forEach(function(e){r(e.target),t.unobserve(e.target)})}),i.forEach(function(e){t.observe(e)})):(n=function(){clearTimeout(e),e=setTimeout(function(){return(i=i.filter(function(e){return!e.src})).length?void i.filter(function(e){e.getBoundingClientRect().top<window.innerHeight&&r(e)}):(window.removeEventListener("scroll",n),void window.removeEventListener("resize",n))},100)},window.addEventListener("scroll",n),window.addEventListener("resize",n),n()))},!1)}();</script></body></html>