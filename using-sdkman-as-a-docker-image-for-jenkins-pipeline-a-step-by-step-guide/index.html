<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="author" content="Szymon Stepniak"><meta name="robots" content="index, follow"><meta name="monetization" content="$ilp.uphold.com/Jfxe9Qd9z8Mb"><title>Using SDKMAN! as a docker image for Jenkins Pipeline - a step by step guide</title><meta name="description" content="A few days ago, I was struggling with some Docker images I use in my Jenkins CI environment. I run some Jenkins Pipelines, and I like to define build environment as code using custom Docker images. Ev"><meta property="og:type" content="article"><meta property="og:title" content="Using SDKMAN! as a docker image for Jenkins Pipeline - a step by step guide"><meta property="og:url" content="https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/"><meta property="og:site_name" content="Szymon Stepniak - Freelance Groovy Developer &amp; DevOps"><meta property="og:description" content="A few days ago, I was struggling with some Docker images I use in my Jenkins CI environment. I run some Jenkins Pipelines, and I like to define build environment as code using custom Docker images. Ev"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://e.printstacktrace.blog/images/og/jenkins-pipeline-docker-sdkman.jpg"><meta property="article:published_time" content="2019-11-06T18:34:01.000Z"><meta property="article:modified_time" content="2019-11-06T18:34:01.000Z"><meta property="article:author" content="Szymon Stepniak"><meta property="article:tag" content="groovy"><meta property="article:tag" content="java"><meta property="article:tag" content="sdkman"><meta property="article:tag" content="docker"><meta property="article:tag" content="maven"><meta property="article:tag" content="jenkins"><meta property="article:tag" content="jenkins-pipeline"><meta property="article:tag" content="cicd"><meta property="article:tag" content="devops"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://e.printstacktrace.blog/images/og/jenkins-pipeline-docker-sdkman.jpg"><meta name="twitter:creator" content="@wololock"><meta name="keywords" content="groovy,java,sdkman,docker,maven,jenkins,jenkins-pipeline,cicd,devops"><link rel="dns-prefetch" href="//cdnjs.cloudflare.com"><link rel="dns-prefetch" href="//stackpath.bootstrapcdn.com"><link rel="dns-prefetch" href="//disqus.com"><link rel="dns-prefetch" href="//c.disquscdn.com"><link href="//fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;700&amp;display=swap" rel="stylesheet"><link href="//fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&amp;display=swap" rel="stylesheet"><link href="//fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400&amp;display=swap" rel="stylesheet"><link href="//fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;1,400&amp;display=swap" rel="stylesheet"><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"><link rel="shortcut icon" type="image/png" href="/favicon_new.png"><link rel="stylesheet" href="/css/main.css?v=60"><link rel="stylesheet" href="/css/highlightjs.css?v=60"><link rel="canonical" href="https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/"><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":["Person","Organization"],"@id":"https://e.printstacktrace.blog/#/schema/person/wololock","name":"Szymon Stepniak","description":"Groovista, Upwork's Top Rated freelancer, Toru≈Ñ Java User Group founder, open&nbsp;source contributor, Stack Overflow addict, bedroom guitar player. I walk through e.printStackTrace() so you don't have to.","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/#avatar","inLanguage":"en-US","url":"https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200","caption":"Szymon Stepniak"},"logo":{"@id":"https://e.printstacktrace.blog/#avatar"},"sameAs":["https://twitter.com/wololock","https://github.com/wololock","https://stackoverflow.com/users/2194470/szymon-stepniak","https://www.youtube.com/c/eprintstacktrace"]},{"@type":"WebSite","@id":"https://e.printstacktrace.blog/#website","url":"https://e.printstacktrace.blog","name":"Szymon Stepniak - Freelance Groovy Developer & DevOps","description":"Blog about programming, created by Upwork's Top Rated freelancer, 10+ years experienced Java/Groovy developer. Contact me if you are looking for an experienced and high quality consultant."},{"@type":"WebPage","@id":"https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/#webpage","url":"https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/","name":"Using SDKMAN! as a docker image for Jenkins Pipeline - a step by step guide","isPartOf":{"@id":"https://e.printstacktrace.blog/#website"},"datePublished":"2019-11-06T18:34:01.000Z","dateModified":"2019-11-06T18:34:01.000Z","description":"A few days ago, I was struggling with some Docker images I use in my Jenkins CI environment. I run some Jenkins Pipelines, and I like to define build environment as code using custom Docker images. Everything was fine until I had to consider running different Java or Maven versions. I decided to use one of my favorite command-line tools - SDKMAN!, to build a highly configurable build environment.","inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/"]}]},{"@type":"Article","@id":"https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/#article","isPartOf":{"@id":"https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/#webpage"},"author":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"headline":"Using SDKMAN! as a docker image for Jenkins Pipeline - a step by step guide","datePublished":"2019-11-06T18:34:01.000Z","dateModified":"2019-11-06T18:34:01.000Z","mainEntityOfPage":{"@id":"https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/#webpage"},"publisher":{"@id":"https://e.printstacktrace.blog/#/schema/person/wololock"},"keywords":"groovy,java,sdkman,docker,maven,jenkins,jenkins-pipeline,cicd,devops","image":{"@type":"ImageObject","@id":"https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/#primaryimage","url":"https://e.printstacktrace.blog/images/og/jenkins-pipeline-docker-sdkman.jpg","inLanguage":"en-US","caption":"Using SDKMAN! as a docker image for Jenkins Pipeline - a step by step guide"},"inLanguage":"en-US"},{"@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://e.printstacktrace.blog","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@id":"https://e.printstacktrace.blog/jenkins-pipeline-cookbook/","name":"Jenkins Pipeline Cookbook"}},{"@type":"ListItem","position":3,"item":{"@id":"https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/","name":"Using SDKMAN! as a docker image for Jenkins Pipeline - a step by step guide"}}]}]}</script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Szymon Stepniak - Freelance Groovy Developer & DevOps" type="application/atom+xml">
<style>.img-lazyload-container{overflow:hidden;max-width:100%}.img-lazyload-container img{max-width:100%;display:block;height:auto;transition:opacity .5s ease-in-out}.img-lazyload-container img:not([src]){height:0;opacity:0}</style></head><body class="layout-post"><header class="fixed-top" id="header"><div class="container-fluid px-md-auto px-0"><nav class="navbar navbar-expand-lg"><h3 class="logo mr-auto position-relative">e.printstacktrace.blog<a class="stretched-link" href="/"></a></h3><button class="navbar-toggler" data-toggle="collapse" data-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="mainNav"><ul class="navbar-nav ml-lg-auto text-center text-md-left d-block d-lg-flex"><li class="nav-item"><a class="nav-link" href="/">Start here</a></li><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/support-me">Support the blog</a></li><li class="nav-item"><a class="nav-link" href="/archives">Archives</a></li><li class="nav-item"><a class="nav-link" href="/resources">Resources</a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link gatr" href="https://twitter.com/wololock" target="_blank" rel="noopener" data-type="social" data-name="Twitter"><em class="fa fa-twitter"></em></a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link gatr" href="https://github.com/wololock" target="_blank" rel="noopener" data-type="social" data-name="GitHub"><em class="fa fa-github"></em></a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link gatr" href="https://stackoverflow.com/users/2194470/szymon-stepniak" target="_blank" rel="noopener" data-type="social" data-name="Stack Overflow"><em class="fa fa-stack-overflow"></em></a></li><li class="nav-item d-inline-block d-lg-block mx-2 mx-lg-0"><a class="nav-link gatr" href="https://youtube.com/c/eprintstacktrace" target="_blank" rel="noopener" data-type="social" data-name="YouTube"><em class="fa fa-youtube"></em></a></li></ul></div></nav></div></header><main id="page-post"><header class="jumbotron text-center pb-5" style="background-image:url(/images/jenkins-bg.jpg)"><div class="mask"></div><div class="container pt-5 pb-1"><a class="category mark" href="/jenkins-pipeline-cookbook/">Jenkins Pipeline Cookbook</a><h1 class="mt-2 mt-md-0">Using SDKMAN! as a docker image for Jenkins Pipeline - a step by step guide</h1><section class="post-meta"><ul><li><time datetime="2019-11-06T18:34:01.000Z">Nov 6, 2019</time></li><li>14 min. read</li><li><a href="https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/#disqus_thread">0 Comments</a></li></ul></section></div></header><article class="post-content" role="article"><div class="container"><div class="row"><div class="col-12 offset-0 col-md-10 offset-md-1 pt-4 pt-md-5"><div class="paragraph"><p>A few days ago, I was struggling with some Docker images I use in my Jenkins CI environment. I run some Jenkins Pipelines, and I like to define build environment as code using custom Docker images. Everything was fine until I had to consider running different Java or Maven versions. I decided to use one of my favorite command-line tools - <a href="https://sdkman.io/" target="_blank" rel="noopener">SDKMAN!</a>, to build a highly configurable build environment.</p></div><a id="more"></a><div class="paragraph"><p>Let&#8217;s get directly into the details, and let&#8217;s start with defining a simple <code>Dockerfile</code> that installs SDKMAN! and expected Java and Maven versions.</p></div><div class="sect1"><h2 id="dockerfile">Dockerfile</h2><div class="sectionbody"><div class="listingblock"><div class="title">Listing 1. Dockerfile</div><div class="content"><pre class="highlightjs highlight"><code data-lang="dockerfile" class="language-dockerfile hljs">FROM debian:stretch-slim <i class="conum" data-value="1"></i><b>(1)</b>

# Defining default Java and Maven version <i class="conum" data-value="2"></i><b>(2)</b>
ARG JAVA_VERSION="11.0.6-amzn"
ARG MAVEN_VERSION="3.6.2"

# Defining default non-root user UID, GID, and name <i class="conum" data-value="3"></i><b>(3)</b>
ARG USER_UID="1000"
ARG USER_GID="1000"
ARG USER_NAME="jenkins"

# Creating default non-user <i class="conum" data-value="4"></i><b>(4)</b>
RUN groupadd -g $USER_GID $USER_NAME &amp;&amp; \
	useradd -m -g $USER_GID -u $USER_UID $USER_NAME

# Installing basic packages <i class="conum" data-value="5"></i><b>(5)</b>
RUN apt-get update &amp;&amp; \
	apt-get install -y zip unzip curl &amp;&amp; \
	rm -rf /var/lib/apt/lists/* &amp;&amp; \
	rm -rf /tmp/*

# Switching to non-root user to install SDKMAN! <i class="conum" data-value="6"></i><b>(6)</b>
USER $USER_UID:$USER_GID

# Downloading SDKMAN! <i class="conum" data-value="7"></i><b>(7)</b>
RUN curl -s "https://get.sdkman.io" | bash

# Installing Java and Maven, removing some unnecessary SDKMAN files <i class="conum" data-value="8"></i><b>(8)</b>
RUN bash -c "source $HOME/.sdkman/bin/sdkman-init.sh &amp;&amp; \
    yes | sdk install java $JAVA_VERSION &amp;&amp; \
    yes | sdk install maven $MAVEN_VERSION &amp;&amp; \
    rm -rf $HOME/.sdkman/archives/* &amp;&amp; \
    rm -rf $HOME/.sdkman/tmp/*"</code></pre></div></div><div class="paragraph"><p><em class="conum" data-value="1"></em> I use <code>debian:stretch-slim</code> in this example - a small 55 MB base docker image. It&#8217;s not the smallest available docker image, but it will work fine in our experiment. In our example, we will be using <a href="https://aws.amazon.com/corretto/" target="_blank" rel="noopener">Amazon Corretto JDK 11.0.6</a> - a distribution of OpenJDK from Amazon.com. We also want to install Maven 3.6.2 so we can run some <code>mvn clean install</code> command in the Jenkins Pipeline. We define both <em class="conum" data-value="2"></em> using <code>ARG</code> instruction<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> so we can easily override default versions from the command line.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ docker build --build-arg JAVA_VERSION=8.0.232-amzn ...</code></pre></div></div><div class="paragraph"><p>We are going to run the docker container as a non-root user. We define <em class="conum" data-value="3"></em> default <code>USER_UID</code>, <code>USER_GID</code> and <code>USER_NAME</code> using <code>ARG</code> instruction, and we create <em class="conum" data-value="4"></em> the user, his group and home directory. SDKMAN! requires tools like <code>curl</code>, <code>zip</code> and <code>unzip</code> - we need to install them <em class="conum" data-value="5"></em>.</p></div><div class="paragraph"><p>Before we install SDKMAN!, we are switching to our non-root user <em class="conum" data-value="6"></em> and we are ready to install SDKMAN! using <code>curl</code> <em class="conum" data-value="7"></em>. Th last step we need to do is to run <code>sdkman-init.sh</code> script and install expected Java and Maven <em class="conum" data-value="8"></em>.</p></div><div class="paragraph"><p>That&#8217;s our Dockerfile. Let&#8217;s build <code>sdkman:local</code> Docker image.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ docker build -t sdkman:local .</code></pre></div></div><div class="paragraph"><p>Let&#8217;s run the container in the interactive mode (<code>-it</code>) and attach a <code>bash</code> process:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs"><strong>$ docker run -it --rm  -u $(id -u) sdkman:local bash</strong>
jenkins@1c06914cb5ce:/<strong>$ java -version</strong>
openjdk version "11.0.6" 2020-01-14 LTS
OpenJDK Runtime Environment Corretto-11.0.6.10.1 (build 11.0.6+10-LTS)
OpenJDK 64-Bit Server VM Corretto-11.0.6.10.1 (build 11.0.6+10-LTS, mixed mode)
jenkins@1c06914cb5ce:/<strong>$ mvn -version</strong>
Apache Maven 3.6.2 (40f52333136460af0dc0d7232c0dc0bcf0d9e117; 2019-08-27T15:06:16Z)
Maven home: /home/jenkins/.sdkman/candidates/maven/current
Java version: 11.0.6, vendor: Amazon.com Inc., runtime: /home/jenkins/.sdkman/candidates/java/11.0.6-amzn
Default locale: en_US, platform encoding: ANSI_X3.4-1968
OS name: "linux", version: "5.5.10-100.fc30.x86_64", arch: "amd64", family: "unix"</code></pre></div></div><div class="paragraph"><p>It works like a charm! It&#8217;s time to set up a Jenkins Pipeline.</p></div></div></div><div class="sect1"><h2 id="jenkins-pipeline">Jenkins Pipeline</h2><div class="sectionbody"><div class="paragraph"><p>Let&#8217;s start by defining a simple Jenkins Pipeline.</p></div><div class="listingblock"><div class="title">Listing 2. Jenkinsfile</div><div class="content"><pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">pipeline {
    agent {
        docker {
            image "sdkman:local" <i class="conum" data-value="1"></i><b>(1)</b>
        }
    }
    stages {
        stage("Build") {
            steps {
                sh "java -version" <i class="conum" data-value="2"></i><b>(2)</b>
                sh "mvn -version" <i class="conum" data-value="3"></i><b>(3)</b>
            }
        }
    }
}</code></pre></div></div><div class="paragraph"><p>We start slowly. Firstly, we configure a docker agent that will start a container from our <code>sdkman:local</code> docker image <em class="conum" data-value="1"></em>. Secondly, we define a single <code>Build</code> stage and we want to verify if running Java <em class="conum" data-value="2"></em> and Maven <em class="conum" data-value="3"></em> are working. We run the pipeline and we see:</p></div><div class="openblock text-center"><div class="content"><div class="imageblock img-responsive img-thumbnail"><div class="content"><a class="image" href="/images/jenkins-pipeline-sdkman-fail.png"><div class="img-lazyload-container" style="width:1008px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/jenkins-pipeline-sdkman-fail.png" height="513" width="1008" style="padding-top:50.89285714285714%"></div></a></div></div></div></div><div class="paragraph"><p>The pipeline cannot found <code>java</code>? What? We just tested it with <code>docker run &#8230;&#8203; bash</code> and it worked! We look at the console log, we see that Jenkins docker agent spawned the right container. What&#8217;s the problem then?</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="text" class="language-text hljs">Started by user Szymon Stepniak
Running in Durability level: MAX_SURVIVABILITY
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /home/wololock/.jenkins/workspace/pipeline-with-sdkman
[Pipeline] {
[Pipeline] sh
+ docker inspect -f . sdkman:local
.
[Pipeline] withDockerContainer
Jenkins does not seem to be running inside a container
$ docker run -t -d -u 1000:1000 -w /home/wololock/.jenkins/workspace/pipeline-with-sdkman -v /home/wololock/.jenkins/workspace/pipeline-with-sdkman:/home/wololock/.jenkins/workspace/pipeline-with-sdkman:rw,z -v /home/wololock/.jenkins/workspace/pipeline-with-sdkman@tmp:/home/wololock/.jenkins/workspace/pipeline-with-sdkman@tmp:rw,z -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** -e ******** sdkman:local cat
$ docker top 064e63fd3795df643c4a7f676421b15ade9ae126f10efc6d3383509f7213c04b -eo pid,comm
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Build)
[Pipeline] sh
+ java -version
/home/wololock/.jenkins/workspace/pipeline-with-sdkman@tmp/durable-ff41de0e/script.sh: 1: /home/wololock/.jenkins/workspace/pipeline-with-sdkman@tmp/durable-ff41de0e/script.sh: java: not found
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
$ docker stop --time=1 064e63fd3795df643c4a7f676421b15ade9ae126f10efc6d3383509f7213c04b
$ docker rm -f 064e63fd3795df643c4a7f676421b15ade9ae126f10efc6d3383509f7213c04b
[Pipeline] // withDockerContainer
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
ERROR: script returned exit code 127
Finished: FAILURE</code></pre></div></div><div class="paragraph"><p>What we missed? Could it be the entrypoint<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>? In our <code>docker run &#8230;&#8203; bash</code> test we have executed Bash shell and the <code>.bashrc</code> script was executed, which added SDKMAN! candidates to the <code>PATH</code> environment variable. Let&#8217;s try to run <code>java -version</code> directly from the docker container and let&#8217;s see what happens:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs"><strong>$ docker run --rm -u $(id -u) sdkman:local java -version</strong>
container_linux.go:247: starting container process caused "exec: \"java\": executable file not found in $PATH"
/usr/bin/docker-current: Error response from daemon: oci runtime error: container_linux.go:247: starting container process caused "exec: \"java\": executable file not found in $PATH".</code></pre></div></div><div class="paragraph"><p>OK, this is something. It looks like executing <code>java -version</code> without starting Bash shell makes <code>java</code> command missing in the <code>PATH</code> env variable. Let&#8217;s try to fix it by adding a simple <code>ENTRYPOINT</code> to our Dockerfile. For simplicity, we will use a command instead of a script file.</p></div><div class="listingblock"><div class="title">Listing 3. Dockerfile</div><div class="content"><pre class="highlightjs highlight"><code data-lang="dockerfile" class="language-dockerfile hljs">FROM debian:stretch-slim

# Defining default Java and Maven version
ARG JAVA_VERSION="11.0.6-amzn"
ARG MAVEN_VERSION="3.6.2"

# Defining default non-root user UID, GID, and name
ARG USER_UID="1000"
ARG USER_GID="1000"
ARG USER_NAME="jenkins"

# Creating default non-user
RUN groupadd -g $USER_GID $USER_NAME &amp;&amp; \
	useradd -m -g $USER_GID -u $USER_UID $USER_NAME

# Installing basic packages
RUN apt-get update &amp;&amp; \
	apt-get install -y zip unzip curl &amp;&amp; \
	rm -rf /var/lib/apt/lists/* &amp;&amp; \
	rm -rf /tmp/*

# Switching to non-root user to install SDKMAN!
USER $USER_UID:$USER_GID

# Downloading SDKMAN!
RUN curl -s "https://get.sdkman.io" | bash

# Installing Java and Maven, removing some unnecessary SDKMAN files
RUN bash -c "source $HOME/.sdkman/bin/sdkman-init.sh &amp;&amp; \
    yes | sdk install java $JAVA_VERSION &amp;&amp; \
    yes | sdk install maven $MAVEN_VERSION &amp;&amp; \
    rm -rf $HOME/.sdkman/archives/* &amp;&amp; \
    rm -rf $HOME/.sdkman/tmp/*"

ENTRYPOINT bash -c "source $HOME/.sdkman/bin/sdkman-init.sh &amp;&amp; $0 $@" <i class="conum" data-value="1"></i><b>(1)</b></code></pre></div></div><div class="paragraph"><p>In this example, we make sure that <code>sdkman-init.sh</code> script gets executed before any command triggered on the container. We can rebuild the docker image and try to run <code>java -version</code> again.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs"><strong>$ docker build -t sdkman:local .</strong>
Sending build context to Docker daemon 3.584 kB
Step 1/12 : FROM debian:stretch-slim
 ---> c2f145c34384
Step 2/12 : ARG JAVA_VERSION="11.0.6-amzn"
 ---> Using cache
 ---> 6a3e406a9502
Step 3/12 : ARG MAVEN_VERSION="3.6.2"
 ---> Using cache
 ---> 15764ee0855a
Step 4/12 : ARG USER_UID="1000"
 ---> Using cache
 ---> a69f8849b91e
Step 5/12 : ARG USER_GID="1000"
 ---> Using cache
 ---> e58afc8d231f
Step 6/12 : ARG USER_NAME="jenkins"
 ---> Using cache
 ---> 4b12ba6ffbb2
Step 7/12 : RUN groupadd -g $USER_GID $USER_NAME && 	useradd -m -g $USER_GID -u $USER_UID $USER_NAME
 ---> Using cache
 ---> 4de53350c4bf
Step 8/12 : RUN apt-get update && 	apt-get install -y zip unzip curl && 	rm -rf /var/lib/apt/lists/\* && 	rm -rf /tmp/\*
 ---> Using cache
 ---> a3aaaeb15bda
Step 9/12 : USER $USER_UID:$USER_GID
 ---> Using cache
 ---> b39d53a9c785
Step 10/12 : RUN curl -s "https://get.sdkman.io" | bash
 ---> Using cache
 ---> 205c93608b5e
Step 11/12 : RUN bash -c "source $HOME/.sdkman/bin/sdkman-init.sh &&     yes | sdk install java $JAVA_VERSION &&     yes | sdk install maven $MAVEN_VERSION &&     rm -rf $HOME/.sdkman/archives/\* &&     rm -rf $HOME/.sdkman/tmp/\*"
 ---> Using cache
 ---> 1b4af7eec712
Step 12/12 : ENTRYPOINT bash -c "source $HOME/.sdkman/bin/sdkman-init.sh && $0 $@"
 ---> Using cache
 ---> 1d38b0879ab0
Successfully built 1d38b0879ab0

<strong>$ docker run --rm -u $(id -u) sdkman:local java -version</strong>
openjdk version "11.0.6" 2020-01-14 LTS
OpenJDK Runtime Environment Corretto-11.0.6.10.1 (build 11.0.6+10-LTS)
OpenJDK 64-Bit Server VM Corretto-11.0.6.10.1 (build 11.0.6+10-LTS, mixed mode)</code></pre></div></div><div class="paragraph"><p>Now, this is what we expect! We can run <code>java</code> and <code>mvn</code> commands without running Bash shell. We should be ready to go with the Jenkins Pipeline. Let&#8217;s restart it and see what happens.</p></div><div class="openblock text-center"><div class="content"><div class="imageblock img-responsive img-thumbnail"><div class="content"><a class="image" href="/images/jenkins-pipeline-sdkman-fail-again.png"><div class="img-lazyload-container" style="width:993px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/jenkins-pipeline-sdkman-fail-again.png" height="503" width="993" style="padding-top:50.65458207452165%"></div></a></div></div></div></div><div class="paragraph"><p>The same <code>java: not found</code> error&#8230;&#8203;</p></div></div></div><div class="sect1"><h2 id="how-to-fix-java-not-found-error-in-jenkins-pipeline">How to fix <code>java: not found</code> error in Jenkins Pipeline?</h2><div class="sectionbody"><div class="paragraph"><p>Why does the Jenkins Pipeline <code>sh</code> step fail to execute <code>java</code> command in our pipeline? The main reason why <code>java</code> cannot be found is that the <code>PATH</code> environment variable seems to be missing SDKMAN! candidates. Here is what the <code>PATH</code> of the <code>sdkman:local</code> docker container looks like:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs"><strong>$ docker run --rm -u $(id -u) sdkman:local printenv | grep PATH</strong>
PATH=/home/jenkins/.sdkman/candidates/maven/current/bin:/home/jenkins/.sdkman/candidates/java/current/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</code></pre></div></div><div class="paragraph"><p>And here is what the <code>PATH</code> variable looks like when we call <code>printenv</code> using <code>sh</code> pipeline step:</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">[Pipeline] sh
+ printenv
+ grep PATH
CLASSPATH=
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</code></pre></div></div><div class="paragraph"><p>There are at least two known issues<sup class="footnote">[<a id="_footnoteref_3" class="footnote" href="#_footnotedef_3" title="View footnote.">3</a>]</sup><sup class="footnote">[<a id="_footnoteref_4" class="footnote" href="#_footnotedef_4" title="View footnote.">4</a>]</sup> that seem to make updating <code>PATH</code> environment variable impossible.</p></div><div class="paragraph"><p>But what if I tell you that there is a solution to that problem? There are some workarounds, but their main problem is that they require specifying additional <code>PATH</code> env variable like <code>PATH+EXTRA</code> which means that you need to explicitly prepare yourself for missing <code>PATH</code> locations. I would accept it if there was no other option, but ideally no such workarounds should be necessary. And I have found a way how to do it.</p></div></div></div><div class="sect1"><h2 id="override-path-in-your-dockerfile">Override <code>PATH</code> in your Dockerfile</h2><div class="sectionbody"><div class="paragraph"><p>There is at least one way how you can override <code>PATH</code> variable used by the docker container started in the Jenkins Pipeline. You can do it using <code>ENV</code> instruction in your Dockerfile. We can construct <code>JAVA_HOME</code> and <code>MAVEN_HOME</code> environment variables (we know exactly where SDKMAN! installed both candidates), and then we can use it to override <code>PATH</code> variable. Here is what the final Dockerfile looks like:</p></div><div class="listingblock"><div class="title">Listing 4. Dockerfile</div><div class="content"><pre class="highlightjs highlight"><code data-lang="dockerfile" class="language-dockerfile hljs">FROM debian:stretch-slim

# Defining default Java and Maven version
ARG JAVA_VERSION="11.0.6-amzn"
ARG MAVEN_VERSION="3.6.2"

# Defining default non-root user UID, GID, and name
ARG USER_UID="1000"
ARG USER_GID="1000"
ARG USER_NAME="jenkins"

# Creating default non-user
RUN groupadd -g $USER_GID $USER_NAME &amp;&amp; \
	useradd -m -g $USER_GID -u $USER_UID $USER_NAME

# Installing basic packages
RUN apt-get update &amp;&amp; \
	apt-get install -y zip unzip curl &amp;&amp; \
	rm -rf /var/lib/apt/lists/* &amp;&amp; \
	rm -rf /tmp/*

# Switching to non-root user to install SDKMAN!
USER $USER_UID:$USER_GID

# Downloading SDKMAN!
RUN curl -s "https://get.sdkman.io" | bash

# Installing Java and Maven, removing some unnecessary SDKMAN files
RUN bash -c "source $HOME/.sdkman/bin/sdkman-init.sh &amp;&amp; \
    yes | sdk install java $JAVA_VERSION &amp;&amp; \
    yes | sdk install maven $MAVEN_VERSION &amp;&amp; \
    rm -rf $HOME/.sdkman/archives/* &amp;&amp; \
    rm -rf $HOME/.sdkman/tmp/*"

# ENTRYPOINT bash -c "source $HOME/.sdkman/bin/sdkman-init.sh &amp;&amp; $0 $@" <i class="conum" data-value="1"></i><b>(1)</b>

ENV MAVEN_HOME="/home/jenkins/.sdkman/candidates/maven/current" <i class="conum" data-value="2"></i><b>(2)</b>
ENV JAVA_HOME="/home/jenkins/.sdkman/candidates/java/current" <i class="conum" data-value="3"></i><b>(3)</b>
ENV PATH="$MAVEN_HOME/bin:$JAVA_HOME/bin:$PATH" <i class="conum" data-value="4"></i><b>(4)</b></code></pre></div></div><div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b></td><td>We can remove <code>ENTRYPOINT</code> at the moment.</td></tr><tr><td><i class="conum" data-value="2"></i><b>2</b></td><td>Here we define <code>MAVEN_HOME</code> using known Maven location.</td></tr><tr><td><i class="conum" data-value="3"></i><b>3</b></td><td>Here we define <code>JAVA_HOME</code> using known Java location.</td></tr><tr><td><i class="conum" data-value="4"></i><b>4</b></td><td>And last but not least - we override <code>PATH</code> using <code>$MAVEN_HOME/bin</code> and <code>$JAVA_HOME/bin</code>.</td></tr></table></div><div class="paragraph"><p>It&#8217;s time to rebuild the docker image.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">$ docker build -t sdkman:local .</code></pre></div></div><div class="paragraph"><p>Let&#8217;s check if <code>java -version</code> command works.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs"><strong>$ docker run --rm -u $(id -u) sdkman:local java -version</strong>
openjdk version "11.0.6" 2020-01-14 LTS
OpenJDK Runtime Environment Corretto-11.0.6.10.1 (build 11.0.6+10-LTS)
OpenJDK 64-Bit Server VM Corretto-11.0.6.10.1 (build 11.0.6+10-LTS, mixed mode)</code></pre></div></div><div class="paragraph"><p>It works! And now it is the time for the final test. Let&#8217;s restart the pipeline.</p></div><div class="openblock text-center"><div class="content"><div class="imageblock img-responsive img-thumbnail"><div class="content"><a class="image" href="/images/jenkins-pipeline-sdkman-success.png"><div class="img-lazyload-container" style="width:996px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/jenkins-pipeline-sdkman-success.png" height="771" width="996" style="padding-top:77.40963855421687%"></div></a></div></div></div></div></div></div><div class="sect1"><h2 id="why-even-bother-with-the-sdkman">Why even bother with the SDKMAN?</h2><div class="sectionbody"><div class="paragraph"><p>At this point, you may wonder why you should even consider using SDKMAN! instead of e.g. official Maven Docker image? As always - it depends. If you use a single Java/Maven/Gradle/"you name it" version in all your pipelines, then using one of the official docker images will do the trick for you. However, if you find yourself in a position where you need to run your e.g. Maven builds with different JDKs and different Maven versions, using the official Maven Docker image may become problematic. If you build your Dockerfile from the official Maven image, you are limited to a specific Java version, as well as a specific Maven version. When you want to use two different Maven versions with two different JDKs, you end up with 4 Dockerfiles - each one extends from different <code>maven</code> docker images.</p></div><div class="paragraph"><p>SDKMAN! solves that problem nicely. You can build a single Dockerfile, configure all your custom things in a single place, and you can use <code>ARG</code> instructions to build different versions from the same Dockerfile. Consider the following example.</p></div><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs"><strong>$ docker build -q --build-arg JAVA_VERSION=11.0.5-amzn --build-arg MAVEN_VERSION=3.5.4 -t sdkman:mvn-3.5.4-jdk-11.0.5-amzn .</strong>
sha256:fc6006992d79314758b0726f226cc5e87355708b9b7348e89599594b2b881d7c

<strong>$ docker build -q --build-arg JAVA_VERSION=11.0.5-amzn --build-arg MAVEN_VERSION=3.6.2 -t sdkman:mvn-3.6.2-jdk-11.0.5-amzn .</strong>
sha256:1e1699b478f404c66ed9cf75d122cd941f49e74de3c6e14d25520edfd8fd204b

<strong>$ docker build -q --build-arg JAVA_VERSION=13.0.1-zulu --build-arg MAVEN_VERSION=3.5.4 -t sdkman:mvn-3.5.4-jdk-13.0.1-zulu .</strong>
sha256:e804b0e7a71bc630d9c590c0e6c714155a7fbc46353b626720f7e53e8e7808c0

<strong>$ docker build -q --build-arg JAVA_VERSION=13.0.1-zulu --build-arg MAVEN_VERSION=3.6.2 -t sdkman:mvn-3.6.2-jdk-13.0.1-zulu .</strong>
sha256:d08fbd4ef3f889b0739d83d71e1d1f9da9bbf09b5d50d9418b661db6d8be80c7

<strong>$ docker run --rm -u $(id -u) sdkman:mvn-3.5.4-jdk-11.0.5-amzn mvn -version</strong>
Apache Maven 3.5.4 (1edded0938998edf8bf061f1ceb3cfdeccf443fe; 2018-06-17T18:33:14Z)
Maven home: /home/jenkins/.sdkman/candidates/maven/current
Java version: 11.0.5, vendor: Amazon.com Inc., runtime: /home/jenkins/.sdkman/candidates/java/11.0.5-amzn
Default locale: en_US, platform encoding: ANSI_X3.4-1968
OS name: "linux", version: "5.3.8-200.fc30.x86_64", arch: "amd64", family: "unix"

<strong>$ docker run --rm -u $(id -u) sdkman:mvn-3.6.2-jdk-13.0.1-zulu mvn -version</strong>
Apache Maven 3.6.2 (40f52333136460af0dc0d7232c0dc0bcf0d9e117; 2019-08-27T15:06:16Z)
Maven home: /home/jenkins/.sdkman/candidates/maven/current
Java version: 13.0.1, vendor: Azul Systems, Inc., runtime: /home/jenkins/.sdkman/candidates/java/13.0.1-zulu
Default locale: en_US, platform encoding: ANSI_X3.4-1968
OS name: "linux", version: "5.3.8-200.fc30.x86_64", arch: "amd64", family: "unix"</code></pre></div></div><div class="paragraph"><p>In this example, we have built four different docker images from the same Dockerfile. It makes the maintenance of all variants much more straightforward - when something requires fixing, we change a single Dockerfile and rebuild all tags.</p></div><div class="paragraph"><p></p><div class="youtube-box py-4"><div class="container"><div class="row"><div class="col-12 col-md-6 offset-md-1 offset-0 pr-md-5 order-1 order-md-0"><h4>Jenkins Pipeline with multiple Java versions using Maven, Docker, and SDKMAN! | #jenkinspipeline</h4><p class="desc">In this video, I show you how you can use Jenkins Declarative Pipeline to create a build pipeline that compiles the Maven Java project using three different Java versions (8, 11, and 15.) You will learn how to use a matrix section of the Jenkins Pipeline to define parallel stages, as well as how to create a Docker image that provides both Java and Maven using the powerful SDKMAN command-line tool.</p><p class="text-center pt-3"><a class="btn btn-danger text-white" href="https://www.youtube.com/watch?v=j1lH3vOhucw" target="_blank" rel="noopener" data-type="youtube" data-name="Jenkins Pipeline with multiple Java versions using Maven, Docker, and SDKMAN! | #jenkinspipeline">Watch now</a></p></div><div class="col-12 col-md-4 order-0 order-md-1"><div class="card shadow mb-4 mb-md-0"><div class="card-header" itemprop="image" style="background-image:url(https://i3.ytimg.com/vi/j1lH3vOhucw/mqdefault.jpg)"><div class="time">19:42</div><em class="fa fa-youtube"></em></div><a class="stretched-link gatr" href="https://www.youtube.com/watch?v=j1lH3vOhucw" target="_blank" rel="noopener" data-type="youtube" data-name="Jenkins Pipeline with multiple Java versions using Maven, Docker, and SDKMAN! | #jenkinspipeline"></a></div></div></div></div></div><p></p></div><div class="paragraph mt-5"><p>Share this blog post on <span class="icon color-twitter"><i class="fa fa-twitter"></i></span> <a href="https://twitter.com/intent/tweet?text=%22Using%20SDKMAN!%20as%20a%20docker%20image%20for%20Jenkins%20Pipeline%20-%20a%20step%20by%20step%20guide%22%20https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/%20via%20@wololock" target="_blank" rel="noopener">Twitter</a> or <span class="icon color-linkedin"><i class="fa fa-linkedin-square"></i></span> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://e.printstacktrace.blog/using-sdkman-as-a-docker-image-for-jenkins-pipeline-a-step-by-step-guide/&title=Using%20SDKMAN!%20as%20a%20docker%20image%20for%20Jenkins%20Pipeline%20-%20a%20step%20by%20step%20guide" target="_blank" rel="noopener">LinkedIn</a> to help me spread the word. Thanks! <span class="icon"><i class="fa fa-smile-o"></i></span></p></div><div class="imageblock img-fluid"><a href="https://kit.co/wololock/jenkins-pipeline-learning-kit" target="_blank" rel="noopener" class="gatr" data-type="banner" data-name="Jenkins Pipeline Learning Kit 02"><div class="img-lazyload-container" style="width:920px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==);background-repeat:no-repeat;background-position:center"><img data-original="/images/yml/jenkins-pipeline-learning-kit-02.jpg" height="200" width="920" style="padding-top:21.73913043478261%"></div></a></div></div></div><div id="footnotes"><hr><div class="footnote" id="_footnotedef_1"><a href="#_footnoteref_1">1</a>. <a href="https://docs.docker.com/engine/reference/builder/#arg" target="_blank" rel="noopener" class="bare">https://docs.docker.com/engine/reference/builder/#arg</a></div><div class="footnote" id="_footnotedef_2"><a href="#_footnoteref_2">2</a>. <a href="https://docs.docker.com/engine/reference/builder/#entrypoint" target="_blank" rel="noopener" class="bare">https://docs.docker.com/engine/reference/builder/#entrypoint</a></div><div class="footnote" id="_footnotedef_3"><a href="#_footnoteref_3">3</a>. <a href="https://issues.jenkins-ci.org/browse/JENKINS-45616" target="_blank" rel="noopener" class="bare">https://issues.jenkins-ci.org/browse/JENKINS-45616</a></div><div class="footnote" id="_footnotedef_4"><a href="#_footnoteref_4">4</a>. <a href="https://issues.jenkins-ci.org/browse/JENKINS-41339" target="_blank" rel="noopener" class="bare">https://issues.jenkins-ci.org/browse/JENKINS-41339</a></div></div></div><div class="col-12 offset-0 col-md-10 offset-md-1"><div class="post-tags"><ul><li class="text"><em class="far fa-calendar-alt mr-1"></em>Published: Nov 6, 2019 in <a class="mark" href="/jenkins-pipeline-cookbook/">Jenkins Pipeline Cookbook</a></li></ul><ul class="mt-2"><li class="text"><em class="fas fa-tags"></em></li><li><a href="/t/cicd/">cicd</a></li><li><a href="/t/devops/">devops</a></li><li><a href="/t/docker/">docker</a></li><li><a href="/t/groovy/">groovy</a></li><li><a href="/t/java/">java</a></li><li><a href="/t/jenkins/">jenkins</a></li><li><a href="/t/jenkins-pipeline/">jenkins-pipeline</a></li><li><a href="/t/maven/">maven</a></li><li><a href="/t/sdkman/">sdkman</a></li></ul></div></div></div></div><footer class="post-footer"><div class="container"><div class="row"><div class="col-12 offset-0 col-md-10 offset-md-1"><div class="about-author"><div class="row"><div class="col-md-2 col-6 offset-md-0 offset-3 text-center mt-4"><img class="rounded-circle img-fluid" src="https://www.gravatar.com/avatar/b22c1842c6e8f7f2b9b3ed8c0d4efb4d?s=200"></div><div class="col-md-10 col-12 text-md-left text-center mt-md-4 mt-1"><h4 class="text-md-left text-center"><a class="gatr" href="/about" data-type="post-footer" data-name="About">Szymon Stepniak</a></h4><p class="bio"><span>Groovista, Upwork's Top Rated freelancer, Toru≈Ñ Java User Group founder, open&nbsp;source contributor, Stack Overflow addict, bedroom guitar player. I walk through e.printStackTrace() so you don't have to.</span><span class="ml-2"><a href="/about">More about me &raquo;</a></span></p><ul class="social-links text-md-left text-center"><li><a class="gatr" href="https://twitter.com/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1" data-type="post-footer" data-name="twitter"><span class="fa fa-twitter"></span></a></li><li><a class="gatr" href="https://github.com/wololock" target="_blank" rel="noopener" onclick="return window.open(this.href),!1" data-type="post-footer" data-name="github"><span class="fa fa-github"></span></a></li><li><a class="gatr" href="https://stackoverflow.com/users/2194470/szymon-stepniak?tab=profile" target="_blank" rel="noopener" onclick="return window.open(this.href),!1" data-type="post-footer" data-name="stackoverflow"><span class="fa fa-stack-overflow"></span></a></li><li><a class="gatr" href="https://www.youtube.com/c/eprintstacktrace" target="_blank" rel="noopener" onclick="return window.open(this.href),!1" data-type="post-footer" data-name="youtube"><span class="fa fa-youtube"></span></a></li></ul></div></div></div></div></div></div></footer></article></main><section class="related-posts"><div class="container"><h3>Related posts</h3><div class="card-deck pt-2"><article class="card shadow-sm"><div class="card-header" style="background-image:url(/images/cards/jenkins-01.jpg)"><div class="mask"></div><h3 class="h5 text-left font-weight-bold text-white"><div><a class="category">Jenkins Pipeline Cookbook</a></div><div class="title">Using Jenkins Pipeline parallel stages to build Maven project with different JDKs</div></h3></div><div class="card-body"><section class="post-meta"><ul><li><time datetime="2019-11-28T20:53:10.000Z">Nov 28, 2019</time></li><li>4 min. read</li><li><a href="https://e.printstacktrace.blog/using-jenkins-pipeline-parallel-stages-to-build-maven-project-with-different-jdks/#disqus_thread">0 Comments</a></li></ul></section><p class="card-text pt-3">In one of the latest blog posts, I have shown you how you can build a Docker image with Java and Maven installed with the SDKMAN! command-line tool. Today I would like to continue the topic and show you, how you can compile your project using two different Java versions in parallel.</p></div><a class="stretched-link gatr" href="/using-jenkins-pipeline-parallel-stages-to-build-maven-project-with-different-jdks/" data-type="related" data-name="Using Jenkins Pipeline parallel stages to build Maven project with different JDKs"></a></article><article class="card shadow-sm"><div class="card-header" style="background-image:url(/images/cards/jenkins-01.jpg)"><div class="mask"></div><h3 class="h5 text-left font-weight-bold text-white"><div><a class="category">Jenkins Pipeline Cookbook</a></div><div class="title">Building Java and Maven docker images using parallelized Jenkins Pipeline and SDKMAN!</div></h3></div><div class="card-body"><section class="post-meta"><ul><li><time datetime="2019-11-11T21:28:10.000Z">Nov 11, 2019</time></li><li>6 min. read</li><li><a href="https://e.printstacktrace.blog/building-java-and-maven-docker-images-using-parallelized-jenkins-pipeline-and-sdkman/#disqus_thread">0 Comments</a></li></ul></section><p class="card-text pt-3">In the last article, I have shown you how you can build a docker image for Jenkins Pipeline using SDKMAN! command-line tool. Today I will show you how you can build multiple different docker images using parallelized Jenkins Pipeline.</p></div><a class="stretched-link gatr" href="/building-java-and-maven-docker-images-using-parallelized-jenkins-pipeline-and-sdkman/" data-type="related" data-name="Building Java and Maven docker images using parallelized Jenkins Pipeline and SDKMAN!"></a></article><article class="card shadow-sm"><div class="card-header" style="background-image:url(/images/cards/jenkins-02.jpg)"><div class="mask"></div><h3 class="h5 text-left font-weight-bold text-white"><div><a class="category">Jenkins Pipeline Cookbook</a></div><div class="title">How to time out Jenkins Pipeline stage and keep the pipeline running?</div></h3></div><div class="card-body"><section class="post-meta"><ul><li><time datetime="2020-04-16T07:28:38.000Z">Apr 16, 2020</time></li><li>4 min. read</li><li><a href="https://e.printstacktrace.blog/how-to-time-out-jenkins-pipeline-stage-and-keep-the-pipeline-running/#disqus_thread">0 Comments</a></li></ul></section><p class="card-text pt-3">The declarative Jenkins Pipeline allows us to define timeout either at the pipeline level or the specific stage. This feature prevents Jenkins&#8217;s job from getting stuck. However, in some cases, we want to accept that one stage may timeout, but we want to keep the remaining stages running.</p></div><a class="stretched-link gatr" href="/how-to-time-out-jenkins-pipeline-stage-and-keep-the-pipeline-running/" data-type="related" data-name="How to time out Jenkins Pipeline stage and keep the pipeline running?"></a></article></div></div><div class="mt-5 text-center"><div class="container"><a class="gatr" href="https://click.linksynergy.com/deeplink?id=uow2LCEuhvQ&amp;mid=39197&amp;murl=https%3A%2F%2Fwww.udemy.com%2Fcourse%2Flearn-devops-ci-cd-with-jenkins-using-pipelines-and-docker%2F" target="_blank" rel="noopener" data-type="banner" data-name="Udemy - Start Learning Devops - Using SDKMAN as a docker image"><img class="img-fluid" src="/images/yml/udemy-start-learning-devops-hz.jpg"></a></div></div><div class="col-12 text-center mt-5 serif"><h5 class="h3"><span class="small d-block mb-2">More posts from</span><span class="font-weight-bold mark">Jenkins Pipeline Cookbook</span></h5><div><em class="fas fa-angle-down"></em></div><a class="stretched-link" href="/jenkins-pipeline-cookbook/"></a></div></section><div class="container py-5"><div class="disqus-comments"><div class="alert alert-info small"><em class="fa fa-info-circle"></em> Want to paste code in the comment and make the formatting look good? Read this - <a href="https://help.disqus.com/en/articles/1717236-syntax-highlighting" target="_blank" rel="noopener"><b>Syntax highlighting</b></a>.</div><div class="comments"><div id="disqus_thread"><div id="disqus_empty" style="display:none">Empty</div></div></div></div><script>function load_disqus(e){var t=document.getElementById("disqus_empty");if(document.contains(t)){var d=document.getElementById("disqus_thread"),n=document.createElement("script"),s=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0];d&&t&&(t.remove(),n.type="text/javascript",n.async=!0,n.src="//"+e+".disqus.com/embed.js",s.appendChild(n))}}window.addEventListener("scroll",function(e){document.scrollingElement.scrollTop>document.getElementById("disqus_thread").offsetTop-500&&load_disqus("eprintstacktrace")},!1)</script></div><footer class="page-footer"><section class="links"><div class="container"><div class="row"><div class="col-12 col-md-4"><h5 class="text-md-left text-center">Useful links</h5><ul class="text-md-left text-center mb-md-0 mb-5"><li><a class="gatr" href="/" data-type="footer-useful-links" data-name="Start here">Start here</a></li><li><a class="gatr" href="/about" data-type="footer-useful-links" data-name="About">About</a></li><li><a class="gatr" href="/archives" data-type="footer-useful-links" data-name="Archives">Archives</a></li><li><a class="gatr" href="/resources" data-type="footer-useful-links" data-name="Resources">Resources</a></li><li><a class="gatr" href="/privacy-policy" data-type="footer-useful-links" data-name="Privacy Policy">Privacy Policy</a></li><li><a class="gatr" href="https://kit.co/wololock" target="_blank" rel="noopener" data-type="footer-useful-links" data-name="My Kit">My Kit</a></li><li><a class="gatr" href="https://feeds.feedburner.com/Eprintstacktracenet" target="_blank" rel="noopener" data-type="footer-useful-links" data-name="RSS">RSS</a></li><li><a class="gatr" href="/support-me" data-type="footer-useful-links" data-name="Support me">Support the blog <em class="fas fa-heart color-red ml-2"></em></a></li></ul></div><div class="col-12 col-md-4"><h5 class="text-md-left text-center">Popular categories</h5><ul class="text-md-left text-center mb-md-0 mb-5"><li><a class="gatr" href="/groovy-cookbook/" data-type="footer-category" data-name="Groovy Cookbook">Groovy Cookbook<span class="count ml-2">27</span></a></li><li><a class="gatr" href="/jenkins-pipeline-cookbook/" data-type="footer-category" data-name="Jenkins Pipeline Cookbook">Jenkins Pipeline Cookbook<span class="count ml-2">7</span></a></li><li><a class="gatr" href="/programmers-bookshelf/" data-type="footer-category" data-name="Programmer's Bookshelf">Programmer's Bookshelf<span class="count ml-2">6</span></a></li><li><a class="gatr" href="/micronaut-cookbook/" data-type="footer-category" data-name="Micronaut Cookbook">Micronaut Cookbook<span class="count ml-2">4</span></a></li><li><a class="gatr" href="/learning-java/" data-type="footer-category" data-name="Learning Java">Learning Java<span class="count ml-2">4</span></a></li><li><a class="gatr" href="/ratpack-cookbook/" data-type="footer-category" data-name="Ratpack Cookbook">Ratpack Cookbook<span class="count ml-2">4</span></a></li><li><a class="gatr" href="/how-to/" data-type="footer-category" data-name="How to">How to<span class="count ml-2">3</span></a></li></ul></div><div class="col-12 col-md-4 text-center"><a class="gatr" href="https://amzn.to/2ZdC8ib" target="_blank" rel="noopener" data-type="banner" data-name="Audible Free Trial"><img class="img-fluid" src="/images/yml/audible-free-trial.jpg"></a></div></div></div></section><section class="bottom"><div class="container"><ul class="text-center py-2"><li class="d-inline-block mb-md-0 mb-2">Designed by <a class="gatr" href="https://twitter.com/wololock" target="_blank" rel="noopener" data-type="footer" data-name="designed">@wololock</a></li><li class="d-inline-block mb-md-0 mb-2">Created with <a class="gatr" href="https://hexo.io" target="_blank" rel="noopener" data-type="footer" data-name="hexo">Hexo</a></li><li class="d-inline-block mb-md-0 mb-2">Hosted on <a class="gatr" href="https://github.com/wololock/wololock.github.io" target="_blank" rel="noopener" data-type="footer" data-name="github">GitHub</a></li><li class="d-inline-block mb-md-0 mb-2">Deployed with <a class="gatr" href="https://circleci.com/gh/wololock/wololock.github.io" target="_blank" rel="noopener" data-type="footer" data-name="circleci">Circle CI</a></li><li class="d-inline-block mb-md-0 mb-2">License <a class="gatr" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener" data-type="footer" data-name="license">CC BY-NC-SA 4.0</a></li><li class="d-inline-block mb-md-0 mb-2"><a class="gatr" href="https://github.com/wololock/wololock.github.io/commits/develop" target="_blank" rel="noopener" data-type="footer" data-name="last-commit"><img src="https://badgen.net/github/last-commit/wololock/wololock.github.io?color=blue&amp;scale=0.8"></a></li></ul></div></section></footer><script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script><script async src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script><script async src="https://kit.fontawesome.com/25fc8ffdd1.js" crossorigin="anonymous"></script><script async id="cookiebanner" src="//cdnjs.cloudflare.com/ajax/libs/cookie-banner/1.2.2/cookiebanner.min.js" data-moreinfo="/privacy-policy/" data-message="This blog uses cookies to enhance your experience. By continuing to visit it you agree to its use of cookies." data-link="#ffad33" data-font-family="Lora,serif" data-font-size="15px" data-bg="#444"></script><script src="/js/highlight.pack.js?v=9.18.1"></script><script>hljs.initHighlightingOnLoad()</script><script async src="/js/main.js?v=6"></script><script async id="dsq-count-scr" src="//eprintstacktrace.disqus.com/count.js"></script><script>!function(a,e,t,n,c,g,r){a.GoogleAnalyticsObject=c,a.ga=a.ga||function(){(a.ga.q=a.ga.q||[]).push(arguments)},a.ga.l=1*new Date,g=e.createElement(t),r=e.getElementsByTagName(t)[0],g.async=1,g.src="//www.google-analytics.com/analytics.js",r.parentNode.insertBefore(g,r)}(window,document,"script",0,"ga"),ga("create","UA-42400890-5","auto"),ga("send","pageview"),jQuery("a.gatr").click(function(){var a=jQuery(this),e=a.attr("data-type"),t=a.attr("data-name");return ga("send","event",e,"click",t),!0})</script><script>!function(){"use strict";function r(e){var t=e.getAttribute("data-original"),n=new Image;n.onload=function(){e.setAttribute("src",t),e.style.paddingTop=""},n.src=t}document.addEventListener("DOMContentLoaded",function(){var t,e,n,i=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));i.length&&("undefined"!=typeof IntersectionObserver?(t=new IntersectionObserver(function(e,t){e.filter(function(e){return e.isIntersecting}).forEach(function(e){r(e.target),t.unobserve(e.target)})}),i.forEach(function(e){t.observe(e)})):(n=function(){clearTimeout(e),e=setTimeout(function(){return(i=i.filter(function(e){return!e.src})).length?void i.filter(function(e){e.getBoundingClientRect().top<window.innerHeight&&r(e)}):(window.removeEventListener("scroll",n),void window.removeEventListener("resize",n))},100)},window.addEventListener("scroll",n),window.addEventListener("resize",n),n()))},!1)}();</script></body></html>